mirrorsò†
(function(a,b){
"use strict";
var c;
var d=a.Array;
var e=a.isNaN;
var f=a.JSON.stringify;
var g=a.Math.min;
var h=b.ImportNow("promise_status_symbol");
var i=b.ImportNow("promise_value_symbol");
var j;
var k;
b.Import(function(l){
c=l.FunctionSourceString;
j=l.SymbolToString;
k=l.ToBoolean;
});
var m={
UNDEFINED_TYPE:'undefined',
NULL_TYPE:'null',
BOOLEAN_TYPE:'boolean',
NUMBER_TYPE:'number',
STRING_TYPE:'string',
SYMBOL_TYPE:'symbol',
OBJECT_TYPE:'object',
FUNCTION_TYPE:'function',
REGEXP_TYPE:'regexp',
ERROR_TYPE:'error',
PROPERTY_TYPE:'property',
INTERNAL_PROPERTY_TYPE:'internalProperty',
FRAME_TYPE:'frame',
SCRIPT_TYPE:'script',
CONTEXT_TYPE:'context',
SCOPE_TYPE:'scope',
PROMISE_TYPE:'promise',
MAP_TYPE:'map',
SET_TYPE:'set',
ITERATOR_TYPE:'iterator',
GENERATOR_TYPE:'generator',
}
var n=0;
var o=-1;
var p=[];
var q=true;
function MirrorCacheIsEmpty(){
return n==0&&p.length==0;
}
function ToggleMirrorCache(r){
q=r;
ClearMirrorCache();
}
function ClearMirrorCache(r){
n=0;
p=[];
}
function ObjectIsPromise(r){
return(%_IsSpecObject(r))&&
!(%DebugGetProperty(r,h)===(void 0));
}
function MakeMirror(r,s){
var t;
if(!s&&q){
for(var u in p){
t=p[u];
if(t.value()===r){
return t;
}
if(t.isNumber()&&e(t.value())&&
typeof r=='number'&&e(r)){
return t;
}
}
}
if((r===(void 0))){
t=new UndefinedMirror();
}else if((r===null)){
t=new NullMirror();
}else if((typeof(r)==='boolean')){
t=new BooleanMirror(r);
}else if((typeof(r)==='number')){
t=new NumberMirror(r);
}else if((typeof(r)==='string')){
t=new StringMirror(r);
}else if((typeof(r)==='symbol')){
t=new SymbolMirror(r);
}else if((%_IsArray(r))){
t=new ArrayMirror(r);
}else if((%_IsDate(r))){
t=new DateMirror(r);
}else if((%_IsFunction(r))){
t=new FunctionMirror(r);
}else if((%_IsRegExp(r))){
t=new RegExpMirror(r);
}else if((%_ClassOf(r)==='Error')){
t=new ErrorMirror(r);
}else if((%_ClassOf(r)==='Script')){
t=new ScriptMirror(r);
}else if((%_ClassOf(r)==='Map')||(%_ClassOf(r)==='WeakMap')){
t=new MapMirror(r);
}else if((%_ClassOf(r)==='Set')||(%_ClassOf(r)==='WeakSet')){
t=new SetMirror(r);
}else if((%_ClassOf(r)==='Map Iterator')||(%_ClassOf(r)==='Set Iterator')){
t=new IteratorMirror(r);
}else if(ObjectIsPromise(r)){
t=new PromiseMirror(r);
}else if((%_ClassOf(r)==='Generator')){
t=new GeneratorMirror(r);
}else{
t=new ObjectMirror(r,m.OBJECT_TYPE,s);
}
if(q)p[t.handle()]=t;
return t;
}
function LookupMirror(v){
if(!q){
throw MakeError(2,"Mirror cache is disabled");
}
return p[v];
}
function GetUndefinedMirror(){
return MakeMirror((void 0));
}
function inherits(w,x){
var y=function(){};
y.prototype=x.prototype;
w.super_=x.prototype;
w.prototype=new y();
w.prototype.constructor=w;
}
var z=80;
var A={};
A.Named=1;
A.Indexed=2;
var B={};
B.Data=0;
B.DataConstant=2;
B.AccessorConstant=3;
var C={};
C.None=0;
C.ReadOnly=1;
C.DontEnum=2;
C.DontDelete=4;
var D={Global:0,
Local:1,
With:2,
Closure:3,
Catch:4,
Block:5,
Script:6};
function Mirror(E){
this.type_=E;
}
Mirror.prototype.type=function(){
return this.type_;
};
Mirror.prototype.isValue=function(){
return this instanceof ValueMirror;
};
Mirror.prototype.isUndefined=function(){
return this instanceof UndefinedMirror;
};
Mirror.prototype.isNull=function(){
return this instanceof NullMirror;
};
Mirror.prototype.isBoolean=function(){
return this instanceof BooleanMirror;
};
Mirror.prototype.isNumber=function(){
return this instanceof NumberMirror;
};
Mirror.prototype.isString=function(){
return this instanceof StringMirror;
};
Mirror.prototype.isSymbol=function(){
return this instanceof SymbolMirror;
};
Mirror.prototype.isObject=function(){
return this instanceof ObjectMirror;
};
Mirror.prototype.isFunction=function(){
return this instanceof FunctionMirror;
};
Mirror.prototype.isUnresolvedFunction=function(){
return this instanceof UnresolvedFunctionMirror;
};
Mirror.prototype.isArray=function(){
return this instanceof ArrayMirror;
};
Mirror.prototype.isDate=function(){
return this instanceof DateMirror;
};
Mirror.prototype.isRegExp=function(){
return this instanceof RegExpMirror;
};
Mirror.prototype.isError=function(){
return this instanceof ErrorMirror;
};
Mirror.prototype.isPromise=function(){
return this instanceof PromiseMirror;
};
Mirror.prototype.isGenerator=function(){
return this instanceof GeneratorMirror;
};
Mirror.prototype.isProperty=function(){
return this instanceof PropertyMirror;
};
Mirror.prototype.isInternalProperty=function(){
return this instanceof InternalPropertyMirror;
};
Mirror.prototype.isFrame=function(){
return this instanceof FrameMirror;
};
Mirror.prototype.isScript=function(){
return this instanceof ScriptMirror;
};
Mirror.prototype.isContext=function(){
return this instanceof ContextMirror;
};
Mirror.prototype.isScope=function(){
return this instanceof ScopeMirror;
};
Mirror.prototype.isMap=function(){
return this instanceof MapMirror;
};
Mirror.prototype.isSet=function(){
return this instanceof SetMirror;
};
Mirror.prototype.isIterator=function(){
return this instanceof IteratorMirror;
};
Mirror.prototype.allocateHandle_=function(){
if(q)this.handle_=n++;
};
Mirror.prototype.allocateTransientHandle_=function(){
this.handle_=o--;
};
Mirror.prototype.toText=function(){
return"#<"+this.constructor.name+">";
};
function ValueMirror(E,r,F){
%_CallFunction(this,E,Mirror);
this.value_=r;
if(!F){
this.allocateHandle_();
}else{
this.allocateTransientHandle_();
}
}
inherits(ValueMirror,Mirror);
Mirror.prototype.handle=function(){
return this.handle_;
};
ValueMirror.prototype.isPrimitive=function(){
var E=this.type();
return E==='undefined'||
E==='null'||
E==='boolean'||
E==='number'||
E==='string'||
E==='symbol';
};
ValueMirror.prototype.value=function(){
return this.value_;
};
function UndefinedMirror(){
%_CallFunction(this,m.UNDEFINED_TYPE,(void 0),ValueMirror);
}
inherits(UndefinedMirror,ValueMirror);
UndefinedMirror.prototype.toText=function(){
return'undefined';
};
function NullMirror(){
%_CallFunction(this,m.NULL_TYPE,null,ValueMirror);
}
inherits(NullMirror,ValueMirror);
NullMirror.prototype.toText=function(){
return'null';
};
function BooleanMirror(r){
%_CallFunction(this,m.BOOLEAN_TYPE,r,ValueMirror);
}
inherits(BooleanMirror,ValueMirror);
BooleanMirror.prototype.toText=function(){
return this.value_?'true':'false';
};
function NumberMirror(r){
%_CallFunction(this,m.NUMBER_TYPE,r,ValueMirror);
}
inherits(NumberMirror,ValueMirror);
NumberMirror.prototype.toText=function(){
return %_NumberToString(this.value_);
};
function StringMirror(r){
%_CallFunction(this,m.STRING_TYPE,r,ValueMirror);
}
inherits(StringMirror,ValueMirror);
StringMirror.prototype.length=function(){
return this.value_.length;
};
StringMirror.prototype.getTruncatedValue=function(G){
if(G!=-1&&this.length()>G){
return this.value_.substring(0,G)+
'... (length: '+this.length()+')';
}
return this.value_;
};
StringMirror.prototype.toText=function(){
return this.getTruncatedValue(z);
};
function SymbolMirror(r){
%_CallFunction(this,m.SYMBOL_TYPE,r,ValueMirror);
}
inherits(SymbolMirror,ValueMirror);
SymbolMirror.prototype.description=function(){
return %SymbolDescription(%_ValueOf(this.value_));
}
SymbolMirror.prototype.toText=function(){
return %_CallFunction(this.value_,j);
}
function ObjectMirror(r,E,F){
E=E||m.OBJECT_TYPE;
%_CallFunction(this,E,r,F,ValueMirror);
}
inherits(ObjectMirror,ValueMirror);
ObjectMirror.prototype.className=function(){
return %_ClassOf(this.value_);
};
ObjectMirror.prototype.constructorFunction=function(){
return MakeMirror(%DebugGetProperty(this.value_,'constructor'));
};
ObjectMirror.prototype.prototypeObject=function(){
return MakeMirror(%DebugGetProperty(this.value_,'prototype'));
};
ObjectMirror.prototype.protoObject=function(){
return MakeMirror(%DebugGetPrototype(this.value_));
};
ObjectMirror.prototype.hasNamedInterceptor=function(){
var H=%GetInterceptorInfo(this.value_);
return(H&2)!=0;
};
ObjectMirror.prototype.hasIndexedInterceptor=function(){
var H=%GetInterceptorInfo(this.value_);
return(H&1)!=0;
};
function TryGetPropertyNames(I){
try{
return %GetOwnPropertyNames(I,32);
}catch(e){
return[];
}
}
ObjectMirror.prototype.propertyNames=function(J,K){
J=J||A.Named|A.Indexed;
var L;
var M;
var N=0;
if(J&A.Named){
L=TryGetPropertyNames(this.value_);
N+=L.length;
if(this.hasNamedInterceptor()&&(J&A.Named)){
var O=
%GetNamedInterceptorPropertyNames(this.value_);
if(O){
L=L.concat(O);
N+=O.length;
}
}
}
if(J&A.Indexed){
M=%GetOwnElementNames(this.value_);
N+=M.length;
if(this.hasIndexedInterceptor()&&(J&A.Indexed)){
var P=
%GetIndexedInterceptorElementNames(this.value_);
if(P){
M=M.concat(P);
N+=P.length;
}
}
}
K=g(K||N,N);
var Q=new d(K);
var R=0;
if(J&A.Named){
for(var S=0;R<K&&S<L.length;S++){
Q[R++]=L[S];
}
}
if(J&A.Indexed){
for(var S=0;R<K&&S<M.length;S++){
Q[R++]=M[S];
}
}
return Q;
};
ObjectMirror.prototype.properties=function(J,K){
var Q=this.propertyNames(J,K);
var T=new d(Q.length);
for(var S=0;S<Q.length;S++){
T[S]=this.property(Q[S]);
}
return T;
};
ObjectMirror.prototype.internalProperties=function(){
return ObjectMirror.GetInternalProperties(this.value_);
}
ObjectMirror.prototype.property=function(U){
var V=%DebugGetPropertyDetails(this.value_,(%_ToName(U)));
if(V){
return new PropertyMirror(this,U,V);
}
return GetUndefinedMirror();
};
ObjectMirror.prototype.lookupProperty=function(r){
var T=this.properties();
for(var S=0;S<T.length;S++){
var W=T[S];
if(W.propertyType()!=B.AccessorConstant){
if(%_ObjectEquals(W.value_,r.value_)){
return W;
}
}
}
return GetUndefinedMirror();
};
ObjectMirror.prototype.referencedBy=function(X){
var Y=%DebugReferencedBy(this.value_,
Mirror.prototype,X||0);
for(var S=0;S<Y.length;S++){
Y[S]=MakeMirror(Y[S]);
}
return Y;
};
ObjectMirror.prototype.toText=function(){
var U;
var w=this.constructorFunction();
if(!w.isFunction()){
U=this.className();
}else{
U=w.name();
if(!U){
U=this.className();
}
}
return'#<'+U+'>';
};
ObjectMirror.GetInternalProperties=function(r){
var T=%DebugGetInternalProperties(r);
var Y=[];
for(var S=0;S<T.length;S+=2){
Y.push(new InternalPropertyMirror(T[S],T[S+1]));
}
return Y;
}
function FunctionMirror(r){
%_CallFunction(this,r,m.FUNCTION_TYPE,ObjectMirror);
this.resolved_=true;
}
inherits(FunctionMirror,ObjectMirror);
FunctionMirror.prototype.resolved=function(){
return this.resolved_;
};
FunctionMirror.prototype.name=function(){
return %FunctionGetName(this.value_);
};
FunctionMirror.prototype.inferredName=function(){
return %FunctionGetInferredName(this.value_);
};
FunctionMirror.prototype.source=function(){
if(this.resolved()){
return c(this.value_);
}
};
FunctionMirror.prototype.script=function(){
if(this.resolved()){
if(this.script_){
return this.script_;
}
var Z=%FunctionGetScript(this.value_);
if(Z){
return this.script_=MakeMirror(Z);
}
}
};
FunctionMirror.prototype.sourcePosition_=function(){
if(this.resolved()){
return %FunctionGetScriptSourcePosition(this.value_);
}
};
FunctionMirror.prototype.sourceLocation=function(){
if(this.resolved()){
var Z=this.script();
if(Z){
return Z.locationFromPosition(this.sourcePosition_(),true);
}
}
};
FunctionMirror.prototype.constructedBy=function(aa){
if(this.resolved()){
var Y=%DebugConstructedBy(this.value_,aa||0);
for(var S=0;S<Y.length;S++){
Y[S]=MakeMirror(Y[S]);
}
return Y;
}else{
return[];
}
};
FunctionMirror.prototype.scopeCount=function(){
if(this.resolved()){
if((this.scopeCount_===(void 0))){
this.scopeCount_=%GetFunctionScopeCount(this.value());
}
return this.scopeCount_;
}else{
return 0;
}
};
FunctionMirror.prototype.scope=function(R){
if(this.resolved()){
return new ScopeMirror((void 0),this,R);
}
};
FunctionMirror.prototype.toText=function(){
return this.source();
};
function UnresolvedFunctionMirror(r){
%_CallFunction(this,m.FUNCTION_TYPE,r,ValueMirror);
this.propertyCount_=0;
this.elementCount_=0;
this.resolved_=false;
}
inherits(UnresolvedFunctionMirror,FunctionMirror);
UnresolvedFunctionMirror.prototype.className=function(){
return'Function';
};
UnresolvedFunctionMirror.prototype.constructorFunction=function(){
return GetUndefinedMirror();
};
UnresolvedFunctionMirror.prototype.prototypeObject=function(){
return GetUndefinedMirror();
};
UnresolvedFunctionMirror.prototype.protoObject=function(){
return GetUndefinedMirror();
};
UnresolvedFunctionMirror.prototype.name=function(){
return this.value_;
};
UnresolvedFunctionMirror.prototype.inferredName=function(){
return(void 0);
};
UnresolvedFunctionMirror.prototype.propertyNames=function(J,K){
return[];
};
function ArrayMirror(r){
%_CallFunction(this,r,ObjectMirror);
}
inherits(ArrayMirror,ObjectMirror);
ArrayMirror.prototype.length=function(){
return this.value_.length;
};
ArrayMirror.prototype.indexedPropertiesFromRange=function(opt_from_index,
opt_to_index){
var ab=opt_from_index||0;
var ac=opt_to_index||this.length()-1;
if(ab>ac)return new d();
var ad=new d(ac-ab+1);
for(var S=ab;S<=ac;S++){
var V=%DebugGetPropertyDetails(this.value_,(%_ToString(S)));
var r;
if(V){
r=new PropertyMirror(this,S,V);
}else{
r=GetUndefinedMirror();
}
ad[S-ab]=r;
}
return ad;
};
function DateMirror(r){
%_CallFunction(this,r,ObjectMirror);
}
inherits(DateMirror,ObjectMirror);
DateMirror.prototype.toText=function(){
var ae=f(this.value_);
return ae.substring(1,ae.length-1);
};
function RegExpMirror(r){
%_CallFunction(this,r,m.REGEXP_TYPE,ObjectMirror);
}
inherits(RegExpMirror,ObjectMirror);
RegExpMirror.prototype.source=function(){
return this.value_.source;
};
RegExpMirror.prototype.global=function(){
return this.value_.global;
};
RegExpMirror.prototype.ignoreCase=function(){
return this.value_.ignoreCase;
};
RegExpMirror.prototype.multiline=function(){
return this.value_.multiline;
};
RegExpMirror.prototype.sticky=function(){
return this.value_.sticky;
};
RegExpMirror.prototype.unicode=function(){
return this.value_.unicode;
};
RegExpMirror.prototype.toText=function(){
return"/"+this.source()+"/";
};
function ErrorMirror(r){
%_CallFunction(this,r,m.ERROR_TYPE,ObjectMirror);
}
inherits(ErrorMirror,ObjectMirror);
ErrorMirror.prototype.message=function(){
return this.value_.message;
};
ErrorMirror.prototype.toText=function(){
var af;
try{
af=%_CallFunction(this.value_,builtins.$errorToString);
}catch(e){
af='#<Error>';
}
return af;
};
function PromiseMirror(r){
%_CallFunction(this,r,m.PROMISE_TYPE,ObjectMirror);
}
inherits(PromiseMirror,ObjectMirror);
function PromiseGetStatus_(r){
var ag=%DebugGetProperty(r,h);
if(ag==0)return"pending";
if(ag==1)return"resolved";
return"rejected";
}
function PromiseGetValue_(r){
return %DebugGetProperty(r,i);
}
PromiseMirror.prototype.status=function(){
return PromiseGetStatus_(this.value_);
};
PromiseMirror.prototype.promiseValue=function(){
return MakeMirror(PromiseGetValue_(this.value_));
};
function MapMirror(r){
%_CallFunction(this,r,m.MAP_TYPE,ObjectMirror);
}
inherits(MapMirror,ObjectMirror);
MapMirror.prototype.entries=function(ah){
var Y=[];
if((%_ClassOf(this.value_)==='WeakMap')){
var ai=%GetWeakMapEntries(this.value_,ah||0);
for(var S=0;S<ai.length;S+=2){
Y.push({
key:ai[S],
value:ai[S+1]
});
}
return Y;
}
var aj=%_CallFunction(this.value_,builtins.$mapEntries);
var ak;
while((!ah||Y.length<ah)&&
!(ak=aj.next()).done){
Y.push({
key:ak.value[0],
value:ak.value[1]
});
}
return Y;
};
function SetMirror(r){
%_CallFunction(this,r,m.SET_TYPE,ObjectMirror);
}
inherits(SetMirror,ObjectMirror);
function IteratorGetValues_(aj,al,ah){
var Y=[];
var ak;
while((!ah||Y.length<ah)&&
!(ak=%_CallFunction(aj,al)).done){
Y.push(ak.value);
}
return Y;
}
SetMirror.prototype.values=function(ah){
if((%_ClassOf(this.value_)==='WeakSet')){
return %GetWeakSetValues(this.value_,ah||0);
}
var aj=%_CallFunction(this.value_,builtins.$setValues);
return IteratorGetValues_(aj,builtins.$setIteratorNext,ah);
};
function IteratorMirror(r){
%_CallFunction(this,r,m.ITERATOR_TYPE,ObjectMirror);
}
inherits(IteratorMirror,ObjectMirror);
IteratorMirror.prototype.preview=function(ah){
if((%_ClassOf(this.value_)==='Map Iterator')){
return IteratorGetValues_(%MapIteratorClone(this.value_),
builtins.$mapIteratorNext,
ah);
}else if((%_ClassOf(this.value_)==='Set Iterator')){
return IteratorGetValues_(%SetIteratorClone(this.value_),
builtins.$setIteratorNext,
ah);
}
};
function GeneratorMirror(r){
%_CallFunction(this,r,m.GENERATOR_TYPE,ObjectMirror);
}
inherits(GeneratorMirror,ObjectMirror);
function GeneratorGetStatus_(r){
var am=%GeneratorGetContinuation(r);
if(am<0)return"running";
if(am==0)return"closed";
return"suspended";
}
GeneratorMirror.prototype.status=function(){
return GeneratorGetStatus_(this.value_);
};
GeneratorMirror.prototype.sourcePosition_=function(){
return %GeneratorGetSourcePosition(this.value_);
};
GeneratorMirror.prototype.sourceLocation=function(){
var an=this.sourcePosition_();
if(!(an===(void 0))){
var Z=this.func().script();
if(Z){
return Z.locationFromPosition(an,true);
}
}
};
GeneratorMirror.prototype.func=function(){
if(!this.func_){
this.func_=MakeMirror(%GeneratorGetFunction(this.value_));
}
return this.func_;
};
GeneratorMirror.prototype.context=function(){
if(!this.context_){
this.context_=new ContextMirror(%GeneratorGetContext(this.value_));
}
return this.context_;
};
GeneratorMirror.prototype.receiver=function(){
if(!this.receiver_){
this.receiver_=MakeMirror(%GeneratorGetReceiver(this.value_));
}
return this.receiver_;
};
function PropertyMirror(t,U,V){
%_CallFunction(this,m.PROPERTY_TYPE,Mirror);
this.mirror_=t;
this.name_=U;
this.value_=V[0];
this.details_=V[1];
this.is_interceptor_=V[2];
if(V.length>3){
this.exception_=V[3];
this.getter_=V[4];
this.setter_=V[5];
}
}
inherits(PropertyMirror,Mirror);
PropertyMirror.prototype.isReadOnly=function(){
return(this.attributes()&C.ReadOnly)!=0;
};
PropertyMirror.prototype.isEnum=function(){
return(this.attributes()&C.DontEnum)==0;
};
PropertyMirror.prototype.canDelete=function(){
return(this.attributes()&C.DontDelete)==0;
};
PropertyMirror.prototype.name=function(){
return this.name_;
};
PropertyMirror.prototype.isIndexed=function(){
for(var S=0;S<this.name_.length;S++){
if(this.name_[S]<'0'||'9'<this.name_[S]){
return false;
}
}
return true;
};
PropertyMirror.prototype.value=function(){
return MakeMirror(this.value_,false);
};
PropertyMirror.prototype.isException=function(){
return this.exception_?true:false;
};
PropertyMirror.prototype.attributes=function(){
return %DebugPropertyAttributesFromDetails(this.details_);
};
PropertyMirror.prototype.propertyType=function(){
return %DebugPropertyTypeFromDetails(this.details_);
};
PropertyMirror.prototype.insertionIndex=function(){
return %DebugPropertyIndexFromDetails(this.details_);
};
PropertyMirror.prototype.hasGetter=function(){
return this.getter_?true:false;
};
PropertyMirror.prototype.hasSetter=function(){
return this.setter_?true:false;
};
PropertyMirror.prototype.getter=function(){
if(this.hasGetter()){
return MakeMirror(this.getter_);
}else{
return GetUndefinedMirror();
}
};
PropertyMirror.prototype.setter=function(){
if(this.hasSetter()){
return MakeMirror(this.setter_);
}else{
return GetUndefinedMirror();
}
};
PropertyMirror.prototype.isNative=function(){
return this.is_interceptor_||
((this.propertyType()==B.AccessorConstant)&&
!this.hasGetter()&&!this.hasSetter());
};
function InternalPropertyMirror(U,r){
%_CallFunction(this,m.INTERNAL_PROPERTY_TYPE,Mirror);
this.name_=U;
this.value_=r;
}
inherits(InternalPropertyMirror,Mirror);
InternalPropertyMirror.prototype.name=function(){
return this.name_;
};
InternalPropertyMirror.prototype.value=function(){
return MakeMirror(this.value_,false);
};
var ao=0;
var ap=1;
var aq=2;
var ar=3;
var as=4;
var at=5;
var au=6;
var av=7;
var aw=8;
var ax=9;
var ay=0;
var az=1;
var aA=2;
var aB=1<<0;
var aC=1<<1;
var aD=7<<2;
function FrameDetails(aE,R){
this.break_id_=aE;
this.details_=%GetFrameDetails(aE,R);
}
FrameDetails.prototype.frameId=function(){
%CheckExecutionState(this.break_id_);
return this.details_[ao];
};
FrameDetails.prototype.receiver=function(){
%CheckExecutionState(this.break_id_);
return this.details_[ap];
};
FrameDetails.prototype.func=function(){
%CheckExecutionState(this.break_id_);
return this.details_[aq];
};
FrameDetails.prototype.isConstructCall=function(){
%CheckExecutionState(this.break_id_);
return this.details_[au];
};
FrameDetails.prototype.isAtReturn=function(){
%CheckExecutionState(this.break_id_);
return this.details_[av];
};
FrameDetails.prototype.isDebuggerFrame=function(){
%CheckExecutionState(this.break_id_);
var aF=aB;
return(this.details_[aw]&aF)==aF;
};
FrameDetails.prototype.isOptimizedFrame=function(){
%CheckExecutionState(this.break_id_);
var aF=aC;
return(this.details_[aw]&aF)==aF;
};
FrameDetails.prototype.isInlinedFrame=function(){
return this.inlinedFrameIndex()>0;
};
FrameDetails.prototype.inlinedFrameIndex=function(){
%CheckExecutionState(this.break_id_);
var aF=aD;
return(this.details_[aw]&aF)>>2;
};
FrameDetails.prototype.argumentCount=function(){
%CheckExecutionState(this.break_id_);
return this.details_[ar];
};
FrameDetails.prototype.argumentName=function(R){
%CheckExecutionState(this.break_id_);
if(R>=0&&R<this.argumentCount()){
return this.details_[ax+
R*aA+
ay];
}
};
FrameDetails.prototype.argumentValue=function(R){
%CheckExecutionState(this.break_id_);
if(R>=0&&R<this.argumentCount()){
return this.details_[ax+
R*aA+
az];
}
};
FrameDetails.prototype.localCount=function(){
%CheckExecutionState(this.break_id_);
return this.details_[as];
};
FrameDetails.prototype.sourcePosition=function(){
%CheckExecutionState(this.break_id_);
return this.details_[at];
};
FrameDetails.prototype.localName=function(R){
%CheckExecutionState(this.break_id_);
if(R>=0&&R<this.localCount()){
var aG=ax+
this.argumentCount()*aA;
return this.details_[aG+
R*aA+
ay];
}
};
FrameDetails.prototype.localValue=function(R){
%CheckExecutionState(this.break_id_);
if(R>=0&&R<this.localCount()){
var aG=ax+
this.argumentCount()*aA;
return this.details_[aG+
R*aA+
az];
}
};
FrameDetails.prototype.returnValue=function(){
%CheckExecutionState(this.break_id_);
var aH=
ax+
(this.argumentCount()+this.localCount())*aA;
if(this.details_[av]){
return this.details_[aH];
}
};
FrameDetails.prototype.scopeCount=function(){
if((this.scopeCount_===(void 0))){
this.scopeCount_=%GetScopeCount(this.break_id_,this.frameId());
}
return this.scopeCount_;
};
FrameDetails.prototype.stepInPositionsImpl=function(){
return %GetStepInPositions(this.break_id_,this.frameId());
};
function FrameMirror(aE,R){
%_CallFunction(this,m.FRAME_TYPE,Mirror);
this.break_id_=aE;
this.index_=R;
this.details_=new FrameDetails(aE,R);
}
inherits(FrameMirror,Mirror);
FrameMirror.prototype.details=function(){
return this.details_;
};
FrameMirror.prototype.index=function(){
return this.index_;
};
FrameMirror.prototype.func=function(){
if(this.func_){
return this.func_;
}
var aF=this.details_.func();
if((%_IsFunction(aF))){
return this.func_=MakeMirror(aF);
}else{
return new UnresolvedFunctionMirror(aF);
}
};
FrameMirror.prototype.receiver=function(){
return MakeMirror(this.details_.receiver());
};
FrameMirror.prototype.isConstructCall=function(){
return this.details_.isConstructCall();
};
FrameMirror.prototype.isAtReturn=function(){
return this.details_.isAtReturn();
};
FrameMirror.prototype.isDebuggerFrame=function(){
return this.details_.isDebuggerFrame();
};
FrameMirror.prototype.isOptimizedFrame=function(){
return this.details_.isOptimizedFrame();
};
FrameMirror.prototype.isInlinedFrame=function(){
return this.details_.isInlinedFrame();
};
FrameMirror.prototype.inlinedFrameIndex=function(){
return this.details_.inlinedFrameIndex();
};
FrameMirror.prototype.argumentCount=function(){
return this.details_.argumentCount();
};
FrameMirror.prototype.argumentName=function(R){
return this.details_.argumentName(R);
};
FrameMirror.prototype.argumentValue=function(R){
return MakeMirror(this.details_.argumentValue(R));
};
FrameMirror.prototype.localCount=function(){
return this.details_.localCount();
};
FrameMirror.prototype.localName=function(R){
return this.details_.localName(R);
};
FrameMirror.prototype.localValue=function(R){
return MakeMirror(this.details_.localValue(R));
};
FrameMirror.prototype.returnValue=function(){
return MakeMirror(this.details_.returnValue());
};
FrameMirror.prototype.sourcePosition=function(){
return this.details_.sourcePosition();
};
FrameMirror.prototype.sourceLocation=function(){
var aI=this.func();
if(aI.resolved()){
var Z=aI.script();
if(Z){
return Z.locationFromPosition(this.sourcePosition(),true);
}
}
};
FrameMirror.prototype.sourceLine=function(){
var aJ=this.sourceLocation();
if(aJ){
return aJ.line;
}
};
FrameMirror.prototype.sourceColumn=function(){
var aJ=this.sourceLocation();
if(aJ){
return aJ.column;
}
};
FrameMirror.prototype.sourceLineText=function(){
var aJ=this.sourceLocation();
if(aJ){
return aJ.sourceText();
}
};
FrameMirror.prototype.scopeCount=function(){
return this.details_.scopeCount();
};
FrameMirror.prototype.scope=function(R){
return new ScopeMirror(this,(void 0),R);
};
FrameMirror.prototype.allScopes=function(aK){
var aL=%GetAllScopesDetails(this.break_id_,
this.details_.frameId(),
this.details_.inlinedFrameIndex(),
!!aK);
var Y=[];
for(var S=0;S<aL.length;++S){
Y.push(new ScopeMirror(this,(void 0),S,aL[S]));
}
return Y;
};
FrameMirror.prototype.stepInPositions=function(){
var Z=this.func().script();
var aM=this.func().sourcePosition_();
var aN=this.details_.stepInPositionsImpl();
var Y=[];
if(aN){
for(var S=0;S<aN.length;S++){
var aO={};
var aP=Z.locationFromPosition(aM+aN[S],
true);
serializeLocationFields(aP,aO);
var aQ={
position:aO
};
Y.push(aQ);
}
}
return Y;
};
FrameMirror.prototype.evaluate=function(source,disable_break,
opt_context_object){
return MakeMirror(%DebugEvaluate(this.break_id_,
this.details_.frameId(),
this.details_.inlinedFrameIndex(),
source,
k(disable_break),
opt_context_object));
};
FrameMirror.prototype.invocationText=function(){
var Y='';
var aI=this.func();
var aR=this.receiver();
if(this.isConstructCall()){
Y+='new ';
Y+=aI.name()?aI.name():'[anonymous]';
}else if(this.isDebuggerFrame()){
Y+='[debugger]';
}else{
var aS=
!aR.className||(aR.className()!='global');
if(aS){
Y+=aR.toText();
}
var W=GetUndefinedMirror();
if(aR.isObject()){
for(var aT=aR;
!aT.isNull()&&W.isUndefined();
aT=aT.protoObject()){
W=aT.lookupProperty(aI);
}
}
if(!W.isUndefined()){
if(!W.isIndexed()){
if(aS){
Y+='.';
}
Y+=W.name();
}else{
Y+='[';
Y+=W.name();
Y+=']';
}
if(aI.name()&&aI.name()!=W.name()){
Y+='(aka '+aI.name()+')';
}
}else{
if(aS){
Y+='.';
}
Y+=aI.name()?aI.name():'[anonymous]';
}
}
if(!this.isDebuggerFrame()){
Y+='(';
for(var S=0;S<this.argumentCount();S++){
if(S!=0)Y+=', ';
if(this.argumentName(S)){
Y+=this.argumentName(S);
Y+='=';
}
Y+=this.argumentValue(S).toText();
}
Y+=')';
}
if(this.isAtReturn()){
Y+=' returning ';
Y+=this.returnValue().toText();
}
return Y;
};
FrameMirror.prototype.sourceAndPositionText=function(){
var Y='';
var aI=this.func();
if(aI.resolved()){
var Z=aI.script();
if(Z){
if(Z.name()){
Y+=Z.name();
}else{
Y+='[unnamed]';
}
if(!this.isDebuggerFrame()){
var aJ=this.sourceLocation();
Y+=' line ';
Y+=!(aJ===(void 0))?(aJ.line+1):'?';
Y+=' column ';
Y+=!(aJ===(void 0))?(aJ.column+1):'?';
if(!(this.sourcePosition()===(void 0))){
Y+=' (position '+(this.sourcePosition()+1)+')';
}
}
}else{
Y+='[no source]';
}
}else{
Y+='[unresolved]';
}
return Y;
};
FrameMirror.prototype.localsText=function(){
var Y='';
var aU=this.localCount();
if(aU>0){
for(var S=0;S<aU;++S){
Y+='      var ';
Y+=this.localName(S);
Y+=' = ';
Y+=this.localValue(S).toText();
if(S<aU-1)Y+='\n';
}
}
return Y;
};
FrameMirror.prototype.restart=function(){
var Y=%LiveEditRestartFrame(this.break_id_,this.index_);
if((Y===(void 0))){
Y="Failed to find requested frame";
}
return Y;
};
FrameMirror.prototype.toText=function(aV){
var Y='';
Y+='#'+(this.index()<=9?'0':'')+this.index();
Y+=' ';
Y+=this.invocationText();
Y+=' ';
Y+=this.sourceAndPositionText();
if(aV){
Y+='\n';
Y+=this.localsText();
}
return Y;
};
var aW=0;
var aX=1;
var aY=2;
function ScopeDetails(aZ,ba,R,bb){
if(aZ){
this.break_id_=aZ.break_id_;
this.details_=bb||
%GetScopeDetails(aZ.break_id_,
aZ.details_.frameId(),
aZ.details_.inlinedFrameIndex(),
R);
this.frame_id_=aZ.details_.frameId();
this.inlined_frame_id_=aZ.details_.inlinedFrameIndex();
}else{
this.details_=bb||%GetFunctionScopeDetails(ba.value(),R);
this.fun_value_=ba.value();
this.break_id_=(void 0);
}
this.index_=R;
}
ScopeDetails.prototype.type=function(){
if(!(this.break_id_===(void 0))){
%CheckExecutionState(this.break_id_);
}
return this.details_[aW];
};
ScopeDetails.prototype.object=function(){
if(!(this.break_id_===(void 0))){
%CheckExecutionState(this.break_id_);
}
return this.details_[aX];
};
ScopeDetails.prototype.name=function(){
if(!(this.break_id_===(void 0))){
%CheckExecutionState(this.break_id_);
}
return this.details_[aY];
};
ScopeDetails.prototype.setVariableValueImpl=function(U,bc){
var bd;
if(!(this.break_id_===(void 0))){
%CheckExecutionState(this.break_id_);
bd=%SetScopeVariableValue(this.break_id_,this.frame_id_,
this.inlined_frame_id_,this.index_,U,bc);
}else{
bd=%SetScopeVariableValue(this.fun_value_,null,null,this.index_,
U,bc);
}
if(!bd)throw MakeError(2,"Failed to set variable value");
};
function ScopeMirror(aZ,ba,R,bb){
%_CallFunction(this,m.SCOPE_TYPE,Mirror);
if(aZ){
this.frame_index_=aZ.index_;
}else{
this.frame_index_=(void 0);
}
this.scope_index_=R;
this.details_=new ScopeDetails(aZ,ba,R,bb);
}
inherits(ScopeMirror,Mirror);
ScopeMirror.prototype.details=function(){
return this.details_;
};
ScopeMirror.prototype.frameIndex=function(){
return this.frame_index_;
};
ScopeMirror.prototype.scopeIndex=function(){
return this.scope_index_;
};
ScopeMirror.prototype.scopeType=function(){
return this.details_.type();
};
ScopeMirror.prototype.scopeObject=function(){
var F=this.scopeType()==D.Local||
this.scopeType()==D.Closure||
this.scopeType()==D.Script;
return MakeMirror(this.details_.object(),F);
};
ScopeMirror.prototype.setVariableValue=function(U,bc){
this.details_.setVariableValueImpl(U,bc);
};
function ScriptMirror(Z){
%_CallFunction(this,m.SCRIPT_TYPE,Mirror);
this.script_=Z;
this.context_=new ContextMirror(Z.context_data);
this.allocateHandle_();
}
inherits(ScriptMirror,Mirror);
ScriptMirror.prototype.value=function(){
return this.script_;
};
ScriptMirror.prototype.name=function(){
return this.script_.name||this.script_.nameOrSourceURL();
};
ScriptMirror.prototype.id=function(){
return this.script_.id;
};
ScriptMirror.prototype.source=function(){
return this.script_.source;
};
ScriptMirror.prototype.setSource=function(be){
%DebugSetScriptSource(this.script_,be);
};
ScriptMirror.prototype.lineOffset=function(){
return this.script_.line_offset;
};
ScriptMirror.prototype.columnOffset=function(){
return this.script_.column_offset;
};
ScriptMirror.prototype.data=function(){
return this.script_.data;
};
ScriptMirror.prototype.scriptType=function(){
return this.script_.type;
};
ScriptMirror.prototype.compilationType=function(){
return this.script_.compilation_type;
};
ScriptMirror.prototype.lineCount=function(){
return this.script_.lineCount();
};
ScriptMirror.prototype.locationFromPosition=function(
position,include_resource_offset){
return this.script_.locationFromPosition(position,include_resource_offset);
};
ScriptMirror.prototype.sourceSlice=function(bf,bg){
return this.script_.sourceSlice(bf,bg);
};
ScriptMirror.prototype.context=function(){
return this.context_;
};
ScriptMirror.prototype.evalFromScript=function(){
return MakeMirror(this.script_.eval_from_script);
};
ScriptMirror.prototype.evalFromFunctionName=function(){
return MakeMirror(this.script_.eval_from_function_name);
};
ScriptMirror.prototype.evalFromLocation=function(){
var bh=this.evalFromScript();
if(!bh.isUndefined()){
var bi=this.script_.eval_from_script_position;
return bh.locationFromPosition(bi,true);
}
};
ScriptMirror.prototype.toText=function(){
var Y='';
Y+=this.name();
Y+=' (lines: ';
if(this.lineOffset()>0){
Y+=this.lineOffset();
Y+='-';
Y+=this.lineOffset()+this.lineCount()-1;
}else{
Y+=this.lineCount();
}
Y+=')';
return Y;
};
function ContextMirror(bj){
%_CallFunction(this,m.CONTEXT_TYPE,Mirror);
this.data_=bj;
this.allocateHandle_();
}
inherits(ContextMirror,Mirror);
ContextMirror.prototype.data=function(){
return this.data_;
};
function MakeMirrorSerializer(V,bk){
return new JSONProtocolSerializer(V,bk);
}
function JSONProtocolSerializer(V,bk){
this.details_=V;
this.options_=bk;
this.mirrors_=[];
}
JSONProtocolSerializer.prototype.serializeReference=function(t){
return this.serialize_(t,true,true);
};
JSONProtocolSerializer.prototype.serializeValue=function(t){
var bl=this.serialize_(t,false,true);
return bl;
};
JSONProtocolSerializer.prototype.serializeReferencedObjects=function(){
var bm=[];
var bn=this.mirrors_.length;
for(var S=0;S<bn;S++){
bm.push(this.serialize_(this.mirrors_[S],false,false));
}
return bm;
};
JSONProtocolSerializer.prototype.includeSource_=function(){
return this.options_&&this.options_.includeSource;
};
JSONProtocolSerializer.prototype.inlineRefs_=function(){
return this.options_&&this.options_.inlineRefs;
};
JSONProtocolSerializer.prototype.maxStringLength_=function(){
if((this.options_===(void 0))||
(this.options_.maxStringLength===(void 0))){
return z;
}
return this.options_.maxStringLength;
};
JSONProtocolSerializer.prototype.add_=function(t){
for(var S=0;S<this.mirrors_.length;S++){
if(this.mirrors_[S]===t){
return;
}
}
this.mirrors_.push(t);
};
JSONProtocolSerializer.prototype.serializeReferenceWithDisplayData_=
function(t){
var bo={};
bo.ref=t.handle();
bo.type=t.type();
switch(t.type()){
case m.UNDEFINED_TYPE:
case m.NULL_TYPE:
case m.BOOLEAN_TYPE:
case m.NUMBER_TYPE:
bo.value=t.value();
break;
case m.STRING_TYPE:
bo.value=t.getTruncatedValue(this.maxStringLength_());
break;
case m.SYMBOL_TYPE:
bo.description=t.description();
break;
case m.FUNCTION_TYPE:
bo.name=t.name();
bo.inferredName=t.inferredName();
if(t.script()){
bo.scriptId=t.script().id();
}
break;
case m.ERROR_TYPE:
case m.REGEXP_TYPE:
bo.value=t.toText();
break;
case m.OBJECT_TYPE:
bo.className=t.className();
break;
}
return bo;
};
JSONProtocolSerializer.prototype.serialize_=function(t,reference,
V){
if(reference&&
(t.isValue()||t.isScript()||t.isContext())){
if(this.inlineRefs_()&&t.isValue()){
return this.serializeReferenceWithDisplayData_(t);
}else{
this.add_(t);
return{'ref':t.handle()};
}
}
var bm={};
if(t.isValue()||t.isScript()||t.isContext()){
bm.handle=t.handle();
}
bm.type=t.type();
switch(t.type()){
case m.UNDEFINED_TYPE:
case m.NULL_TYPE:
break;
case m.BOOLEAN_TYPE:
bm.value=t.value();
break;
case m.NUMBER_TYPE:
bm.value=NumberToJSON_(t.value());
break;
case m.STRING_TYPE:
if(this.maxStringLength_()!=-1&&
t.length()>this.maxStringLength_()){
var bp=t.getTruncatedValue(this.maxStringLength_());
bm.value=bp;
bm.fromIndex=0;
bm.toIndex=this.maxStringLength_();
}else{
bm.value=t.value();
}
bm.length=t.length();
break;
case m.SYMBOL_TYPE:
bm.description=t.description();
break;
case m.OBJECT_TYPE:
case m.FUNCTION_TYPE:
case m.ERROR_TYPE:
case m.REGEXP_TYPE:
case m.PROMISE_TYPE:
case m.GENERATOR_TYPE:
this.serializeObject_(t,bm,V);
break;
case m.PROPERTY_TYPE:
case m.INTERNAL_PROPERTY_TYPE:
throw MakeError(2,
'PropertyMirror cannot be serialized independently');
break;
case m.FRAME_TYPE:
this.serializeFrame_(t,bm);
break;
case m.SCOPE_TYPE:
this.serializeScope_(t,bm);
break;
case m.SCRIPT_TYPE:
if(t.name()){
bm.name=t.name();
}
bm.id=t.id();
bm.lineOffset=t.lineOffset();
bm.columnOffset=t.columnOffset();
bm.lineCount=t.lineCount();
if(t.data()){
bm.data=t.data();
}
if(this.includeSource_()){
bm.source=t.source();
}else{
var bq=t.source().substring(0,80);
bm.sourceStart=bq;
}
bm.sourceLength=t.source().length;
bm.scriptType=t.scriptType();
bm.compilationType=t.compilationType();
if(t.compilationType()==1&&
t.evalFromScript()){
bm.evalFromScript=
this.serializeReference(t.evalFromScript());
var br=t.evalFromLocation();
if(br){
bm.evalFromLocation={line:br.line,
column:br.column};
}
if(t.evalFromFunctionName()){
bm.evalFromFunctionName=t.evalFromFunctionName();
}
}
if(t.context()){
bm.context=this.serializeReference(t.context());
}
break;
case m.CONTEXT_TYPE:
bm.data=t.data();
break;
}
bm.text=t.toText();
return bm;
};
JSONProtocolSerializer.prototype.serializeObject_=function(t,bm,
V){
bm.className=t.className();
bm.constructorFunction=
this.serializeReference(t.constructorFunction());
bm.protoObject=this.serializeReference(t.protoObject());
bm.prototypeObject=this.serializeReference(t.prototypeObject());
if(t.hasNamedInterceptor()){
bm.namedInterceptor=true;
}
if(t.hasIndexedInterceptor()){
bm.indexedInterceptor=true;
}
if(t.isFunction()){
bm.name=t.name();
if(!(t.inferredName()===(void 0))){
bm.inferredName=t.inferredName();
}
bm.resolved=t.resolved();
if(t.resolved()){
bm.source=t.source();
}
if(t.script()){
bm.script=this.serializeReference(t.script());
bm.scriptId=t.script().id();
serializeLocationFields(t.sourceLocation(),bm);
}
bm.scopes=[];
for(var S=0;S<t.scopeCount();S++){
var bs=t.scope(S);
bm.scopes.push({
type:bs.scopeType(),
index:S
});
}
}
if(t.isGenerator()){
bm.status=t.status();
bm.func=this.serializeReference(t.func())
bm.receiver=this.serializeReference(t.receiver())
serializeLocationFields(t.sourceLocation(),bm);
}
if(t.isDate()){
bm.value=t.value();
}
if(t.isPromise()){
bm.status=t.status();
bm.promiseValue=this.serializeReference(t.promiseValue());
}
var L=t.propertyNames(A.Named);
var bt=t.propertyNames(A.Indexed);
var bu=new d(L.length+bt.length);
for(var S=0;S<L.length;S++){
var bv=t.property(L[S]);
bu[S]=this.serializeProperty_(bv);
if(V){
this.add_(bv.value());
}
}
for(var S=0;S<bt.length;S++){
var bv=t.property(bt[S]);
bu[L.length+S]=this.serializeProperty_(bv);
if(V){
this.add_(bv.value());
}
}
bm.properties=bu;
var bw=t.internalProperties();
if(bw.length>0){
var bx=[];
for(var S=0;S<bw.length;S++){
bx.push(this.serializeInternalProperty_(bw[S]));
}
bm.internalProperties=bx;
}
};
function serializeLocationFields(aJ,bm){
if(!aJ){
return;
}
bm.position=aJ.position;
var by=aJ.line;
if(!(by===(void 0))){
bm.line=by;
}
var bz=aJ.column;
if(!(bz===(void 0))){
bm.column=bz;
}
}
JSONProtocolSerializer.prototype.serializeProperty_=function(bv){
var Y={};
Y.name=bv.name();
var bA=bv.value();
if(this.inlineRefs_()&&bA.isValue()){
Y.value=this.serializeReferenceWithDisplayData_(bA);
}else{
if(bv.attributes()!=C.None){
Y.attributes=bv.attributes();
}
Y.propertyType=bv.propertyType();
Y.ref=bA.handle();
}
return Y;
};
JSONProtocolSerializer.prototype.serializeInternalProperty_=
function(bv){
var Y={};
Y.name=bv.name();
var bA=bv.value();
if(this.inlineRefs_()&&bA.isValue()){
Y.value=this.serializeReferenceWithDisplayData_(bA);
}else{
Y.ref=bA.handle();
}
return Y;
};
JSONProtocolSerializer.prototype.serializeFrame_=function(t,bm){
bm.index=t.index();
bm.receiver=this.serializeReference(t.receiver());
var aI=t.func();
bm.func=this.serializeReference(aI);
var Z=aI.script();
if(Z){
bm.script=this.serializeReference(Z);
}
bm.constructCall=t.isConstructCall();
bm.atReturn=t.isAtReturn();
if(t.isAtReturn()){
bm.returnValue=this.serializeReference(t.returnValue());
}
bm.debuggerFrame=t.isDebuggerFrame();
var H=new d(t.argumentCount());
for(var S=0;S<t.argumentCount();S++){
var bB={};
var bC=t.argumentName(S);
if(bC){
bB.name=bC;
}
bB.value=this.serializeReference(t.argumentValue(S));
H[S]=bB;
}
bm.arguments=H;
var H=new d(t.localCount());
for(var S=0;S<t.localCount();S++){
var bD={};
bD.name=t.localName(S);
bD.value=this.serializeReference(t.localValue(S));
H[S]=bD;
}
bm.locals=H;
serializeLocationFields(t.sourceLocation(),bm);
var bE=t.sourceLineText();
if(!(bE===(void 0))){
bm.sourceLineText=bE;
}
bm.scopes=[];
for(var S=0;S<t.scopeCount();S++){
var bs=t.scope(S);
bm.scopes.push({
type:bs.scopeType(),
index:S
});
}
};
JSONProtocolSerializer.prototype.serializeScope_=function(t,bm){
bm.index=t.scopeIndex();
bm.frameIndex=t.frameIndex();
bm.type=t.scopeType();
bm.object=this.inlineRefs_()?
this.serializeValue(t.scopeObject()):
this.serializeReference(t.scopeObject());
};
function NumberToJSON_(r){
if(e(r)){
return'NaN';
}
if(!(%_IsSmi(%IS_VAR(r))||((r==r)&&(r!=1/0)&&(r!=-1/0)))){
if(r>0){
return'Infinity';
}else{
return'-Infinity';
}
}
return r;
}
b.InstallFunctions(a,2,[
"MakeMirror",MakeMirror,
"MakeMirrorSerializer",MakeMirrorSerializer,
"LookupMirror",LookupMirror,
"ToggleMirrorCache",ToggleMirrorCache,
"MirrorCacheIsEmpty",MirrorCacheIsEmpty,
]);
b.InstallConstants(a,[
"ScopeType",D,
"PropertyKind",A,
"PropertyType",B,
"PropertyAttribute",C,
"Mirror",Mirror,
"ValueMirror",ValueMirror,
"UndefinedMirror",UndefinedMirror,
"NullMirror",NullMirror,
"BooleanMirror",BooleanMirror,
"NumberMirror",NumberMirror,
"StringMirror",StringMirror,
"SymbolMirror",SymbolMirror,
"ObjectMirror",ObjectMirror,
"FunctionMirror",FunctionMirror,
"UnresolvedFunctionMirror",UnresolvedFunctionMirror,
"ArrayMirror",ArrayMirror,
"DateMirror",DateMirror,
"RegExpMirror",RegExpMirror,
"ErrorMirror",ErrorMirror,
"PromiseMirror",PromiseMirror,
"MapMirror",MapMirror,
"SetMirror",SetMirror,
"IteratorMirror",IteratorMirror,
"GeneratorMirror",GeneratorMirror,
"PropertyMirror",PropertyMirror,
"InternalPropertyMirror",InternalPropertyMirror,
"FrameMirror",FrameMirror,
"ScriptMirror",ScriptMirror,
"ScopeMirror",ScopeMirror,
"FrameDetails",FrameDetails,
]);
b.InstallFunctions(b,2,[
"ClearMirrorCache",ClearMirrorCache
]);
b.Export(function(bF){
bF.MirrorType=m;
});
})

debug¦Š
(function(a,b){
"use strict";
var c=a.FrameMirror;
var d=a.Array;
var e=a.RegExp;
var f=a.isNaN;
var g=a.JSON.parse;
var h=a.JSON.stringify;
var i=a.LookupMirror;
var j=a.MakeMirror;
var k=a.MakeMirrorSerializer;
var l=a.Math.min;
var m=a.Mirror;
var n;
var o=a.parseInt;
var p;
var q=a.ValueMirror;
b.Import(function(r){
n=r.MirrorType;
p=r.ToBoolean;
});
var s=10;
var t={};
var u=/^(?:\s*(?:\/\*.*?\*\/)*)*/;
t.DebugEvent={Break:1,
Exception:2,
NewFunction:3,
BeforeCompile:4,
AfterCompile:5,
CompileError:6,
PromiseEvent:7,
AsyncTaskEvent:8};
t.ExceptionBreak={Caught:0,
Uncaught:1};
t.StepAction={StepOut:0,
StepNext:1,
StepIn:2,
StepMin:3,
StepInMin:4,
StepFrame:5};
t.ScriptType={Native:0,
Extension:1,
Normal:2};
t.ScriptCompilationType={Host:0,
Eval:1,
JSON:2};
t.ScriptBreakPointType={ScriptId:0,
ScriptName:1,
ScriptRegExp:2};
t.BreakPositionAlignment={
Statement:0,
BreakPosition:1
};
function ScriptTypeFlag(v){
return(1<<v);
}
var w=0;
var x=1;
var y=[];
var z=[];
var A={
breakPointsActive:{
value:true,
getValue:function(){return this.value;},
setValue:function(B){
this.value=!!B;
%SetDisableBreak(!this.value);
}
},
breakOnCaughtException:{
getValue:function(){return t.isBreakOnException();},
setValue:function(B){
if(B){
t.setBreakOnException();
}else{
t.clearBreakOnException();
}
}
},
breakOnUncaughtException:{
getValue:function(){return t.isBreakOnUncaughtException();},
setValue:function(B){
if(B){
t.setBreakOnUncaughtException();
}else{
t.clearBreakOnUncaughtException();
}
}
},
};
function MakeBreakPoint(C,D){
var E=new BreakPoint(C,D);
y.push(E);
return E;
}
function BreakPoint(C,D){
this.source_position_=C;
if(D){
this.script_break_point_=D;
}else{
this.number_=x++;
}
this.hit_count_=0;
this.active_=true;
this.condition_=null;
this.ignoreCount_=0;
}
BreakPoint.prototype.number=function(){
return this.number_;
};
BreakPoint.prototype.func=function(){
return this.func_;
};
BreakPoint.prototype.source_position=function(){
return this.source_position_;
};
BreakPoint.prototype.hit_count=function(){
return this.hit_count_;
};
BreakPoint.prototype.active=function(){
if(this.script_break_point()){
return this.script_break_point().active();
}
return this.active_;
};
BreakPoint.prototype.condition=function(){
if(this.script_break_point()&&this.script_break_point().condition()){
return this.script_break_point().condition();
}
return this.condition_;
};
BreakPoint.prototype.ignoreCount=function(){
return this.ignoreCount_;
};
BreakPoint.prototype.script_break_point=function(){
return this.script_break_point_;
};
BreakPoint.prototype.enable=function(){
this.active_=true;
};
BreakPoint.prototype.disable=function(){
this.active_=false;
};
BreakPoint.prototype.setCondition=function(F){
this.condition_=F;
};
BreakPoint.prototype.setIgnoreCount=function(G){
this.ignoreCount_=G;
};
BreakPoint.prototype.isTriggered=function(H){
if(!this.active())return false;
if(this.condition()){
try{
var I=H.frame(0).evaluate(this.condition());
if(!(I instanceof q)||!p(I.value_)){
return false;
}
}catch(e){
return false;
}
}
this.hit_count_++;
if(this.script_break_point_){
this.script_break_point_.hit_count_++;
}
if(this.ignoreCount_>0){
this.ignoreCount_--;
return false;
}
return true;
};
function IsBreakPointTriggered(J,E){
return E.isTriggered(MakeExecutionState(J));
}
function ScriptBreakPoint(v,script_id_or_name,opt_line,opt_column,
opt_groupId,opt_position_alignment){
this.type_=v;
if(v==t.ScriptBreakPointType.ScriptId){
this.script_id_=script_id_or_name;
}else if(v==t.ScriptBreakPointType.ScriptName){
this.script_name_=script_id_or_name;
}else if(v==t.ScriptBreakPointType.ScriptRegExp){
this.script_regexp_object_=new e(script_id_or_name);
}else{
throw MakeError(2,"Unexpected breakpoint type "+v);
}
this.line_=opt_line||0;
this.column_=opt_column;
this.groupId_=opt_groupId;
this.position_alignment_=(opt_position_alignment===(void 0))
?t.BreakPositionAlignment.Statement:opt_position_alignment;
this.hit_count_=0;
this.active_=true;
this.condition_=null;
this.ignoreCount_=0;
this.break_points_=[];
}
ScriptBreakPoint.prototype.cloneForOtherScript=function(K){
var L=new ScriptBreakPoint(t.ScriptBreakPointType.ScriptId,
K.id,this.line_,this.column_,this.groupId_,
this.position_alignment_);
L.number_=x++;
z.push(L);
L.hit_count_=this.hit_count_;
L.active_=this.active_;
L.condition_=this.condition_;
L.ignoreCount_=this.ignoreCount_;
return L;
};
ScriptBreakPoint.prototype.number=function(){
return this.number_;
};
ScriptBreakPoint.prototype.groupId=function(){
return this.groupId_;
};
ScriptBreakPoint.prototype.type=function(){
return this.type_;
};
ScriptBreakPoint.prototype.script_id=function(){
return this.script_id_;
};
ScriptBreakPoint.prototype.script_name=function(){
return this.script_name_;
};
ScriptBreakPoint.prototype.script_regexp_object=function(){
return this.script_regexp_object_;
};
ScriptBreakPoint.prototype.line=function(){
return this.line_;
};
ScriptBreakPoint.prototype.column=function(){
return this.column_;
};
ScriptBreakPoint.prototype.actual_locations=function(){
var M=[];
for(var N=0;N<this.break_points_.length;N++){
M.push(this.break_points_[N].actual_location);
}
return M;
};
ScriptBreakPoint.prototype.update_positions=function(O,P){
this.line_=O;
this.column_=P;
};
ScriptBreakPoint.prototype.hit_count=function(){
return this.hit_count_;
};
ScriptBreakPoint.prototype.active=function(){
return this.active_;
};
ScriptBreakPoint.prototype.condition=function(){
return this.condition_;
};
ScriptBreakPoint.prototype.ignoreCount=function(){
return this.ignoreCount_;
};
ScriptBreakPoint.prototype.enable=function(){
this.active_=true;
};
ScriptBreakPoint.prototype.disable=function(){
this.active_=false;
};
ScriptBreakPoint.prototype.setCondition=function(F){
this.condition_=F;
};
ScriptBreakPoint.prototype.setIgnoreCount=function(G){
this.ignoreCount_=G;
for(var N=0;N<this.break_points_.length;N++){
this.break_points_[N].setIgnoreCount(G);
}
};
ScriptBreakPoint.prototype.matchesScript=function(Q){
if(this.type_==t.ScriptBreakPointType.ScriptId){
return this.script_id_==Q.id;
}else{
if(!(Q.line_offset<=this.line_&&
this.line_<Q.line_offset+Q.lineCount())){
return false;
}
if(this.type_==t.ScriptBreakPointType.ScriptName){
return this.script_name_==Q.nameOrSourceURL();
}else if(this.type_==t.ScriptBreakPointType.ScriptRegExp){
return this.script_regexp_object_.test(Q.nameOrSourceURL());
}else{
throw MakeError(2,"Unexpected breakpoint type "+this.type_);
}
}
};
ScriptBreakPoint.prototype.set=function(Q){
var P=this.column();
var O=this.line();
if((P===(void 0))){
var R=Q.sourceLine(this.line());
if(!Q.sourceColumnStart_){
Q.sourceColumnStart_=new d(Q.lineCount());
}
if((Q.sourceColumnStart_[O]===(void 0))){
Q.sourceColumnStart_[O]=
R.match(u)[0].length;
}
P=Q.sourceColumnStart_[O];
}
var S=t.findScriptSourcePosition(Q,this.line(),P);
if((S===null))return;
var E=MakeBreakPoint(S,this);
E.setIgnoreCount(this.ignoreCount());
var T=%SetScriptBreakPoint(Q,S,
this.position_alignment_,
E);
if((T===(void 0))){
T=S;
}
var U=Q.locationFromPosition(T,true);
E.actual_location={line:U.line,
column:U.column,
script_id:Q.id};
this.break_points_.push(E);
return E;
};
ScriptBreakPoint.prototype.clear=function(){
var V=[];
for(var N=0;N<y.length;N++){
if(y[N].script_break_point()&&
y[N].script_break_point()===this){
%ClearBreakPoint(y[N]);
}else{
V.push(y[N]);
}
}
y=V;
this.break_points_=[];
};
function UpdateScriptBreakPoints(Q){
for(var N=0;N<z.length;N++){
var E=z[N];
if((E.type()==t.ScriptBreakPointType.ScriptName||
E.type()==t.ScriptBreakPointType.ScriptRegExp)&&
E.matchesScript(Q)){
E.set(Q);
}
}
}
function GetScriptBreakPoints(Q){
var W=[];
for(var N=0;N<z.length;N++){
if(z[N].matchesScript(Q)){
W.push(z[N]);
}
}
return W;
}
t.setListener=function(X,Y){
if(!(%_IsFunction(X))&&!(X===(void 0))&&!(X===null)){
throw MakeTypeError(26);
}
%SetDebugEventListener(X,Y);
};
t.breakLocations=function(Z,aa){
if(!(%_IsFunction(Z)))throw MakeTypeError(26);
var ab=(aa===(void 0))
?t.BreakPositionAlignment.Statement:aa;
return %GetBreakLocations(Z,ab);
};
t.findScript=function(ac){
if((%_IsFunction(ac))){
return %FunctionGetScript(ac);
}else if((%_IsRegExp(ac))){
var ad=t.scripts();
var ae=null;
var af=0;
for(var N in ad){
var Q=ad[N];
if(ac.test(Q.name)){
ae=Q;
af++;
}
}
if(af==1){
return ae;
}else{
return(void 0);
}
}else{
return %GetScript(ac);
}
};
t.scriptSource=function(ac){
return this.findScript(ac).source;
};
t.source=function(Z){
if(!(%_IsFunction(Z)))throw MakeTypeError(26);
return %FunctionGetSourceCode(Z);
};
t.sourcePosition=function(Z){
if(!(%_IsFunction(Z)))throw MakeTypeError(26);
return %FunctionGetScriptSourcePosition(Z);
};
t.findFunctionSourceLocation=function(ag,ah,ai){
var Q=%FunctionGetScript(ag);
var aj=%FunctionGetScriptSourcePosition(ag);
return Q.locationFromLine(ah,ai,aj);
};
t.findScriptSourcePosition=function(Q,ah,ai){
var ak=Q.locationFromLine(ah,ai);
return ak?ak.position:null;
};
t.findBreakPoint=function(al,am){
var E;
for(var N=0;N<y.length;N++){
if(y[N].number()==al){
E=y[N];
if(am){
y.splice(N,1);
}
break;
}
}
if(E){
return E;
}else{
return this.findScriptBreakPoint(al,am);
}
};
t.findBreakPointActualLocations=function(al){
for(var N=0;N<z.length;N++){
if(z[N].number()==al){
return z[N].actual_locations();
}
}
for(var N=0;N<y.length;N++){
if(y[N].number()==al){
return[y[N].actual_location];
}
}
return[];
};
t.setBreakPoint=function(ag,ah,ai,an){
if(!(%_IsFunction(ag)))throw MakeTypeError(26);
if(%FunctionIsAPIFunction(ag)){
throw MakeError(2,'Cannot set break point in native code.');
}
var ao=
this.findFunctionSourceLocation(ag,ah,ai).position;
var C=ao-this.sourcePosition(ag);
var Q=%FunctionGetScript(ag);
if(Q.type==t.ScriptType.Native){
throw MakeError(2,'Cannot set break point in native code.');
}
if(Q&&Q.id){
C+=%FunctionGetScriptSourcePosition(ag);
var ak=Q.locationFromPosition(C,false);
return this.setScriptBreakPointById(Q.id,
ak.line,ak.column,
an);
}else{
var E=MakeBreakPoint(C);
var T=
%SetFunctionBreakPoint(ag,C,E);
T+=this.sourcePosition(ag);
var U=Q.locationFromPosition(T,true);
E.actual_location={line:U.line,
column:U.column,
script_id:Q.id};
E.setCondition(an);
return E.number();
}
};
t.setBreakPointByScriptIdAndPosition=function(script_id,S,
F,enabled,
opt_position_alignment)
{
var E=MakeBreakPoint(S);
E.setCondition(F);
if(!enabled){
E.disable();
}
var ad=this.scripts();
var ap=(opt_position_alignment===(void 0))
?t.BreakPositionAlignment.Statement:opt_position_alignment;
for(var N=0;N<ad.length;N++){
if(script_id==ad[N].id){
E.actual_position=%SetScriptBreakPoint(ad[N],S,
ap,E);
break;
}
}
return E;
};
t.enableBreakPoint=function(al){
var E=this.findBreakPoint(al,false);
if(E){
E.enable();
}
};
t.disableBreakPoint=function(al){
var E=this.findBreakPoint(al,false);
if(E){
E.disable();
}
};
t.changeBreakPointCondition=function(al,F){
var E=this.findBreakPoint(al,false);
E.setCondition(F);
};
t.changeBreakPointIgnoreCount=function(al,G){
if(G<0)throw MakeError(2,'Invalid argument');
var E=this.findBreakPoint(al,false);
E.setIgnoreCount(G);
};
t.clearBreakPoint=function(al){
var E=this.findBreakPoint(al,true);
if(E){
return %ClearBreakPoint(E);
}else{
E=this.findScriptBreakPoint(al,true);
if(!E)throw MakeError(2,'Invalid breakpoint');
}
};
t.clearAllBreakPoints=function(){
for(var N=0;N<y.length;N++){
var E=y[N];
%ClearBreakPoint(E);
}
y=[];
};
t.disableAllBreakPoints=function(){
for(var N=1;N<x;N++){
t.disableBreakPoint(N);
}
%ChangeBreakOnException(t.ExceptionBreak.Caught,false);
%ChangeBreakOnException(t.ExceptionBreak.Uncaught,false);
};
t.findScriptBreakPoint=function(al,am){
var aq;
for(var N=0;N<z.length;N++){
if(z[N].number()==al){
aq=z[N];
if(am){
aq.clear();
z.splice(N,1);
}
break;
}
}
return aq;
};
t.setScriptBreakPoint=function(v,script_id_or_name,
ah,ai,an,
opt_groupId,opt_position_alignment){
var aq=
new ScriptBreakPoint(v,script_id_or_name,ah,ai,
opt_groupId,opt_position_alignment);
aq.number_=x++;
aq.setCondition(an);
z.push(aq);
var ad=this.scripts();
for(var N=0;N<ad.length;N++){
if(aq.matchesScript(ad[N])){
aq.set(ad[N]);
}
}
return aq.number();
};
t.setScriptBreakPointById=function(script_id,
ah,ai,
an,opt_groupId,
opt_position_alignment){
return this.setScriptBreakPoint(t.ScriptBreakPointType.ScriptId,
script_id,ah,ai,
an,opt_groupId,
opt_position_alignment);
};
t.setScriptBreakPointByName=function(script_name,
ah,ai,
an,opt_groupId){
return this.setScriptBreakPoint(t.ScriptBreakPointType.ScriptName,
script_name,ah,ai,
an,opt_groupId);
};
t.setScriptBreakPointByRegExp=function(script_regexp,
ah,ai,
an,opt_groupId){
return this.setScriptBreakPoint(t.ScriptBreakPointType.ScriptRegExp,
script_regexp,ah,ai,
an,opt_groupId);
};
t.enableScriptBreakPoint=function(al){
var aq=this.findScriptBreakPoint(al,false);
aq.enable();
};
t.disableScriptBreakPoint=function(al){
var aq=this.findScriptBreakPoint(al,false);
aq.disable();
};
t.changeScriptBreakPointCondition=function(
al,F){
var aq=this.findScriptBreakPoint(al,false);
aq.setCondition(F);
};
t.changeScriptBreakPointIgnoreCount=function(
al,G){
if(G<0)throw MakeError(2,'Invalid argument');
var aq=this.findScriptBreakPoint(al,false);
aq.setIgnoreCount(G);
};
t.scriptBreakPoints=function(){
return z;
};
t.clearStepping=function(){
%ClearStepping();
};
t.setBreakOnException=function(){
return %ChangeBreakOnException(t.ExceptionBreak.Caught,true);
};
t.clearBreakOnException=function(){
return %ChangeBreakOnException(t.ExceptionBreak.Caught,false);
};
t.isBreakOnException=function(){
return!!%IsBreakOnException(t.ExceptionBreak.Caught);
};
t.setBreakOnUncaughtException=function(){
return %ChangeBreakOnException(t.ExceptionBreak.Uncaught,true);
};
t.clearBreakOnUncaughtException=function(){
return %ChangeBreakOnException(t.ExceptionBreak.Uncaught,false);
};
t.isBreakOnUncaughtException=function(){
return!!%IsBreakOnException(t.ExceptionBreak.Uncaught);
};
t.showBreakPoints=function(Z,ar,as){
if(!(%_IsFunction(Z)))throw MakeError(26);
var at=ar?this.scriptSource(Z):this.source(Z);
var au=ar?this.sourcePosition(Z):0;
var M=this.breakLocations(Z,as);
if(!M)return at;
M.sort(function(av,aw){return av-aw;});
var W="";
var ax=0;
var ay;
for(var N=0;N<M.length;N++){
ay=M[N]-au;
W+=at.slice(ax,ay);
W+="[B"+N+"]";
ax=ay;
}
ay=at.length;
W+=at.substring(ax,ay);
return W;
};
t.scripts=function(){
return %DebugGetLoadedScripts();
};
t.debuggerFlags=function(){
return A;
};
t.MakeMirror=j;
function MakeExecutionState(J){
return new ExecutionState(J);
}
function ExecutionState(J){
this.break_id=J;
this.selected_frame=0;
}
ExecutionState.prototype.prepareStep=function(opt_action,opt_count,
opt_callframe){
var az=t.StepAction.StepIn;
if(!(opt_action===(void 0)))az=(%_ToNumber(opt_action));
var aA=opt_count?(%_ToNumber(opt_count)):1;
var aB=0;
if(!(opt_callframe===(void 0))){
aB=opt_callframe.details_.frameId();
}
return %PrepareStep(this.break_id,az,aA,aB);
};
ExecutionState.prototype.evaluateGlobal=function(at,disable_break,
opt_additional_context){
return j(%DebugEvaluateGlobal(this.break_id,at,
p(disable_break),
opt_additional_context));
};
ExecutionState.prototype.frameCount=function(){
return %GetFrameCount(this.break_id);
};
ExecutionState.prototype.threadCount=function(){
return %GetThreadCount(this.break_id);
};
ExecutionState.prototype.frame=function(aC){
if(aC==null)aC=this.selected_frame;
if(aC<0||aC>=this.frameCount()){
throw MakeTypeError(25);
}
return new c(this.break_id,aC);
};
ExecutionState.prototype.setSelectedFrame=function(aD){
var N=(%_ToNumber(aD));
if(N<0||N>=this.frameCount()){
throw MakeTypeError(25);
}
this.selected_frame=N;
};
ExecutionState.prototype.selectedFrame=function(){
return this.selected_frame;
};
ExecutionState.prototype.debugCommandProcessor=function(aE){
return new DebugCommandProcessor(this,aE);
};
function MakeBreakEvent(J,aF){
return new BreakEvent(J,aF);
}
function BreakEvent(J,aF){
this.frame_=new c(J,0);
this.break_points_hit_=aF;
}
BreakEvent.prototype.eventType=function(){
return t.DebugEvent.Break;
};
BreakEvent.prototype.func=function(){
return this.frame_.func();
};
BreakEvent.prototype.sourceLine=function(){
return this.frame_.sourceLine();
};
BreakEvent.prototype.sourceColumn=function(){
return this.frame_.sourceColumn();
};
BreakEvent.prototype.sourceLineText=function(){
return this.frame_.sourceLineText();
};
BreakEvent.prototype.breakPointsHit=function(){
return this.break_points_hit_;
};
BreakEvent.prototype.toJSONProtocol=function(){
var aG={seq:w++,
type:"event",
event:"break",
body:{invocationText:this.frame_.invocationText()}
};
var Q=this.func().script();
if(Q){
aG.body.sourceLine=this.sourceLine(),
aG.body.sourceColumn=this.sourceColumn(),
aG.body.sourceLineText=this.sourceLineText(),
aG.body.script=MakeScriptObject_(Q,false);
}
if(this.breakPointsHit()){
aG.body.breakpoints=[];
for(var N=0;N<this.breakPointsHit().length;N++){
var aH=this.breakPointsHit()[N];
var aq=aH.script_break_point();
var aI;
if(aq){
aI=aq.number();
}else{
aI=aH.number();
}
aG.body.breakpoints.push(aI);
}
}
return h(ObjectToProtocolObject_(aG));
};
function MakeExceptionEvent(J,aJ,aK,aL){
return new ExceptionEvent(J,aJ,aK,aL);
}
function ExceptionEvent(J,aJ,aK,aL){
this.exec_state_=new ExecutionState(J);
this.exception_=aJ;
this.uncaught_=aK;
this.promise_=aL;
}
ExceptionEvent.prototype.eventType=function(){
return t.DebugEvent.Exception;
};
ExceptionEvent.prototype.exception=function(){
return this.exception_;
};
ExceptionEvent.prototype.uncaught=function(){
return this.uncaught_;
};
ExceptionEvent.prototype.promise=function(){
return this.promise_;
};
ExceptionEvent.prototype.func=function(){
return this.exec_state_.frame(0).func();
};
ExceptionEvent.prototype.sourceLine=function(){
return this.exec_state_.frame(0).sourceLine();
};
ExceptionEvent.prototype.sourceColumn=function(){
return this.exec_state_.frame(0).sourceColumn();
};
ExceptionEvent.prototype.sourceLineText=function(){
return this.exec_state_.frame(0).sourceLineText();
};
ExceptionEvent.prototype.toJSONProtocol=function(){
var aG=new ProtocolMessage();
aG.event="exception";
aG.body={uncaught:this.uncaught_,
exception:j(this.exception_)
};
if(this.exec_state_.frameCount()>0){
aG.body.sourceLine=this.sourceLine();
aG.body.sourceColumn=this.sourceColumn();
aG.body.sourceLineText=this.sourceLineText();
var Q=this.func().script();
if(Q){
aG.body.script=MakeScriptObject_(Q,false);
}
}else{
aG.body.sourceLine=-1;
}
return aG.toJSONProtocol();
};
function MakeCompileEvent(Q,v){
return new CompileEvent(Q,v);
}
function CompileEvent(Q,v){
this.script_=j(Q);
this.type_=v;
}
CompileEvent.prototype.eventType=function(){
return this.type_;
};
CompileEvent.prototype.script=function(){
return this.script_;
};
CompileEvent.prototype.toJSONProtocol=function(){
var aG=new ProtocolMessage();
aG.running=true;
switch(this.type_){
case t.DebugEvent.BeforeCompile:
aG.event="beforeCompile";
break;
case t.DebugEvent.AfterCompile:
aG.event="afterCompile";
break;
case t.DebugEvent.CompileError:
aG.event="compileError";
break;
}
aG.body={};
aG.body.script=this.script_;
return aG.toJSONProtocol();
};
function MakeScriptObject_(Q,aM){
var aG={id:Q.id(),
name:Q.name(),
lineOffset:Q.lineOffset(),
columnOffset:Q.columnOffset(),
lineCount:Q.lineCount(),
};
if(!(Q.data()===(void 0))){
aG.data=Q.data();
}
if(aM){
aG.source=Q.source();
}
return aG;
}
function MakePromiseEvent(aN){
return new PromiseEvent(aN);
}
function PromiseEvent(aN){
this.promise_=aN.promise;
this.parentPromise_=aN.parentPromise;
this.status_=aN.status;
this.value_=aN.value;
}
PromiseEvent.prototype.promise=function(){
return j(this.promise_);
}
PromiseEvent.prototype.parentPromise=function(){
return j(this.parentPromise_);
}
PromiseEvent.prototype.status=function(){
return this.status_;
}
PromiseEvent.prototype.value=function(){
return j(this.value_);
}
function MakeAsyncTaskEvent(aN){
return new AsyncTaskEvent(aN);
}
function AsyncTaskEvent(aN){
this.type_=aN.type;
this.name_=aN.name;
this.id_=aN.id;
}
AsyncTaskEvent.prototype.type=function(){
return this.type_;
}
AsyncTaskEvent.prototype.name=function(){
return this.name_;
}
AsyncTaskEvent.prototype.id=function(){
return this.id_;
}
function DebugCommandProcessor(H,aE){
this.exec_state_=H;
this.running_=aE||false;
}
DebugCommandProcessor.prototype.processDebugRequest=function(aO){
return this.processDebugJSONRequest(aO);
};
function ProtocolMessage(aO){
this.seq=w++;
if(aO){
this.type='response';
this.request_seq=aO.seq;
this.command=aO.command;
}else{
this.type='event';
}
this.success=true;
this.running=(void 0);
}
ProtocolMessage.prototype.setOption=function(aP,B){
if(!this.options_){
this.options_={};
}
this.options_[aP]=B;
};
ProtocolMessage.prototype.failed=function(aQ,aR){
this.success=false;
this.message=aQ;
if((typeof(aR)==='object')){
this.error_details=aR;
}
};
ProtocolMessage.prototype.toJSONProtocol=function(){
var aS={};
aS.seq=this.seq;
if(this.request_seq){
aS.request_seq=this.request_seq;
}
aS.type=this.type;
if(this.event){
aS.event=this.event;
}
if(this.command){
aS.command=this.command;
}
if(this.success){
aS.success=this.success;
}else{
aS.success=false;
}
if(this.body){
var aT;
var aU=k(true,this.options_);
if(this.body instanceof m){
aT=aU.serializeValue(this.body);
}else if(this.body instanceof d){
aT=[];
for(var N=0;N<this.body.length;N++){
if(this.body[N]instanceof m){
aT.push(aU.serializeValue(this.body[N]));
}else{
aT.push(ObjectToProtocolObject_(this.body[N],aU));
}
}
}else{
aT=ObjectToProtocolObject_(this.body,aU);
}
aS.body=aT;
aS.refs=aU.serializeReferencedObjects();
}
if(this.message){
aS.message=this.message;
}
if(this.error_details){
aS.error_details=this.error_details;
}
aS.running=this.running;
return h(aS);
};
DebugCommandProcessor.prototype.createResponse=function(aO){
return new ProtocolMessage(aO);
};
DebugCommandProcessor.prototype.processDebugJSONRequest=function(
json_request){
var aO;
var aV;
try{
try{
aO=g(json_request);
aV=this.createResponse(aO);
if(!aO.type){
throw MakeError(2,'Type not specified');
}
if(aO.type!='request'){
throw MakeError(2,
"Illegal type '"+aO.type+"' in request");
}
if(!aO.command){
throw MakeError(2,'Command not specified');
}
if(aO.arguments){
var aW=aO.arguments;
if(aW.inlineRefs||aW.compactFormat){
aV.setOption('inlineRefs',true);
}
if(!(aW.maxStringLength===(void 0))){
aV.setOption('maxStringLength',aW.maxStringLength);
}
}
var aX=aO.command.toLowerCase();
var aY=DebugCommandProcessor.prototype.dispatch_[aX];
if((%_IsFunction(aY))){
%_CallFunction(this,aO,aV,aY);
}else{
throw MakeError(2,
'Unknown command "'+aO.command+'" in request');
}
}catch(e){
if(!aV){
aV=this.createResponse();
}
aV.success=false;
aV.message=(%_ToString(e));
}
try{
if(!(aV.running===(void 0))){
this.running_=aV.running;
}
aV.running=this.running_;
return aV.toJSONProtocol();
}catch(e){
return'{"seq":'+aV.seq+','+
'"request_seq":'+aO.seq+','+
'"type":"response",'+
'"success":false,'+
'"message":"Internal error: '+(%_ToString(e))+'"}';
}
}catch(e){
return'{"seq":0,"type":"response","success":false,"message":"Internal error"}';
}
};
DebugCommandProcessor.prototype.continueRequest_=function(aO,aV){
if(aO.arguments){
var aA=1;
var az=t.StepAction.StepIn;
var aZ=aO.arguments.stepaction;
var ba=aO.arguments.stepcount;
if(ba){
aA=(%_ToNumber(ba));
if(aA<0){
throw MakeError(2,
'Invalid stepcount argument "'+ba+'".');
}
}
if(aZ){
if(aZ=='in'){
az=t.StepAction.StepIn;
}else if(aZ=='min'){
az=t.StepAction.StepMin;
}else if(aZ=='next'){
az=t.StepAction.StepNext;
}else if(aZ=='out'){
az=t.StepAction.StepOut;
}else{
throw MakeError(2,
'Invalid stepaction argument "'+aZ+'".');
}
}
this.exec_state_.prepareStep(az,aA);
}
aV.running=true;
};
DebugCommandProcessor.prototype.breakRequest_=function(aO,aV){
};
DebugCommandProcessor.prototype.setBreakPointRequest_=
function(aO,aV){
if(!aO.arguments){
aV.failed('Missing arguments');
return;
}
var v=aO.arguments.type;
var bb=aO.arguments.target;
var O=aO.arguments.line;
var P=aO.arguments.column;
var bc=(aO.arguments.enabled===(void 0))?
true:aO.arguments.enabled;
var F=aO.arguments.condition;
var G=aO.arguments.ignoreCount;
var bd=aO.arguments.groupId;
if(!v||(bb===(void 0))){
aV.failed('Missing argument "type" or "target"');
return;
}
var al;
if(v=='function'){
if(!(typeof(bb)==='string')){
aV.failed('Argument "target" is not a string value');
return;
}
var Z;
try{
Z=this.exec_state_.evaluateGlobal(bb).value();
}catch(e){
aV.failed('Error: "'+(%_ToString(e))+
'" evaluating "'+bb+'"');
return;
}
if(!(%_IsFunction(Z))){
aV.failed('"'+bb+'" does not evaluate to a function');
return;
}
al=t.setBreakPoint(Z,O,P,F);
}else if(v=='handle'){
var be=o(bb,10);
var I=i(be);
if(!I){
return aV.failed('Object #'+be+'# not found');
}
if(!I.isFunction()){
return aV.failed('Object #'+be+'# is not a function');
}
al=t.setBreakPoint(I.value(),
O,P,F);
}else if(v=='script'){
al=
t.setScriptBreakPointByName(bb,O,P,F,
bd);
}else if(v=='scriptId'){
al=
t.setScriptBreakPointById(bb,O,P,F,bd);
}else if(v=='scriptRegExp'){
al=
t.setScriptBreakPointByRegExp(bb,O,P,F,
bd);
}else{
aV.failed('Illegal type "'+v+'"');
return;
}
var E=t.findBreakPoint(al);
if(G){
t.changeBreakPointIgnoreCount(al,G);
}
if(!bc){
t.disableBreakPoint(al);
}
aV.body={type:v,
breakpoint:al};
if(E instanceof ScriptBreakPoint){
if(E.type()==t.ScriptBreakPointType.ScriptId){
aV.body.type='scriptId';
aV.body.script_id=E.script_id();
}else if(E.type()==t.ScriptBreakPointType.ScriptName){
aV.body.type='scriptName';
aV.body.script_name=E.script_name();
}else if(E.type()==t.ScriptBreakPointType.ScriptRegExp){
aV.body.type='scriptRegExp';
aV.body.script_regexp=E.script_regexp_object().source;
}else{
throw MakeError(2,
"Unexpected breakpoint type: "+E.type());
}
aV.body.line=E.line();
aV.body.column=E.column();
aV.body.actual_locations=E.actual_locations();
}else{
aV.body.type='function';
aV.body.actual_locations=[E.actual_location];
}
};
DebugCommandProcessor.prototype.changeBreakPointRequest_=function(
aO,aV){
if(!aO.arguments){
aV.failed('Missing arguments');
return;
}
var E=(%_ToNumber(aO.arguments.breakpoint));
var bc=aO.arguments.enabled;
var F=aO.arguments.condition;
var G=aO.arguments.ignoreCount;
if(!E){
aV.failed('Missing argument "breakpoint"');
return;
}
if(!(bc===(void 0))){
if(bc){
t.enableBreakPoint(E);
}else{
t.disableBreakPoint(E);
}
}
if(!(F===(void 0))){
t.changeBreakPointCondition(E,F);
}
if(!(G===(void 0))){
t.changeBreakPointIgnoreCount(E,G);
}
};
DebugCommandProcessor.prototype.clearBreakPointGroupRequest_=function(
aO,aV){
if(!aO.arguments){
aV.failed('Missing arguments');
return;
}
var bf=aO.arguments.groupId;
if(!bf){
aV.failed('Missing argument "groupId"');
return;
}
var bg=[];
var bh=[];
for(var N=0;N<z.length;N++){
var bi=z[N];
if(bi.groupId()==bf){
bg.push(bi.number());
bi.clear();
}else{
bh.push(bi);
}
}
z=bh;
aV.body={breakpoints:bg};
};
DebugCommandProcessor.prototype.clearBreakPointRequest_=function(
aO,aV){
if(!aO.arguments){
aV.failed('Missing arguments');
return;
}
var E=(%_ToNumber(aO.arguments.breakpoint));
if(!E){
aV.failed('Missing argument "breakpoint"');
return;
}
t.clearBreakPoint(E);
aV.body={breakpoint:E};
};
DebugCommandProcessor.prototype.listBreakpointsRequest_=function(
aO,aV){
var bj=[];
for(var N=0;N<z.length;N++){
var E=z[N];
var bk={
number:E.number(),
line:E.line(),
column:E.column(),
groupId:E.groupId(),
hit_count:E.hit_count(),
active:E.active(),
condition:E.condition(),
ignoreCount:E.ignoreCount(),
actual_locations:E.actual_locations()
};
if(E.type()==t.ScriptBreakPointType.ScriptId){
bk.type='scriptId';
bk.script_id=E.script_id();
}else if(E.type()==t.ScriptBreakPointType.ScriptName){
bk.type='scriptName';
bk.script_name=E.script_name();
}else if(E.type()==t.ScriptBreakPointType.ScriptRegExp){
bk.type='scriptRegExp';
bk.script_regexp=E.script_regexp_object().source;
}else{
throw MakeError(2,
"Unexpected breakpoint type: "+E.type());
}
bj.push(bk);
}
aV.body={
breakpoints:bj,
breakOnExceptions:t.isBreakOnException(),
breakOnUncaughtExceptions:t.isBreakOnUncaughtException()
};
};
DebugCommandProcessor.prototype.disconnectRequest_=
function(aO,aV){
t.disableAllBreakPoints();
this.continueRequest_(aO,aV);
};
DebugCommandProcessor.prototype.setExceptionBreakRequest_=
function(aO,aV){
if(!aO.arguments){
aV.failed('Missing arguments');
return;
}
var v=aO.arguments.type;
if(!v){
aV.failed('Missing argument "type"');
return;
}
var bc;
if(v=='all'){
bc=!t.isBreakOnException();
}else if(v=='uncaught'){
bc=!t.isBreakOnUncaughtException();
}
if(!(aO.arguments.enabled===(void 0))){
bc=aO.arguments.enabled;
if((bc!=true)&&(bc!=false)){
aV.failed('Illegal value for "enabled":"'+bc+'"');
}
}
if(v=='all'){
%ChangeBreakOnException(t.ExceptionBreak.Caught,bc);
}else if(v=='uncaught'){
%ChangeBreakOnException(t.ExceptionBreak.Uncaught,bc);
}else{
aV.failed('Unknown "type":"'+v+'"');
}
aV.body={'type':v,'enabled':bc};
};
DebugCommandProcessor.prototype.backtraceRequest_=function(
aO,aV){
var bl=this.exec_state_.frameCount();
if(bl==0){
aV.body={
totalFrames:bl
};
return;
}
var bm=0;
var bn=s;
if(aO.arguments){
if(aO.arguments.fromFrame){
bm=aO.arguments.fromFrame;
}
if(aO.arguments.toFrame){
bn=aO.arguments.toFrame;
}
if(aO.arguments.bottom){
var bo=bl-bm;
bm=bl-bn;
bn=bo;
}
if(bm<0||bn<0){
return aV.failed('Invalid frame number');
}
}
bn=l(bl,bn);
if(bn<=bm){
var bp='Invalid frame range';
return aV.failed(bp);
}
var bq=[];
for(var N=bm;N<bn;N++){
bq.push(this.exec_state_.frame(N));
}
aV.body={
fromFrame:bm,
toFrame:bn,
totalFrames:bl,
frames:bq
};
};
DebugCommandProcessor.prototype.frameRequest_=function(aO,aV){
if(this.exec_state_.frameCount()==0){
return aV.failed('No frames');
}
if(aO.arguments){
var aD=aO.arguments.number;
if(aD<0||this.exec_state_.frameCount()<=aD){
return aV.failed('Invalid frame number');
}
this.exec_state_.setSelectedFrame(aO.arguments.number);
}
aV.body=this.exec_state_.frame();
};
DebugCommandProcessor.prototype.resolveFrameFromScopeDescription_=
function(br){
if(br&&!(br.frameNumber===(void 0))){
var bs=br.frameNumber;
if(bs<0||this.exec_state_.frameCount()<=bs){
throw MakeTypeError(25);
}
return this.exec_state_.frame(bs);
}else{
return this.exec_state_.frame();
}
};
DebugCommandProcessor.prototype.resolveScopeHolder_=
function(br){
if(br&&"functionHandle"in br){
if(!(typeof(br.functionHandle)==='number')){
throw MakeError(2,'Function handle must be a number');
}
var bt=i(br.functionHandle);
if(!bt){
throw MakeError(2,'Failed to find function object by handle');
}
if(!bt.isFunction()){
throw MakeError(2,
'Value of non-function type is found by handle');
}
return bt;
}else{
if(this.exec_state_.frameCount()==0){
throw MakeError(2,'No scopes');
}
var bu=this.resolveFrameFromScopeDescription_(br);
return bu;
}
}
DebugCommandProcessor.prototype.scopesRequest_=function(aO,aV){
var bv=this.resolveScopeHolder_(aO.arguments);
var bw=bv.scopeCount();
var bx=[];
for(var N=0;N<bw;N++){
bx.push(bv.scope(N));
}
aV.body={
fromScope:0,
toScope:bw,
totalScopes:bw,
scopes:bx
};
};
DebugCommandProcessor.prototype.scopeRequest_=function(aO,aV){
var bv=this.resolveScopeHolder_(aO.arguments);
var by=0;
if(aO.arguments&&!(aO.arguments.number===(void 0))){
by=(%_ToNumber(aO.arguments.number));
if(by<0||bv.scopeCount()<=by){
return aV.failed('Invalid scope number');
}
}
aV.body=bv.scope(by);
};
DebugCommandProcessor.resolveValue_=function(bz){
if("handle"in bz){
var bA=i(bz.handle);
if(!bA){
throw MakeError(2,"Failed to resolve value by handle, ' #"+
bz.handle+"# not found");
}
return bA.value();
}else if("stringDescription"in bz){
if(bz.type==n.BOOLEAN_TYPE){
return p(bz.stringDescription);
}else if(bz.type==n.NUMBER_TYPE){
return(%_ToNumber(bz.stringDescription));
}if(bz.type==n.STRING_TYPE){
return(%_ToString(bz.stringDescription));
}else{
throw MakeError(2,"Unknown type");
}
}else if("value"in bz){
return bz.value;
}else if(bz.type==n.UNDEFINED_TYPE){
return(void 0);
}else if(bz.type==n.NULL_TYPE){
return null;
}else{
throw MakeError(2,"Failed to parse value description");
}
};
DebugCommandProcessor.prototype.setVariableValueRequest_=
function(aO,aV){
if(!aO.arguments){
aV.failed('Missing arguments');
return;
}
if((aO.arguments.name===(void 0))){
aV.failed('Missing variable name');
}
var bB=aO.arguments.name;
var br=aO.arguments.scope;
var bv=this.resolveScopeHolder_(br);
if((br.number===(void 0))){
aV.failed('Missing scope number');
}
var by=(%_ToNumber(br.number));
var bC=bv.scope(by);
var bD=
DebugCommandProcessor.resolveValue_(aO.arguments.newValue);
bC.setVariableValue(bB,bD);
var bE=j(bD);
aV.body={
newValue:bE
};
};
DebugCommandProcessor.prototype.evaluateRequest_=function(aO,aV){
if(!aO.arguments){
return aV.failed('Missing arguments');
}
var bF=aO.arguments.expression;
var bu=aO.arguments.frame;
var a=aO.arguments.global;
var bG=aO.arguments.disable_break;
var bH=aO.arguments.additional_context;
try{
bF=(%_ToString(bF));
}catch(e){
return aV.failed('Failed to convert expression argument to string');
}
if(!(bu===(void 0))&&a){
return aV.failed('Arguments "frame" and "global" are exclusive');
}
var bI;
if(bH){
bI={};
for(var N=0;N<bH.length;N++){
var bJ=bH[N];
if(!(typeof(bJ.name)==='string')){
return aV.failed("Context element #"+N+
" doesn't contain name:string property");
}
var bK=DebugCommandProcessor.resolveValue_(bJ);
bI[bJ.name]=bK;
}
}
if(a){
aV.body=this.exec_state_.evaluateGlobal(
bF,p(bG),bI);
return;
}
if((bG===(void 0))){
bG=true;
}
if(this.exec_state_.frameCount()==0){
return aV.failed('No frames');
}
if(!(bu===(void 0))){
var bL=(%_ToNumber(bu));
if(bL<0||bL>=this.exec_state_.frameCount()){
return aV.failed('Invalid frame "'+bu+'"');
}
aV.body=this.exec_state_.frame(bL).evaluate(
bF,p(bG),bI);
return;
}else{
aV.body=this.exec_state_.frame().evaluate(
bF,p(bG),bI);
return;
}
};
DebugCommandProcessor.prototype.lookupRequest_=function(aO,aV){
if(!aO.arguments){
return aV.failed('Missing arguments');
}
var bM=aO.arguments.handles;
if((bM===(void 0))){
return aV.failed('Argument "handles" missing');
}
if(!(aO.arguments.includeSource===(void 0))){
var bN=p(aO.arguments.includeSource);
aV.setOption('includeSource',bN);
}
var bO={};
for(var N=0;N<bM.length;N++){
var be=bM[N];
var I=i(be);
if(!I){
return aV.failed('Object #'+be+'# not found');
}
bO[be]=I;
}
aV.body=bO;
};
DebugCommandProcessor.prototype.referencesRequest_=
function(aO,aV){
if(!aO.arguments){
return aV.failed('Missing arguments');
}
var v=aO.arguments.type;
var be=aO.arguments.handle;
if((v===(void 0))){
return aV.failed('Argument "type" missing');
}
if((be===(void 0))){
return aV.failed('Argument "handle" missing');
}
if(v!='referencedBy'&&v!='constructedBy'){
return aV.failed('Invalid type "'+v+'"');
}
var I=i(be);
if(I){
if(v=='referencedBy'){
aV.body=I.referencedBy();
}else{
aV.body=I.constructedBy();
}
}else{
return aV.failed('Object #'+be+'# not found');
}
};
DebugCommandProcessor.prototype.sourceRequest_=function(aO,aV){
if(this.exec_state_.frameCount()==0){
return aV.failed('No source');
}
var bP;
var bQ;
var bu=this.exec_state_.frame();
if(aO.arguments){
bP=aO.arguments.fromLine;
bQ=aO.arguments.toLine;
if(!(aO.arguments.frame===(void 0))){
var bL=(%_ToNumber(aO.arguments.frame));
if(bL<0||bL>=this.exec_state_.frameCount()){
return aV.failed('Invalid frame "'+bu+'"');
}
bu=this.exec_state_.frame(bL);
}
}
var Q=bu.func().script();
if(!Q){
return aV.failed('No source');
}
var bR=Q.sourceSlice(bP,bQ);
if(!bR){
return aV.failed('Invalid line interval');
}
aV.body={};
aV.body.source=bR.sourceText();
aV.body.fromLine=bR.from_line;
aV.body.toLine=bR.to_line;
aV.body.fromPosition=bR.from_position;
aV.body.toPosition=bR.to_position;
aV.body.totalLines=Q.lineCount();
};
DebugCommandProcessor.prototype.scriptsRequest_=function(aO,aV){
var bS=ScriptTypeFlag(t.ScriptType.Normal);
var bN=false;
var bT=null;
if(aO.arguments){
if(!(aO.arguments.types===(void 0))){
bS=(%_ToNumber(aO.arguments.types));
if(f(bS)||bS<0){
return aV.failed('Invalid types "'+
aO.arguments.types+'"');
}
}
if(!(aO.arguments.includeSource===(void 0))){
bN=p(aO.arguments.includeSource);
aV.setOption('includeSource',bN);
}
if((%_IsArray(aO.arguments.ids))){
bT={};
var bU=aO.arguments.ids;
for(var N=0;N<bU.length;N++){
bT[bU[N]]=true;
}
}
var bV=null;
var bW=null;
if(!(aO.arguments.filter===(void 0))){
var bX=(%_ToNumber(aO.arguments.filter));
if(!f(bX)){
bW=bX;
}
bV=aO.arguments.filter;
}
}
var ad=%DebugGetLoadedScripts();
aV.body=[];
for(var N=0;N<ad.length;N++){
if(bT&&!bT[ad[N].id]){
continue;
}
if(bV||bW){
var Q=ad[N];
var bY=false;
if(bW&&!bY){
if(Q.id&&Q.id===bW){
bY=true;
}
}
if(bV&&!bY){
if(Q.name&&Q.name.indexOf(bV)>=0){
bY=true;
}
}
if(!bY)continue;
}
if(bS&ScriptTypeFlag(ad[N].type)){
aV.body.push(j(ad[N]));
}
}
};
DebugCommandProcessor.prototype.threadsRequest_=function(aO,aV){
var bZ=this.exec_state_.threadCount();
var ca=[];
for(var N=0;N<bZ;N++){
var cb=%GetThreadDetails(this.exec_state_.break_id,N);
var cc={current:cb[0],
id:cb[1]
};
ca.push(cc);
}
aV.body={
totalThreads:bZ,
threads:ca
};
};
DebugCommandProcessor.prototype.suspendRequest_=function(aO,aV){
aV.running=false;
};
DebugCommandProcessor.prototype.versionRequest_=function(aO,aV){
aV.body={
V8Version:%GetV8Version()
};
};
DebugCommandProcessor.prototype.changeLiveRequest_=function(
aO,aV){
if(!aO.arguments){
return aV.failed('Missing arguments');
}
var cd=aO.arguments.script_id;
var ce=!!aO.arguments.preview_only;
var ad=%DebugGetLoadedScripts();
var cf=null;
for(var N=0;N<ad.length;N++){
if(ad[N].id==cd){
cf=ad[N];
}
}
if(!cf){
aV.failed('Script not found');
return;
}
var cg=new d();
if(!(typeof(aO.arguments.new_source)==='string')){
throw"new_source argument expected";
}
var ch=aO.arguments.new_source;
var ci;
try{
ci=t.LiveEdit.SetScriptSource(cf,
ch,ce,cg);
}catch(e){
if(e instanceof t.LiveEdit.Failure&&"details"in e){
aV.failed(e.message,e.details);
return;
}
throw e;
}
aV.body={change_log:cg,result:ci};
if(!ce&&!this.running_&&ci.stack_modified){
aV.body.stepin_recommended=true;
}
};
DebugCommandProcessor.prototype.restartFrameRequest_=function(
aO,aV){
if(!aO.arguments){
return aV.failed('Missing arguments');
}
var bu=aO.arguments.frame;
if(this.exec_state_.frameCount()==0){
return aV.failed('No frames');
}
var cj;
if(!(bu===(void 0))){
var bL=(%_ToNumber(bu));
if(bL<0||bL>=this.exec_state_.frameCount()){
return aV.failed('Invalid frame "'+bu+'"');
}
cj=this.exec_state_.frame(bL);
}else{
cj=this.exec_state_.frame();
}
var ci=t.LiveEdit.RestartFrame(cj);
aV.body={result:ci};
};
DebugCommandProcessor.prototype.debuggerFlagsRequest_=function(aO,
aV){
if(!aO.arguments){
aV.failed('Missing arguments');
return;
}
var ck=aO.arguments.flags;
aV.body={flags:[]};
if(!(ck===(void 0))){
for(var N=0;N<ck.length;N++){
var aP=ck[N].name;
var cl=A[aP];
if(!cl){
continue;
}
if('value'in ck[N]){
cl.setValue(ck[N].value);
}
aV.body.flags.push({name:aP,value:cl.getValue()});
}
}else{
for(var aP in A){
var B=A[aP].getValue();
aV.body.flags.push({name:aP,value:B});
}
}
};
DebugCommandProcessor.prototype.v8FlagsRequest_=function(aO,aV){
var ck=aO.arguments.flags;
if(!ck)ck='';
%SetFlags(ck);
};
DebugCommandProcessor.prototype.gcRequest_=function(aO,aV){
var v=aO.arguments.type;
if(!v)v='all';
var cm=%GetHeapUsage();
%CollectGarbage(v);
var cn=%GetHeapUsage();
aV.body={"before":cm,"after":cn};
};
DebugCommandProcessor.prototype.dispatch_=(function(){
var co=DebugCommandProcessor.prototype;
return{
"continue":co.continueRequest_,
"break":co.breakRequest_,
"setbreakpoint":co.setBreakPointRequest_,
"changebreakpoint":co.changeBreakPointRequest_,
"clearbreakpoint":co.clearBreakPointRequest_,
"clearbreakpointgroup":co.clearBreakPointGroupRequest_,
"disconnect":co.disconnectRequest_,
"setexceptionbreak":co.setExceptionBreakRequest_,
"listbreakpoints":co.listBreakpointsRequest_,
"backtrace":co.backtraceRequest_,
"frame":co.frameRequest_,
"scopes":co.scopesRequest_,
"scope":co.scopeRequest_,
"setvariablevalue":co.setVariableValueRequest_,
"evaluate":co.evaluateRequest_,
"lookup":co.lookupRequest_,
"references":co.referencesRequest_,
"source":co.sourceRequest_,
"scripts":co.scriptsRequest_,
"threads":co.threadsRequest_,
"suspend":co.suspendRequest_,
"version":co.versionRequest_,
"changelive":co.changeLiveRequest_,
"restartframe":co.restartFrameRequest_,
"flags":co.debuggerFlagsRequest_,
"v8flag":co.v8FlagsRequest_,
"gc":co.gcRequest_,
};
})();
DebugCommandProcessor.prototype.isRunning=function(){
return this.running_;
};
DebugCommandProcessor.prototype.systemBreak=function(cp,aW){
return %SystemBreak();
};
function ObjectToProtocolObject_(cq,cr){
var cs={};
for(var aX in cq){
if(typeof aX=='string'){
var ct=ValueToProtocolValue_(cq[aX],
cr);
if(!(ct===(void 0))){
cs[aX]=ct;
}
}
}
return cs;
}
function ArrayToProtocolArray_(bj,cr){
var aS=[];
for(var N=0;N<bj.length;N++){
aS.push(ValueToProtocolValue_(bj[N],cr));
}
return aS;
}
function ValueToProtocolValue_(B,cr){
var aS;
switch(typeof B){
case'object':
if(B instanceof m){
aS=cr.serializeValue(B);
}else if((%_IsArray(B))){
aS=ArrayToProtocolArray_(B,cr);
}else{
aS=ObjectToProtocolObject_(B,cr);
}
break;
case'boolean':
case'string':
case'number':
aS=B;
break;
default:
aS=null;
}
return aS;
}
b.InstallConstants(a,[
"Debug",t,
"DebugCommandProcessor",DebugCommandProcessor,
]);
b.InstallFunctions(b,2,[
"MakeExecutionState",MakeExecutionState,
"MakeExceptionEvent",MakeExceptionEvent,
"MakeBreakEvent",MakeBreakEvent,
"MakeCompileEvent",MakeCompileEvent,
"MakePromiseEvent",MakePromiseEvent,
"MakeAsyncTaskEvent",MakeAsyncTaskEvent,
"IsBreakPointTriggered",IsBreakPointTriggered,
"UpdateScriptBreakPoints",UpdateScriptBreakPoints,
]);
b.Export(function(cu){
cu.GetScriptBreakPoints=GetScriptBreakPoints;
});
})

 liveedit©õ
(function(a,b){
"use strict";
var c=a.Debug.findScriptSourcePosition;
var d;
var e=a.Array;
var f=a.Math.floor;
var g=a.SyntaxError;
b.Import(function(h){
d=h.GetScriptBreakPoints;
});
var i;
function ApplyPatchMultiChunk(script,diff_array,new_source,preview_only,
change_log){
var j=script.source;
var k=GatherCompileInfo(j,script);
var l=BuildCodeInfoTree(k);
var m=new PosTranslator(diff_array);
MarkChangedFunctions(l,m.GetChunks());
FindLiveSharedInfos(l,script);
var n;
try{
n=GatherCompileInfo(new_source,script);
}catch(e){
var o=
new Failure("Failed to compile new version of script: "+e);
if(e instanceof g){
var p={
type:"liveedit_compile_error",
syntaxErrorMessage:e.message
};
CopyErrorPositionToDetails(e,p);
o.details=p;
}
throw o;
}
var q=BuildCodeInfoTree(n);
FindCorrespondingFunctions(l,q);
var r=new e();
var s=new e();
var t=new e();
var u=new e();
function HarvestTodo(v){
function CollectDamaged(w){
s.push(w);
for(var x=0;x<w.children.length;x++){
CollectDamaged(w.children[x]);
}
}
function CollectNew(y){
for(var x=0;x<y.length;x++){
t.push(y[x]);
CollectNew(y[x].children);
}
}
if(v.status==i.DAMAGED){
CollectDamaged(v);
return;
}
if(v.status==i.UNCHANGED){
u.push(v);
}else if(v.status==i.SOURCE_CHANGED){
u.push(v);
}else if(v.status==i.CHANGED){
r.push(v);
CollectNew(v.unmatched_new_nodes);
}
for(var x=0;x<v.children.length;x++){
HarvestTodo(v.children[x]);
}
}
var z={
change_tree:DescribeChangeTree(l),
textual_diff:{
old_len:j.length,
new_len:new_source.length,
chunks:diff_array
},
updated:false
};
if(preview_only){
return z;
}
HarvestTodo(l);
var A=new e();
for(var x=0;x<r.length;x++){
var B=
r[x].live_shared_function_infos;
if(B){
for(var C=0;C<B.length;C++){
A.push(B[C]);
}
}
}
var D=
CheckStackActivations(A,change_log);
z.stack_modified=D!=0;
var E=TemporaryRemoveBreakPoints(script,change_log);
var F;
if(s.length==0){
%LiveEditReplaceScript(script,new_source,null);
F=(void 0);
}else{
var G=CreateNameForOldScript(script);
F=%LiveEditReplaceScript(script,new_source,
G);
var H=new e();
change_log.push({linked_to_old_script:H});
for(var x=0;x<s.length;x++){
LinkToOldScript(s[x],F,
H);
}
z.created_script_name=G;
}
for(var x=0;x<t.length;x++){
%LiveEditFunctionSetScript(
t[x].info.shared_function_info,script);
}
for(var x=0;x<r.length;x++){
PatchFunctionCode(r[x],change_log);
}
var I=new e();
change_log.push({position_patched:I});
for(var x=0;x<u.length;x++){
PatchPositions(u[x],diff_array,
I);
if(u[x].live_shared_function_infos){
u[x].live_shared_function_infos.
forEach(function(J){
%LiveEditFunctionSourceUpdated(J.raw_array);
});
}
}
E(m,F);
z.updated=true;
return z;
}
function GatherCompileInfo(K,L){
var M=%LiveEditGatherCompileInfo(L,K);
var N=new e();
var O=new e();
for(var x=0;x<M.length;x++){
var J=new FunctionCompileInfo(M[x]);
%LiveEditFunctionSetScript(J.shared_function_info,(void 0));
N.push(J);
O.push(x);
}
for(var x=0;x<N.length;x++){
var P=x;
for(var C=x+1;C<N.length;C++){
if(N[P].start_position>N[C].start_position){
P=C;
}
}
if(P!=x){
var Q=N[P];
var R=O[P];
N[P]=N[x];
O[P]=O[x];
N[x]=Q;
O[x]=R;
}
}
var S=0;
function ResetIndexes(T,U){
var V=-1;
while(S<N.length&&
N[S].outer_index==U){
var W=S;
N[W].outer_index=T;
if(V!=-1){
N[V].next_sibling_index=W;
}
V=W;
S++;
ResetIndexes(W,O[W]);
}
if(V!=-1){
N[V].next_sibling_index=-1;
}
}
ResetIndexes(-1,-1);
Assert(S==N.length);
return N;
}
function PatchFunctionCode(v,X){
var Y=v.corresponding_node.info;
if(v.live_shared_function_infos){
v.live_shared_function_infos.forEach(function(Z){
%LiveEditReplaceFunctionCode(Y.raw_array,
Z.raw_array);
for(var x=0;x<v.children.length;x++){
if(v.children[x].corresponding_node){
var aa=
v.children[x].corresponding_node.info.
shared_function_info;
if(v.children[x].live_shared_function_infos){
v.children[x].live_shared_function_infos.
forEach(function(ab){
%LiveEditReplaceRefToNestedFunction(
Z.info,
aa,
ab.info);
});
}
}
}
});
X.push({function_patched:Y.function_name});
}else{
X.push({function_patched:Y.function_name,
function_info_not_found:true});
}
}
function LinkToOldScript(ac,F,ad){
if(ac.live_shared_function_infos){
ac.live_shared_function_infos.
forEach(function(J){
%LiveEditFunctionSetScript(J.info,F);
});
ad.push({name:ac.info.function_name});
}else{
ad.push(
{name:ac.info.function_name,not_found:true});
}
}
function TemporaryRemoveBreakPoints(ae,X){
var af=d(ae);
var ag=[];
X.push({break_points_update:ag});
var ah=[];
for(var x=0;x<af.length;x++){
var ai=af[x];
ai.clear();
var aj=c(ae,
ai.line(),ai.column());
var ak={
position:aj,
line:ai.line(),
column:ai.column()
};
ah.push(ak);
}
return function(m,al){
for(var x=0;x<af.length;x++){
var ai=af[x];
if(al){
var am=ai.cloneForOtherScript(al);
am.set(al);
ag.push({
type:"copied_to_old",
id:ai.number(),
new_id:am.number(),
positions:ah[x]
});
}
var an=m.Translate(
ah[x].position,
PosTranslator.ShiftWithTopInsideChunkHandler);
var ao=
ae.locationFromPosition(an,false);
ai.update_positions(ao.line,ao.column);
var ap={
position:an,
line:ao.line,
column:ao.column
};
ai.set(ae);
ag.push({type:"position_changed",
id:ai.number(),
old_positions:ah[x],
new_positions:ap
});
}
};
}
function Assert(aq,ar){
if(!aq){
if(ar){
throw"Assert "+ar;
}else{
throw"Assert";
}
}
}
function DiffChunk(as,at,au,av){
this.pos1=as;
this.pos2=at;
this.len1=au;
this.len2=av;
}
function PosTranslator(aw){
var ax=new e();
var ay=0;
for(var x=0;x<aw.length;x+=3){
var az=aw[x];
var aA=az+ay;
var aB=aw[x+1];
var aC=aw[x+2];
ax.push(new DiffChunk(az,aA,aB-az,
aC-aA));
ay=aC-aB;
}
this.chunks=ax;
}
PosTranslator.prototype.GetChunks=function(){
return this.chunks;
};
PosTranslator.prototype.Translate=function(aD,aE){
var aF=this.chunks;
if(aF.length==0||aD<aF[0].pos1){
return aD;
}
var aG=0;
var aH=aF.length-1;
while(aG<aH){
var aI=f((aG+aH)/2);
if(aD<aF[aI+1].pos1){
aH=aI;
}else{
aG=aI+1;
}
}
var aJ=aF[aG];
if(aD>=aJ.pos1+aJ.len1){
return aD+aJ.pos2+aJ.len2-aJ.pos1-aJ.len1;
}
if(!aE){
aE=PosTranslator.DefaultInsideChunkHandler;
}
return aE(aD,aJ);
};
PosTranslator.DefaultInsideChunkHandler=function(aD,aK){
Assert(false,"Cannot translate position in changed area");
};
PosTranslator.ShiftWithTopInsideChunkHandler=
function(aD,aK){
return aD-aK.pos1+aK.pos2;
};
var i={
UNCHANGED:"unchanged",
SOURCE_CHANGED:"source changed",
CHANGED:"changed",
DAMAGED:"damaged"
};
function CodeInfoTreeNode(aL,aM,aN){
this.info=aL;
this.children=aM;
this.array_index=aN;
this.parent=(void 0);
this.status=i.UNCHANGED;
this.status_explanation=(void 0);
this.new_start_pos=(void 0);
this.new_end_pos=(void 0);
this.corresponding_node=(void 0);
this.unmatched_new_nodes=(void 0);
this.textual_corresponding_node=(void 0);
this.textually_unmatched_new_nodes=(void 0);
this.live_shared_function_infos=(void 0);
}
function BuildCodeInfoTree(aO){
var aP=0;
function BuildNode(){
var aQ=aP;
aP++;
var aR=new e();
while(aP<aO.length&&
aO[aP].outer_index==aQ){
aR.push(BuildNode());
}
var w=new CodeInfoTreeNode(aO[aQ],aR,
aQ);
for(var x=0;x<aR.length;x++){
aR[x].parent=w;
}
return w;
}
var aS=BuildNode();
Assert(aP==aO.length);
return aS;
}
function MarkChangedFunctions(aT,ax){
var aU=new function(){
var aV=0;
var aW=0;
this.current=function(){return ax[aV];};
this.next=function(){
var aJ=ax[aV];
aW=aJ.pos2+aJ.len2-(aJ.pos1+aJ.len1);
aV++;
};
this.done=function(){return aV>=ax.length;};
this.TranslatePos=function(aD){return aD+aW;};
};
function ProcessInternals(aX){
aX.new_start_pos=aU.TranslatePos(
aX.info.start_position);
var aY=0;
var aZ=false;
var ba=false;
while(!aU.done()&&
aU.current().pos1<aX.info.end_position){
if(aY<aX.children.length){
var bb=aX.children[aY];
if(bb.info.end_position<=aU.current().pos1){
ProcessUnchangedChild(bb);
aY++;
continue;
}else if(bb.info.start_position>=
aU.current().pos1+aU.current().len1){
aZ=true;
aU.next();
continue;
}else if(bb.info.start_position<=aU.current().pos1&&
bb.info.end_position>=aU.current().pos1+
aU.current().len1){
ProcessInternals(bb);
ba=ba||
(bb.status!=i.UNCHANGED);
aZ=aZ||
(bb.status==i.DAMAGED);
aY++;
continue;
}else{
aZ=true;
bb.status=i.DAMAGED;
bb.status_explanation=
"Text diff overlaps with function boundary";
aY++;
continue;
}
}else{
if(aU.current().pos1+aU.current().len1<=
aX.info.end_position){
aX.status=i.CHANGED;
aU.next();
continue;
}else{
aX.status=i.DAMAGED;
aX.status_explanation=
"Text diff overlaps with function boundary";
return;
}
}
Assert("Unreachable",false);
}
while(aY<aX.children.length){
var bb=aX.children[aY];
ProcessUnchangedChild(bb);
aY++;
}
if(aZ){
aX.status=i.CHANGED;
}else if(ba){
aX.status=i.SOURCE_CHANGED;
}
aX.new_end_pos=
aU.TranslatePos(aX.info.end_position);
}
function ProcessUnchangedChild(w){
w.new_start_pos=aU.TranslatePos(w.info.start_position);
w.new_end_pos=aU.TranslatePos(w.info.end_position);
}
ProcessInternals(aT);
}
function FindCorrespondingFunctions(bc,bd){
function ProcessNode(v,be){
var bf=
IsFunctionContextLocalsChanged(v.info,be.info);
if(bf){
v.status=i.CHANGED;
}
var bg=v.children;
var bh=be.children;
var bi=[];
var bj=[];
var bk=0;
var bl=0;
while(bk<bg.length){
if(bg[bk].status==i.DAMAGED){
bk++;
}else if(bl<bh.length){
if(bh[bl].info.start_position<
bg[bk].new_start_pos){
bi.push(bh[bl]);
bj.push(bh[bl]);
bl++;
}else if(bh[bl].info.start_position==
bg[bk].new_start_pos){
if(bh[bl].info.end_position==
bg[bk].new_end_pos){
bg[bk].corresponding_node=
bh[bl];
bg[bk].textual_corresponding_node=
bh[bl];
if(bf){
bg[bk].status=i.DAMAGED;
bg[bk].status_explanation=
"Enclosing function is now incompatible. "+
bf;
bg[bk].corresponding_node=(void 0);
}else if(bg[bk].status!=
i.UNCHANGED){
ProcessNode(bg[bk],
bh[bl]);
if(bg[bk].status==i.DAMAGED){
bi.push(
bg[bk].corresponding_node);
bg[bk].corresponding_node=(void 0);
v.status=i.CHANGED;
}
}
}else{
bg[bk].status=i.DAMAGED;
bg[bk].status_explanation=
"No corresponding function in new script found";
v.status=i.CHANGED;
bi.push(bh[bl]);
bj.push(bh[bl]);
}
bl++;
bk++;
}else{
bg[bk].status=i.DAMAGED;
bg[bk].status_explanation=
"No corresponding function in new script found";
v.status=i.CHANGED;
bk++;
}
}else{
bg[bk].status=i.DAMAGED;
bg[bk].status_explanation=
"No corresponding function in new script found";
v.status=i.CHANGED;
bk++;
}
}
while(bl<bh.length){
bi.push(bh[bl]);
bj.push(bh[bl]);
bl++;
}
if(v.status==i.CHANGED){
if(v.info.param_num!=be.info.param_num){
v.status=i.DAMAGED;
v.status_explanation="Changed parameter number: "+
v.info.param_num+" and "+be.info.param_num;
}
}
v.unmatched_new_nodes=bi;
v.textually_unmatched_new_nodes=
bj;
}
ProcessNode(bc,bd);
bc.corresponding_node=bd;
bc.textual_corresponding_node=bd;
Assert(bc.status!=i.DAMAGED,
"Script became damaged");
}
function FindLiveSharedInfos(bc,L){
var bm=%LiveEditFindSharedFunctionInfosForScript(L);
var bn=new e();
for(var x=0;x<bm.length;x++){
bn.push(new SharedInfoWrapper(bm[x]));
}
function FindFunctionInfos(N){
var bo=[];
for(var x=0;x<bn.length;x++){
var bp=bn[x];
if(bp.start_position==N.start_position&&
bp.end_position==N.end_position){
bo.push(bp);
}
}
if(bo.length>0){
return bo;
}
}
function TraverseTree(w){
w.live_shared_function_infos=FindFunctionInfos(w.info);
for(var x=0;x<w.children.length;x++){
TraverseTree(w.children[x]);
}
}
TraverseTree(bc);
}
function FunctionCompileInfo(bq){
this.function_name=bq[0];
this.start_position=bq[1];
this.end_position=bq[2];
this.param_num=bq[3];
this.code=bq[4];
this.code_scope_info=bq[5];
this.scope_info=bq[6];
this.outer_index=bq[7];
this.shared_function_info=bq[8];
this.next_sibling_index=null;
this.raw_array=bq;
}
function SharedInfoWrapper(bq){
this.function_name=bq[0];
this.start_position=bq[1];
this.end_position=bq[2];
this.info=bq[3];
this.raw_array=bq;
}
function PatchPositions(ac,aw,ad){
if(ac.live_shared_function_infos){
ac.live_shared_function_infos.forEach(function(J){
%LiveEditPatchFunctionPositions(J.raw_array,
aw);
});
ad.push({name:ac.info.function_name});
}else{
ad.push(
{name:ac.info.function_name,info_not_found:true});
}
}
function CreateNameForOldScript(L){
return L.name+" (old)";
}
function IsFunctionContextLocalsChanged(br,bs){
var bt=br.scope_info;
var bu=bs.scope_info;
var bv;
var bw;
if(bt){
bv=bt.toString();
}else{
bv="";
}
if(bu){
bw=bu.toString();
}else{
bw="";
}
if(bv!=bw){
return"Variable map changed: ["+bv+
"] => ["+bw+"]";
}
return;
}
var bx;
function CheckStackActivations(by,X){
var bz=new e();
for(var x=0;x<by.length;x++){
bz[x]=by[x].info;
}
var bA=%LiveEditCheckAndDropActivations(bz,true);
if(bA[bz.length]){
throw new Failure(bA[bz.length]);
}
var bB=new e();
var bC=new e();
for(var x=0;x<bz.length;x++){
var bD=by[x];
if(bA[x]==bx.REPLACED_ON_ACTIVE_STACK){
bC.push({name:bD.function_name});
}else if(bA[x]!=bx.AVAILABLE_FOR_PATCH){
var bE={
name:bD.function_name,
start_pos:bD.start_position,
end_pos:bD.end_position,
replace_problem:
bx.SymbolName(bA[x])
};
bB.push(bE);
}
}
if(bC.length>0){
X.push({dropped_from_stack:bC});
}
if(bB.length>0){
X.push({functions_on_stack:bB});
throw new Failure("Blocked by functions on stack");
}
return bC.length;
}
var bx={
AVAILABLE_FOR_PATCH:1,
BLOCKED_ON_ACTIVE_STACK:2,
BLOCKED_ON_OTHER_STACK:3,
BLOCKED_UNDER_NATIVE_CODE:4,
REPLACED_ON_ACTIVE_STACK:5,
BLOCKED_UNDER_GENERATOR:6,
BLOCKED_ACTIVE_GENERATOR:7
};
bx.SymbolName=function(bF){
var bG=bx;
for(var bH in bG){
if(bG[bH]==bF){
return bH;
}
}
};
function Failure(ar){
this.message=ar;
}
Failure.prototype.toString=function(){
return"LiveEdit Failure: "+this.message;
};
function CopyErrorPositionToDetails(bI,p){
function createPositionStruct(L,bJ){
if(bJ==-1)return;
var bK=L.locationFromPosition(bJ,true);
if(bK==null)return;
return{
line:bK.line+1,
column:bK.column+1,
position:bJ
};
}
if(!("scriptObject"in bI)||!("startPosition"in bI)){
return;
}
var L=bI.scriptObject;
var bL={
start:createPositionStruct(L,bI.startPosition),
end:createPositionStruct(L,bI.endPosition)
};
p.position=bL;
}
function GetPcFromSourcePos(bM,bN){
return %GetFunctionCodePositionFromSource(bM,bN);
}
function SetScriptSource(L,bO,bP,X){
var j=L.source;
var bQ=CompareStrings(j,bO);
return ApplyPatchMultiChunk(L,bQ,bO,bP,
X);
}
function CompareStrings(bR,bS){
return %LiveEditCompareStrings(bR,bS);
}
function ApplySingleChunkPatch(L,change_pos,change_len,new_str,
X){
var j=L.source;
var bO=j.substring(0,change_pos)+
new_str+j.substring(change_pos+change_len);
return ApplyPatchMultiChunk(L,
[change_pos,change_pos+change_len,change_pos+new_str.length],
bO,false,X);
}
function DescribeChangeTree(bc){
function ProcessOldNode(w){
var bT=[];
for(var x=0;x<w.children.length;x++){
var bb=w.children[x];
if(bb.status!=i.UNCHANGED){
bT.push(ProcessOldNode(bb));
}
}
var bU=[];
if(w.textually_unmatched_new_nodes){
for(var x=0;x<w.textually_unmatched_new_nodes.length;x++){
var bb=w.textually_unmatched_new_nodes[x];
bU.push(ProcessNewNode(bb));
}
}
var bV={
name:w.info.function_name,
positions:DescribePositions(w),
status:w.status,
children:bT,
new_children:bU
};
if(w.status_explanation){
bV.status_explanation=w.status_explanation;
}
if(w.textual_corresponding_node){
bV.new_positions=DescribePositions(w.textual_corresponding_node);
}
return bV;
}
function ProcessNewNode(w){
var bT=[];
if(false){
for(var x=0;x<w.children.length;x++){
bT.push(ProcessNewNode(w.children[x]));
}
}
var bV={
name:w.info.function_name,
positions:DescribePositions(w),
children:bT,
};
return bV;
}
function DescribePositions(w){
return{
start_position:w.info.start_position,
end_position:w.info.end_position
};
}
return ProcessOldNode(bc);
}
var bW={};
bW.SetScriptSource=SetScriptSource;
bW.ApplyPatchMultiChunk=ApplyPatchMultiChunk;
bW.Failure=Failure;
bW.GetPcFromSourcePos=GetPcFromSourcePos;
bW.TestApi={
PosTranslator:PosTranslator,
CompareStrings:CompareStrings,
ApplySingleChunkPatch:ApplySingleChunkPatch
};
a.Debug.LiveEdit=bW;
})

p prologueÑD
(function(a,b,c){
"use strict";
%CheckIsBootstrapping();
var d=(void 0);
var e=(void 0);
var f=%ExportFromRuntime({});
function Export(g){
g(f);
}
function Import(g){
g.next=d;
d=g;
}
function ImportNow(h){
return f[h];
}
function ImportFromExperimental(g){
g.next=e;
e=g;
}
function SetFunctionName(g,h,i){
if((typeof(h)==='symbol')){
h="["+%SymbolDescription(h)+"]";
}
if((i===(void 0))){
%FunctionSetName(g,h);
}else{
%FunctionSetName(g,i+" "+h);
}
}
function InstallConstants(j,k){
%CheckIsBootstrapping();
%OptimizeObjectForAddingMultipleProperties(j,k.length>>1);
var l=2|4|1;
for(var m=0;m<k.length;m+=2){
var h=k[m];
var n=k[m+1];
%AddNamedProperty(j,h,n,l);
}
%ToFastProperties(j);
}
function InstallFunctions(j,l,o){
%CheckIsBootstrapping();
%OptimizeObjectForAddingMultipleProperties(j,o.length>>1);
for(var m=0;m<o.length;m+=2){
var p=o[m];
var g=o[m+1];
SetFunctionName(g,p);
%FunctionRemovePrototype(g);
%AddNamedProperty(j,p,g,l);
%SetNativeFlag(g);
}
%ToFastProperties(j);
}
function InstallGetter(j,h,q,l){
%CheckIsBootstrapping();
if(typeof l=="undefined"){
l=2;
}
SetFunctionName(q,h,"get");
%FunctionRemovePrototype(q);
%DefineAccessorPropertyUnchecked(j,h,q,null,l);
%SetNativeFlag(q);
}
function InstallGetterSetter(j,h,q,r){
%CheckIsBootstrapping();
SetFunctionName(q,h,"get");
SetFunctionName(r,h,"set");
%FunctionRemovePrototype(q);
%FunctionRemovePrototype(r);
%DefineAccessorPropertyUnchecked(j,h,q,r,2);
%SetNativeFlag(q);
%SetNativeFlag(r);
}
function SetUpLockedPrototype(
constructor,fields,methods){
%CheckIsBootstrapping();
var s=constructor.prototype;
var t=(methods.length>>1)+(fields?fields.length:0);
if(t>=4){
%OptimizeObjectForAddingMultipleProperties(s,t);
}
if(fields){
for(var m=0;m<fields.length;m++){
%AddNamedProperty(s,fields[m],
(void 0),2|4);
}
}
for(var m=0;m<methods.length;m+=2){
var p=methods[m];
var g=methods[m+1];
%AddNamedProperty(s,p,g,2|4|1);
%SetNativeFlag(g);
}
%InternalSetPrototype(s,null);
%ToFastProperties(s);
}
function PostNatives(b){
%CheckIsBootstrapping();
for(;!(d===(void 0));d=d.next){
d(f);
}
var u=[
"ArrayToString",
"FunctionSourceString",
"GetIterator",
"GetMethod",
"InnerArrayEvery",
"InnerArrayFilter",
"InnerArrayForEach",
"InnerArrayIndexOf",
"InnerArrayJoin",
"InnerArrayLastIndexOf",
"InnerArrayMap",
"InnerArrayReduce",
"InnerArrayReduceRight",
"InnerArrayReverse",
"InnerArraySome",
"InnerArraySort",
"InnerArrayToLocaleString",
"IsNaN",
"MathMax",
"MathMin",
"ObjectIsFrozen",
"ObjectDefineProperty",
"OwnPropertyKeys",
"SymbolToString",
"ToNameArray",
"ToBoolean",
"is_concat_spreadable_symbol",
"iterator_symbol",
"promise_status_symbol",
"promise_value_symbol",
"reflect_apply",
"reflect_construct",
"to_string_tag_symbol",
];
var v={};
%OptimizeObjectForAddingMultipleProperties(
v,u.length);
for(var p of u){
v[p]=f[p];
}
%ToFastProperties(v);
f=v;
b.PostNatives=(void 0);
b.ImportFromExperimental=(void 0);
}
function PostExperimentals(b){
%CheckIsBootstrapping();
%ExportExperimentalFromRuntime(f);
for(;!(d===(void 0));d=d.next){
d(f);
}
for(;!(e===(void 0));
e=e.next){
e(f);
}
f=(void 0);
b.PostExperimentals=(void 0);
b.PostDebug=(void 0);
b.Import=(void 0);
b.Export=(void 0);
}
function PostDebug(b){
for(;!(d===(void 0));d=d.next){
d(f);
}
f=(void 0);
b.PostDebug=(void 0);
b.PostExperimentals=(void 0);
b.Import=(void 0);
b.Export=(void 0);
}
%OptimizeObjectForAddingMultipleProperties(b,13);
b.Import=Import;
b.ImportNow=ImportNow;
b.Export=Export;
b.ImportFromExperimental=ImportFromExperimental;
b.SetFunctionName=SetFunctionName;
b.InstallConstants=InstallConstants;
b.InstallFunctions=InstallFunctions;
b.InstallGetter=InstallGetter;
b.InstallGetterSetter=InstallGetterSetter;
b.SetUpLockedPrototype=SetUpLockedPrototype;
b.PostNatives=PostNatives;
b.PostExperimentals=PostExperimentals;
b.PostDebug=PostDebug;
%ToFastProperties(b);
%OptimizeObjectForAddingMultipleProperties(c,5);
c.logStackTrace=function logStackTrace(){
%DebugTrace();
};
c.log=function log(){
let message='';
for(const arg of arguments){
message+=arg;
}
%GlobalPrint(message);
};
c.createPrivateSymbol=function createPrivateSymbol(h){
return %CreatePrivateSymbol(h);
};
c.simpleBind=function simpleBind(w,x){
return function(){
return %Apply(w,x,arguments,0,arguments.length);
};
};
c.uncurryThis=function uncurryThis(w){
return function(x){
return %Apply(w,x,arguments,1,arguments.length-1);
};
};
%ToFastProperties(c);
})

runtime6
var $NaN;
var $sameValue;
var $sameValueZero;
var $toPositiveInteger;
var harmony_tolength=false;
(function(a,b){
%CheckIsBootstrapping();
var c=a.Array;
var d=a.Boolean;
var e=a.String;
var f=
b.ImportNow("is_concat_spreadable_symbol");
function APPLY_PREPARE(g){
var h;
if(!(typeof(this)==='function')){
throw %make_type_error(9,(%_ToString(this)),typeof this);
}
if((%_IsArray(g))){
h=g.length;
if(%_IsSmi(h)&&h>=0&&h<0x800000){
return h;
}
}
h=(g==null)?0:(g.length>>>0);
if(h>0x800000)throw %make_range_error(151);
if(g!=null&&!(%_IsSpecObject(g))){
throw %make_type_error(122,"Function.prototype.apply");
}
return h;
}
function REFLECT_APPLY_PREPARE(g){
var h;
if(!(typeof(this)==='function')){
throw %make_type_error(9,(%_ToString(this)),typeof this);
}
if((%_IsArray(g))){
h=g.length;
if(%_IsSmi(h)&&h>=0&&h<0x800000){
return h;
}
}
if(!(%_IsSpecObject(g))){
throw %make_type_error(122,"Reflect.apply");
}
h=(%ToLength(g.length));
if(h>0x800000)throw %make_range_error(151);
return h;
}
function REFLECT_CONSTRUCT_PREPARE(
g,newTarget){
var h;
var i=(typeof(this)==='function')&&%IsConstructor(this);
var j=(typeof(newTarget)==='function')&&%IsConstructor(newTarget);
if((%_IsArray(g))){
h=g.length;
if(%_IsSmi(h)&&h>=0&&h<0x800000&&
i&&j){
return h;
}
}
if(!i){
if(!(typeof(this)==='function')){
throw %make_type_error(13,(%_ToString(this)));
}else{
throw %make_type_error(55,(%_ToString(this)));
}
}
if(!j){
if(!(typeof(newTarget)==='function')){
throw %make_type_error(13,(%_ToString(newTarget)));
}else{
throw %make_type_error(55,(%_ToString(newTarget)));
}
}
if(!(%_IsSpecObject(g))){
throw %make_type_error(122,"Reflect.construct");
}
h=(%ToLength(g.length));
if(h>0x800000)throw %make_range_error(151);
return h;
}
function CONCAT_ITERABLE_TO_ARRAY(k){
return %concat_iterable_to_array(this,k);
};
function ToBoolean(l){
if((typeof(l)==='boolean'))return l;
if((typeof(l)==='string'))return l.length!=0;
if(l==null)return false;
if((typeof(l)==='number'))return!((l==0)||(!%_IsSmi(%IS_VAR(l))&&!(l==l)));
return true;
}
function SameValue(l,m){
if(typeof l!=typeof m)return false;
if((typeof(l)==='number')){
if((!%_IsSmi(%IS_VAR(l))&&!(l==l))&&(!%_IsSmi(%IS_VAR(m))&&!(m==m)))return true;
if(l===0&&m===0&&%_IsMinusZero(l)!=%_IsMinusZero(m)){
return false;
}
}
if((%_IsSimdValue(l)))return %SimdSameValue(l,m);
return l===m;
}
function SameValueZero(l,m){
if(typeof l!=typeof m)return false;
if((typeof(l)==='number')){
if((!%_IsSmi(%IS_VAR(l))&&!(l==l))&&(!%_IsSmi(%IS_VAR(m))&&!(m==m)))return true;
}
if((%_IsSimdValue(l)))return %SimdSameValueZero(l,m);
return l===m;
}
function ConcatIterableToArray(n,k){
var o=n.length;
for(var p of k){
%AddElement(n,o++,p);
}
return n;
}
function IsConcatSpreadable(q){
if(!(%_IsSpecObject(q)))return false;
var r=q[f];
if((r===(void 0)))return(%_IsArray(q));
return ToBoolean(r);
}
function ToPositiveInteger(l,s){
var t=(%_IsSmi(%IS_VAR(l))?l:%NumberToIntegerMapMinusZero(l));
if(t<0)throw MakeRangeError(s);
return t;
}
%FunctionSetPrototype(c,new c(0));
$NaN=%GetRootNaN();
$sameValue=SameValue;
$sameValueZero=SameValueZero;
$toPositiveInteger=ToPositiveInteger;
%InstallToContext([
"apply_prepare_builtin",APPLY_PREPARE,
"concat_iterable_to_array_builtin",CONCAT_ITERABLE_TO_ARRAY,
"reflect_apply_prepare_builtin",REFLECT_APPLY_PREPARE,
"reflect_construct_prepare_builtin",REFLECT_CONSTRUCT_PREPARE,
]);
%InstallToContext([
"concat_iterable_to_array",ConcatIterableToArray,
]);
b.Export(function(u){
u.ToBoolean=ToBoolean;
});
})

$v8nativesfÊ
(function(a,b){
%CheckIsBootstrapping();
var c;
var d=a.Array;
var e=a.Boolean;
var f=a.Function;
var g=a.Number;
var h=a.Object;
var i=b.InternalArray;
var j=b.ImportNow("iterator_symbol");
var k;
var l;
var m;
var n;
var o;
var p=b.ImportNow("ToBoolean");
var q=b.ImportNow("to_string_tag_symbol");
b.Import(function(r){
k=r.MathAbs;
o=r.StringIndexOf;
});
b.ImportFromExperimental(function(r){
c=r.FLAG_harmony_tostring;
l=r.ProxyDelegateCallAndConstruct;
m=r.ProxyDerivedHasOwnTrap;
n=r.ProxyDerivedKeysTrap;
});
function GlobalIsNaN(s){
s=(%_ToNumber(s));
return(!%_IsSmi(%IS_VAR(s))&&!(s==s));
}
function GlobalIsFinite(s){
s=(%_ToNumber(s));
return(%_IsSmi(%IS_VAR(s))||((s==s)&&(s!=1/0)&&(s!=-1/0)));
}
function GlobalParseInt(t,u){
if((u===(void 0))||u===10||u===0){
if(%_IsSmi(t))return t;
if((typeof(t)==='number')&&
((0.01<t&&t<1e9)||
(-1e9<t&&t<-0.01))){
return t|0;
}
t=(%_ToString(t));
u=u|0;
}else{
t=(%_ToString(t));
u=(u|0);
if(!(u==0||(2<=u&&u<=36))){
return $NaN;
}
}
if(%_HasCachedArrayIndex(t)&&
(u==0||u==10)){
return %_GetCachedArrayIndex(t);
}
return %StringParseInt(t,u);
}
function GlobalParseFloat(t){
t=(%_ToString(t));
if(%_HasCachedArrayIndex(t))return %_GetCachedArrayIndex(t);
return %StringParseFloat(t);
}
function GlobalEval(v){
if(!(typeof(v)==='string'))return v;
var w=%GlobalProxy(GlobalEval);
var x=%CompileString(v,false);
if(!(%_IsFunction(x)))return x;
return %_CallFunction(w,x);
}
var y=2|4|1;
b.InstallConstants(a,[
"NaN",$NaN,
"Infinity",(1/0),
"undefined",(void 0),
]);
b.InstallFunctions(a,2,[
"isNaN",GlobalIsNaN,
"isFinite",GlobalIsFinite,
"parseInt",GlobalParseInt,
"parseFloat",GlobalParseFloat,
"eval",GlobalEval
]);
function ObjectToString(){
if((this===(void 0)))return"[object Undefined]";
if((this===null))return"[object Null]";
var z=(%_ToObject(this));
var A=%_ClassOf(z);
var B;
if(c){
B=z[q];
if(!(typeof(B)==='string')){
B=A;
}
}else{
B=A;
}
return`[object ${B}]`;
}
function ObjectToLocaleString(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Object.prototype.toLocaleString");
return this.toString();
}
function ObjectValueOf(){
return(%_ToObject(this));
}
function ObjectHasOwnProperty(C){
var D=(%_ToName(C));
var E=(%_ToObject(this));
if(%_IsJSProxy(E)){
if((typeof(C)==='symbol'))return false;
var F=%GetHandler(E);
return CallTrap1(F,"hasOwn",m,D);
}
return %HasOwnProperty(E,D);
}
function ObjectIsPrototypeOf(G){
if(!(%_IsSpecObject(G)))return false;
var z=(%_ToObject(this));
return %_HasInPrototypeChain(G,z);
}
function ObjectPropertyIsEnumerable(G){
var H=(%_ToName(G));
if(%_IsJSProxy(this)){
if((typeof(G)==='symbol'))return false;
var I=GetOwnPropertyJS(this,H);
return(I===(void 0))?false:I.isEnumerable();
}
return %IsPropertyEnumerable((%_ToObject(this)),H);
}
function ObjectDefineGetter(D,J){
var K=this;
if((K===null)||(K===(void 0))){
K=%GlobalProxy(ObjectDefineGetter);
}
if(!(typeof(J)==='function')){
throw MakeTypeError(64);
}
var I=new PropertyDescriptor();
I.setGet(J);
I.setEnumerable(true);
I.setConfigurable(true);
DefineOwnProperty((%_ToObject(K)),(%_ToName(D)),I,false);
}
function ObjectLookupGetter(D){
var K=this;
if((K===null)||(K===(void 0))){
K=%GlobalProxy(ObjectLookupGetter);
}
return %LookupAccessor((%_ToObject(K)),(%_ToName(D)),0);
}
function ObjectDefineSetter(D,J){
var K=this;
if((K===null)||(K===(void 0))){
K=%GlobalProxy(ObjectDefineSetter);
}
if(!(typeof(J)==='function')){
throw MakeTypeError(67);
}
var I=new PropertyDescriptor();
I.setSet(J);
I.setEnumerable(true);
I.setConfigurable(true);
DefineOwnProperty((%_ToObject(K)),(%_ToName(D)),I,false);
}
function ObjectLookupSetter(D){
var K=this;
if((K===null)||(K===(void 0))){
K=%GlobalProxy(ObjectLookupSetter);
}
return %LookupAccessor((%_ToObject(K)),(%_ToName(D)),1);
}
function ObjectKeys(L){
L=(%_ToObject(L));
if(%_IsJSProxy(L)){
var F=%GetHandler(L);
var M=CallTrap0(F,"keys",n);
return ToNameArray(M,"keys",false);
}
return %OwnKeys(L);
}
function IsAccessorDescriptor(I){
if((I===(void 0)))return false;
return I.hasGetter()||I.hasSetter();
}
function IsDataDescriptor(I){
if((I===(void 0)))return false;
return I.hasValue()||I.hasWritable();
}
function IsGenericDescriptor(I){
if((I===(void 0)))return false;
return!(IsAccessorDescriptor(I)||IsDataDescriptor(I));
}
function IsInconsistentDescriptor(I){
return IsAccessorDescriptor(I)&&IsDataDescriptor(I);
}
function FromPropertyDescriptor(I){
if((I===(void 0)))return I;
if(IsDataDescriptor(I)){
return{value:I.getValue(),
writable:I.isWritable(),
enumerable:I.isEnumerable(),
configurable:I.isConfigurable()};
}
return{get:I.getGet(),
set:I.getSet(),
enumerable:I.isEnumerable(),
configurable:I.isConfigurable()};
}
function FromGenericPropertyDescriptor(I){
if((I===(void 0)))return I;
var L=new h();
if(I.hasValue()){
%AddNamedProperty(L,"value",I.getValue(),0);
}
if(I.hasWritable()){
%AddNamedProperty(L,"writable",I.isWritable(),0);
}
if(I.hasGetter()){
%AddNamedProperty(L,"get",I.getGet(),0);
}
if(I.hasSetter()){
%AddNamedProperty(L,"set",I.getSet(),0);
}
if(I.hasEnumerable()){
%AddNamedProperty(L,"enumerable",I.isEnumerable(),0);
}
if(I.hasConfigurable()){
%AddNamedProperty(L,"configurable",I.isConfigurable(),0);
}
return L;
}
function ToPropertyDescriptor(L){
if(!(%_IsSpecObject(L)))throw MakeTypeError(81,L);
var I=new PropertyDescriptor();
if("enumerable"in L){
I.setEnumerable(p(L.enumerable));
}
if("configurable"in L){
I.setConfigurable(p(L.configurable));
}
if("value"in L){
I.setValue(L.value);
}
if("writable"in L){
I.setWritable(p(L.writable));
}
if("get"in L){
var N=L.get;
if(!(N===(void 0))&&!(typeof(N)==='function')){
throw MakeTypeError(65,N);
}
I.setGet(N);
}
if("set"in L){
var O=L.set;
if(!(O===(void 0))&&!(typeof(O)==='function')){
throw MakeTypeError(68,O);
}
I.setSet(O);
}
if(IsInconsistentDescriptor(I)){
throw MakeTypeError(119,L);
}
return I;
}
function ToCompletePropertyDescriptor(L){
var I=ToPropertyDescriptor(L);
if(IsGenericDescriptor(I)||IsDataDescriptor(I)){
if(!I.hasValue())I.setValue((void 0));
if(!I.hasWritable())I.setWritable(false);
}else{
if(!I.hasGetter())I.setGet((void 0));
if(!I.hasSetter())I.setSet((void 0));
}
if(!I.hasEnumerable())I.setEnumerable(false);
if(!I.hasConfigurable())I.setConfigurable(false);
return I;
}
function PropertyDescriptor(){
this.value_=(void 0);
this.hasValue_=false;
this.writable_=false;
this.hasWritable_=false;
this.enumerable_=false;
this.hasEnumerable_=false;
this.configurable_=false;
this.hasConfigurable_=false;
this.get_=(void 0);
this.hasGetter_=false;
this.set_=(void 0);
this.hasSetter_=false;
}
b.SetUpLockedPrototype(PropertyDescriptor,[
"value_",
"hasValue_",
"writable_",
"hasWritable_",
"enumerable_",
"hasEnumerable_",
"configurable_",
"hasConfigurable_",
"get_",
"hasGetter_",
"set_",
"hasSetter_"
],[
"toString",function PropertyDescriptor_ToString(){
return"[object PropertyDescriptor]";
},
"setValue",function PropertyDescriptor_SetValue(C){
this.value_=C;
this.hasValue_=true;
},
"getValue",function PropertyDescriptor_GetValue(){
return this.value_;
},
"hasValue",function PropertyDescriptor_HasValue(){
return this.hasValue_;
},
"setEnumerable",function PropertyDescriptor_SetEnumerable(P){
this.enumerable_=P;
this.hasEnumerable_=true;
},
"isEnumerable",function PropertyDescriptor_IsEnumerable(){
return this.enumerable_;
},
"hasEnumerable",function PropertyDescriptor_HasEnumerable(){
return this.hasEnumerable_;
},
"setWritable",function PropertyDescriptor_SetWritable(Q){
this.writable_=Q;
this.hasWritable_=true;
},
"isWritable",function PropertyDescriptor_IsWritable(){
return this.writable_;
},
"hasWritable",function PropertyDescriptor_HasWritable(){
return this.hasWritable_;
},
"setConfigurable",
function PropertyDescriptor_SetConfigurable(R){
this.configurable_=R;
this.hasConfigurable_=true;
},
"hasConfigurable",function PropertyDescriptor_HasConfigurable(){
return this.hasConfigurable_;
},
"isConfigurable",function PropertyDescriptor_IsConfigurable(){
return this.configurable_;
},
"setGet",function PropertyDescriptor_SetGetter(N){
this.get_=N;
this.hasGetter_=true;
},
"getGet",function PropertyDescriptor_GetGetter(){
return this.get_;
},
"hasGetter",function PropertyDescriptor_HasGetter(){
return this.hasGetter_;
},
"setSet",function PropertyDescriptor_SetSetter(O){
this.set_=O;
this.hasSetter_=true;
},
"getSet",function PropertyDescriptor_GetSetter(){
return this.set_;
},
"hasSetter",function PropertyDescriptor_HasSetter(){
return this.hasSetter_;
}
]);
function ConvertDescriptorArrayToDescriptor(S){
if((S===(void 0))){
return(void 0);
}
var I=new PropertyDescriptor();
if(S[0]){
I.setGet(S[2]);
I.setSet(S[3]);
}else{
I.setValue(S[1]);
I.setWritable(S[4]);
}
I.setEnumerable(S[5]);
I.setConfigurable(S[6]);
return I;
}
function GetTrap(F,D,T){
var U=F[D];
if((U===(void 0))){
if((T===(void 0))){
throw MakeTypeError(88,F,D);
}
U=T;
}else if(!(typeof(U)==='function')){
throw MakeTypeError(89,F,D);
}
return U;
}
function CallTrap0(F,D,T){
return %_CallFunction(F,GetTrap(F,D,T));
}
function CallTrap1(F,D,T,v){
return %_CallFunction(F,v,GetTrap(F,D,T));
}
function CallTrap2(F,D,T,v,V){
return %_CallFunction(F,v,V,GetTrap(F,D,T));
}
function GetOwnPropertyJS(L,W){
var X=(%_ToName(W));
if(%_IsJSProxy(L)){
if((typeof(W)==='symbol'))return(void 0);
var F=%GetHandler(L);
var Y=CallTrap1(
F,"getOwnPropertyDescriptor",(void 0),X);
if((Y===(void 0)))return Y;
var I=ToCompletePropertyDescriptor(Y);
if(!I.isConfigurable()){
throw MakeTypeError(92,
F,X,"getOwnPropertyDescriptor");
}
return I;
}
var Z=%GetOwnProperty((%_ToObject(L)),X);
return ConvertDescriptorArrayToDescriptor(Z);
}
function Delete(L,X,aa){
var I=GetOwnPropertyJS(L,X);
if((I===(void 0)))return true;
if(I.isConfigurable()){
%DeleteProperty_Sloppy(L,X);
return true;
}else if(aa){
throw MakeTypeError(27,X);
}else{
return;
}
}
function GetMethod(L,X){
var ab=L[X];
if((ab==null))return(void 0);
if((typeof(ab)==='function'))return ab;
throw MakeTypeError(13,typeof ab);
}
function DefineProxyProperty(L,X,y,aa){
if((typeof(X)==='symbol'))return false;
var F=%GetHandler(L);
var ac=CallTrap2(F,"defineProperty",(void 0),X,y);
if(!p(ac)){
if(aa){
throw MakeTypeError(87,
F,"false","defineProperty");
}else{
return false;
}
}
return true;
}
function DefineObjectProperty(L,X,I,aa){
var ad=%GetOwnProperty(L,(%_ToName(X)));
var ae=ConvertDescriptorArrayToDescriptor(ad);
var af=%IsExtensible(L);
if((ae===(void 0))&&!af){
if(aa){
throw MakeTypeError(27,X);
}else{
return false;
}
}
if(!(ae===(void 0))){
if((IsGenericDescriptor(I)||
IsDataDescriptor(I)==IsDataDescriptor(ae))&&
(!I.hasEnumerable()||
$sameValue(I.isEnumerable(),ae.isEnumerable()))&&
(!I.hasConfigurable()||
$sameValue(I.isConfigurable(),ae.isConfigurable()))&&
(!I.hasWritable()||
$sameValue(I.isWritable(),ae.isWritable()))&&
(!I.hasValue()||
$sameValue(I.getValue(),ae.getValue()))&&
(!I.hasGetter()||
$sameValue(I.getGet(),ae.getGet()))&&
(!I.hasSetter()||
$sameValue(I.getSet(),ae.getSet()))){
return true;
}
if(!ae.isConfigurable()){
if(I.isConfigurable()||
(I.hasEnumerable()&&
I.isEnumerable()!=ae.isEnumerable())){
if(aa){
throw MakeTypeError(95,X);
}else{
return false;
}
}
if(!IsGenericDescriptor(I)){
if(IsDataDescriptor(ae)!=IsDataDescriptor(I)){
if(aa){
throw MakeTypeError(95,X);
}else{
return false;
}
}
if(IsDataDescriptor(ae)&&IsDataDescriptor(I)){
var ag=ae.isWritable();
if(ag!=I.isWritable()){
if(!ag||(%IsStrong(L))){
if(aa){
throw ag
?MakeTypeError(112,L,X)
:MakeTypeError(95,X);
}else{
return false;
}
}
}
if(!ag&&I.hasValue()&&
!$sameValue(I.getValue(),ae.getValue())){
if(aa){
throw MakeTypeError(95,X);
}else{
return false;
}
}
}
if(IsAccessorDescriptor(I)&&IsAccessorDescriptor(ae)){
if(I.hasSetter()&&
!$sameValue(I.getSet(),ae.getSet())){
if(aa){
throw MakeTypeError(95,X);
}else{
return false;
}
}
if(I.hasGetter()&&!$sameValue(I.getGet(),ae.getGet())){
if(aa){
throw MakeTypeError(95,X);
}else{
return false;
}
}
}
}
}
}
var ah=0;
if(I.hasEnumerable()){
ah|=I.isEnumerable()?0:2;
}else if(!(ae===(void 0))){
ah|=ae.isEnumerable()?0:2;
}else{
ah|=2;
}
if(I.hasConfigurable()){
ah|=I.isConfigurable()?0:4;
}else if(!(ae===(void 0))){
ah|=ae.isConfigurable()?0:4;
}else
ah|=4;
if(IsDataDescriptor(I)||
(IsGenericDescriptor(I)&&
((ae===(void 0))||IsDataDescriptor(ae)))){
if(I.hasWritable()){
ah|=I.isWritable()?0:1;
}else if(!(ae===(void 0))){
ah|=ae.isWritable()?0:1;
}else{
ah|=1;
}
var C=(void 0);
if(I.hasValue()){
C=I.getValue();
}else if(!(ae===(void 0))&&IsDataDescriptor(ae)){
C=ae.getValue();
}
%DefineDataPropertyUnchecked(L,X,C,ah);
}else{
var ai=null;
if(I.hasGetter()){
ai=I.getGet();
}else if(IsAccessorDescriptor(ae)&&ae.hasGetter()){
ai=ae.getGet();
}
var aj=null;
if(I.hasSetter()){
aj=I.getSet();
}else if(IsAccessorDescriptor(ae)&&ae.hasSetter()){
aj=ae.getSet();
}
%DefineAccessorPropertyUnchecked(L,X,ai,aj,ah);
}
return true;
}
function DefineArrayProperty(L,X,I,aa){
if(!(typeof(X)==='symbol')){
var ak=(X>>>0);
var al=false;
if((%_ToString(ak))==X&&ak!=4294967295){
var am=L.length;
if(ak>=am&&%IsObserved(L)){
al=true;
$observeBeginPerformSplice(L);
}
var an=GetOwnPropertyJS(L,"length");
if((ak>=am&&!an.isWritable())||
!DefineObjectProperty(L,X,I,true)){
if(al)
$observeEndPerformSplice(L);
if(aa){
throw MakeTypeError(27,X);
}else{
return false;
}
}
if(ak>=am){
L.length=ak+1;
}
if(al){
$observeEndPerformSplice(L);
$observeEnqueueSpliceRecord(L,am,[],ak+1-am);
}
return true;
}
}
return DefineObjectProperty(L,X,I,aa);
}
function DefineOwnProperty(L,X,I,aa){
if(%_IsJSProxy(L)){
if((typeof(X)==='symbol'))return false;
var y=FromGenericPropertyDescriptor(I);
return DefineProxyProperty(L,X,y,aa);
}else if((%_IsArray(L))){
return DefineArrayProperty(L,X,I,aa);
}else{
return DefineObjectProperty(L,X,I,aa);
}
}
function DefineOwnPropertyFromAPI(L,X,C,I){
return DefineOwnProperty(L,X,ToPropertyDescriptor({
value:C,
writable:I[0],
enumerable:I[1],
configurable:I[2]
}),
false);
}
function ObjectGetPrototypeOf(L){
return %_GetPrototype((%_ToObject(L)));
}
function ObjectSetPrototypeOf(L,ao){
if((%IS_VAR(L)===null)||(L===(void 0)))throw MakeTypeError(15,"Object.setPrototypeOf");
if(ao!==null&&!(%_IsSpecObject(ao))){
throw MakeTypeError(83,ao);
}
if((%_IsSpecObject(L))){
%SetPrototype(L,ao);
}
return L;
}
function ObjectGetOwnPropertyDescriptor(L,X){
var I=GetOwnPropertyJS((%_ToObject(L)),X);
return FromPropertyDescriptor(I);
}
function ToNameArray(L,U,ap){
if(!(%_IsSpecObject(L))){
throw MakeTypeError(90,U,L);
}
var aq=(L.length>>>0);
var ar=new d(aq);
var as=0;
var M={__proto__:null};
for(var ak=0;ak<aq;ak++){
var at=(%_ToName(L[ak]));
if((typeof(at)==='symbol')&&!ap)continue;
if(%HasOwnProperty(M,at)){
throw MakeTypeError(93,U,at);
}
ar[as]=at;
++as;
M[at]=0;
}
ar.length=as;
return ar;
}
function ObjectGetOwnPropertyKeys(L,au){
var av=new i();
au|=32;
var aw=%GetInterceptorInfo(L);
if((au&8)===0){
var ax=%GetOwnElementNames(L);
for(var ay=0;ay<ax.length;++ay){
ax[ay]=%_NumberToString(ax[ay]);
}
av.push(ax);
if((aw&1)!=0){
var az=%GetIndexedInterceptorElementNames(L);
if(!(az===(void 0))){
av.push(az);
}
}
}
av.push(%GetOwnPropertyNames(L,au));
if((aw&2)!=0){
var aA=
%GetNamedInterceptorPropertyNames(L);
if(!(aA===(void 0))){
av.push(aA);
}
}
var aB=
%Apply(i.prototype.concat,
av[0],av,1,av.length-1);
if(aw!=0){
var aC={__proto__:null};
var aD=0;
for(var ay=0;ay<aB.length;++ay){
var D=aB[ay];
if((typeof(D)==='symbol')){
if((au&16)||(%SymbolIsPrivate(D))){
continue;
}
}else{
if(au&8)continue;
D=(%_ToString(D));
}
if(aC[D])continue;
aC[D]=true;
aB[aD++]=D;
}
aB.length=aD;
}
return aB;
}
function OwnPropertyKeys(L){
if(%_IsJSProxy(L)){
var F=%GetHandler(L);
var M=CallTrap0(F,"ownKeys",(void 0));
return ToNameArray(M,"getOwnPropertyNames",false);
}
return ObjectGetOwnPropertyKeys(L,32);
}
function ObjectGetOwnPropertyNames(L){
L=(%_ToObject(L));
if(%_IsJSProxy(L)){
var F=%GetHandler(L);
var M=CallTrap0(F,"getOwnPropertyNames",(void 0));
return ToNameArray(M,"getOwnPropertyNames",false);
}
return ObjectGetOwnPropertyKeys(L,16);
}
function ObjectCreate(ao,aE){
if(!(%_IsSpecObject(ao))&&ao!==null){
throw MakeTypeError(83,ao);
}
var L={};
%InternalSetPrototype(L,ao);
if(!(aE===(void 0)))ObjectDefineProperties(L,aE);
return L;
}
function ObjectDefineProperty(L,X,y){
if(!(%_IsSpecObject(L))){
throw MakeTypeError(14,"Object.defineProperty");
}
var D=(%_ToName(X));
if(%_IsJSProxy(L)){
var aF={__proto__:null};
for(var aG in y){
aF[aG]=y[aG];
}
DefineProxyProperty(L,D,aF,true);
}else{
var I=ToPropertyDescriptor(y);
DefineOwnProperty(L,D,I,true);
}
return L;
}
function GetOwnEnumerablePropertyNames(E){
var M=new i();
for(var aH in E){
if(%HasOwnProperty(E,aH)){
M.push(aH);
}
}
var au=8|32;
var aI=%GetOwnPropertyNames(E,au);
for(var ay=0;ay<aI.length;++ay){
var aJ=aI[ay];
if((typeof(aJ)==='symbol')){
var I=ObjectGetOwnPropertyDescriptor(E,aJ);
if(I.enumerable)M.push(aJ);
}
}
return M;
}
function ObjectDefineProperties(L,aE){
if(!(%_IsSpecObject(L))){
throw MakeTypeError(14,"Object.defineProperties");
}
var Z=(%_ToObject(aE));
var M=GetOwnEnumerablePropertyNames(Z);
var aK=new i();
for(var ay=0;ay<M.length;ay++){
aK.push(ToPropertyDescriptor(Z[M[ay]]));
}
for(var ay=0;ay<M.length;ay++){
DefineOwnProperty(L,M[ay],aK[ay],true);
}
return L;
}
function ProxyFix(L){
var F=%GetHandler(L);
var Z=CallTrap0(F,"fix",(void 0));
if((Z===(void 0))){
throw MakeTypeError(87,F,"undefined","fix");
}
if(%IsJSFunctionProxy(L)){
var aL=%GetCallTrap(L);
var aM=%GetConstructTrap(L);
var aN=l(aL,aM);
%Fix(L);
%SetCode(L,aN);
var aO=new h();
ObjectDefineProperty(aO,"constructor",
{value:L,writable:true,enumerable:false,configurable:true});
%FunctionSetPrototype(L,aO);
L.length=0;
}else{
%Fix(L);
}
ObjectDefineProperties(L,Z);
}
function ObjectSealJS(L){
if(!(%_IsSpecObject(L)))return L;
var aP=%_IsJSProxy(L);
if(aP||%HasSloppyArgumentsElements(L)||%IsObserved(L)){
if(aP){
ProxyFix(L);
}
var M=ObjectGetOwnPropertyNames(L);
for(var ay=0;ay<M.length;ay++){
var D=M[ay];
var I=GetOwnPropertyJS(L,D);
if(I.isConfigurable()){
I.setConfigurable(false);
DefineOwnProperty(L,D,I,true);
}
}
%PreventExtensions(L);
}else{
%ObjectSeal(L);
}
return L;
}
function ObjectFreezeJS(L){
if(!(%_IsSpecObject(L)))return L;
var aP=%_IsJSProxy(L);
if(aP||%HasSloppyArgumentsElements(L)||%IsObserved(L)||
(%IsStrong(L))){
if(aP){
ProxyFix(L);
}
var M=ObjectGetOwnPropertyNames(L);
for(var ay=0;ay<M.length;ay++){
var D=M[ay];
var I=GetOwnPropertyJS(L,D);
if(I.isWritable()||I.isConfigurable()){
if(IsDataDescriptor(I))I.setWritable(false);
I.setConfigurable(false);
DefineOwnProperty(L,D,I,true);
}
}
%PreventExtensions(L);
}else{
%ObjectFreeze(L);
}
return L;
}
function ObjectPreventExtension(L){
if(!(%_IsSpecObject(L)))return L;
if(%_IsJSProxy(L)){
ProxyFix(L);
}
%PreventExtensions(L);
return L;
}
function ObjectIsSealed(L){
if(!(%_IsSpecObject(L)))return true;
if(%_IsJSProxy(L)){
return false;
}
if(%IsExtensible(L)){
return false;
}
var M=ObjectGetOwnPropertyNames(L);
for(var ay=0;ay<M.length;ay++){
var D=M[ay];
var I=GetOwnPropertyJS(L,D);
if(I.isConfigurable()){
return false;
}
}
return true;
}
function ObjectIsFrozen(L){
if(!(%_IsSpecObject(L)))return true;
if(%_IsJSProxy(L)){
return false;
}
if(%IsExtensible(L)){
return false;
}
var M=ObjectGetOwnPropertyNames(L);
for(var ay=0;ay<M.length;ay++){
var D=M[ay];
var I=GetOwnPropertyJS(L,D);
if(IsDataDescriptor(I)&&I.isWritable())return false;
if(I.isConfigurable())return false;
}
return true;
}
function ObjectIsExtensible(L){
if(!(%_IsSpecObject(L)))return false;
if(%_IsJSProxy(L)){
return true;
}
return %IsExtensible(L);
}
function ObjectIs(aQ,aR){
return $sameValue(aQ,aR);
}
function ObjectAssign(aS,aT){
"use strict";
var aU=(%_ToObject(aS));
var aV=%_ArgumentsLength();
if(aV<2)return aU;
for(var ay=1;ay<aV;++ay){
var aW=%_Arguments(ay);
if((aW==null)){
continue;
}
var r=(%_ToObject(aW));
var aX=OwnPropertyKeys(r);
var aY=aX.length;
for(var aD=0;aD<aY;++aD){
var aH=aX[aD];
if(%IsPropertyEnumerable(r,aH)){
var aZ=r[aH];
aU[aH]=aZ;
}
}
}
return aU;
}
function ObjectGetProto(){
return %_GetPrototype((%_ToObject(this)));
}
function ObjectSetProto(ao){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Object.prototype.__proto__");
if(((%_IsSpecObject(ao))||(ao===null))&&(%_IsSpecObject(this))){
%SetPrototype(this,ao);
}
}
function ObjectConstructor(v){
if(%_IsConstructCall()){
if(v==null)return this;
return(%_ToObject(v));
}else{
if(v==null)return{};
return(%_ToObject(v));
}
}
%SetNativeFlag(h);
%SetCode(h,ObjectConstructor);
%AddNamedProperty(h.prototype,"constructor",h,
2);
b.InstallFunctions(h.prototype,2,[
"toString",ObjectToString,
"toLocaleString",ObjectToLocaleString,
"valueOf",ObjectValueOf,
"hasOwnProperty",ObjectHasOwnProperty,
"isPrototypeOf",ObjectIsPrototypeOf,
"propertyIsEnumerable",ObjectPropertyIsEnumerable,
"__defineGetter__",ObjectDefineGetter,
"__lookupGetter__",ObjectLookupGetter,
"__defineSetter__",ObjectDefineSetter,
"__lookupSetter__",ObjectLookupSetter
]);
b.InstallGetterSetter(h.prototype,"__proto__",ObjectGetProto,
ObjectSetProto);
b.InstallFunctions(h,2,[
"assign",ObjectAssign,
"keys",ObjectKeys,
"create",ObjectCreate,
"defineProperty",ObjectDefineProperty,
"defineProperties",ObjectDefineProperties,
"freeze",ObjectFreezeJS,
"getPrototypeOf",ObjectGetPrototypeOf,
"setPrototypeOf",ObjectSetPrototypeOf,
"getOwnPropertyDescriptor",ObjectGetOwnPropertyDescriptor,
"getOwnPropertyNames",ObjectGetOwnPropertyNames,
"is",ObjectIs,
"isExtensible",ObjectIsExtensible,
"isFrozen",ObjectIsFrozen,
"isSealed",ObjectIsSealed,
"preventExtensions",ObjectPreventExtension,
"seal",ObjectSealJS
]);
function BooleanConstructor(v){
"use strict";
if(%_IsConstructCall()){
%_SetValueOf(this,p(v));
}else{
return p(v);
}
}
function BooleanToString(){
var ba=this;
if(!(typeof(ba)==='boolean')){
if(!(%_ClassOf(ba)==='Boolean')){
throw MakeTypeError(58,'Boolean.prototype.toString');
}
ba=%_ValueOf(ba);
}
return ba?'true':'false';
}
function BooleanValueOf(){
if(!(typeof(this)==='boolean')&&!(%_ClassOf(this)==='Boolean')){
throw MakeTypeError(58,'Boolean.prototype.valueOf');
}
return %_ValueOf(this);
}
%SetCode(e,BooleanConstructor);
%FunctionSetPrototype(e,new e(false));
%AddNamedProperty(e.prototype,"constructor",e,
2);
b.InstallFunctions(e.prototype,2,[
"toString",BooleanToString,
"valueOf",BooleanValueOf
]);
function NumberConstructor(v){
"use strict";
var C=%_ArgumentsLength()==0?0:(%_ToNumber(v));
if(%_IsConstructCall()){
%_SetValueOf(this,C);
}else{
return C;
}
}
function NumberToStringJS(u){
var s=this;
if(!(typeof(this)==='number')){
if(!(%_ClassOf(this)==='Number')){
throw MakeTypeError(58,'Number.prototype.toString');
}
s=%_ValueOf(this);
}
if((u===(void 0))||u===10){
return %_NumberToString(s);
}
u=(%_ToInteger(u));
if(u<2||u>36)throw MakeRangeError(153);
return %NumberToRadixString(s,u);
}
function NumberToLocaleString(){
return %_CallFunction(this,NumberToStringJS);
}
function NumberValueOf(){
if(!(typeof(this)==='number')&&!(%_ClassOf(this)==='Number')){
throw MakeTypeError(58,'Number.prototype.valueOf');
}
return %_ValueOf(this);
}
function NumberToFixedJS(bb){
var v=this;
if(!(typeof(this)==='number')){
if(!(%_ClassOf(this)==='Number')){
throw MakeTypeError(36,
"Number.prototype.toFixed",this);
}
v=%_ValueOf(this);
}
var x=(%_ToInteger(bb));
if(x<0||x>20){
throw MakeRangeError(149,"toFixed() digits");
}
if((!%_IsSmi(%IS_VAR(v))&&!(v==v)))return"NaN";
if(v==(1/0))return"Infinity";
if(v==-(1/0))return"-Infinity";
return %NumberToFixed(v,x);
}
function NumberToExponentialJS(bb){
var v=this;
if(!(typeof(this)==='number')){
if(!(%_ClassOf(this)==='Number')){
throw MakeTypeError(36,
"Number.prototype.toExponential",this);
}
v=%_ValueOf(this);
}
var x=(bb===(void 0))?(void 0):(%_ToInteger(bb));
if((!%_IsSmi(%IS_VAR(v))&&!(v==v)))return"NaN";
if(v==(1/0))return"Infinity";
if(v==-(1/0))return"-Infinity";
if((x===(void 0))){
x=-1;
}else if(x<0||x>20){
throw MakeRangeError(149,"toExponential()");
}
return %NumberToExponential(v,x);
}
function NumberToPrecisionJS(bc){
var v=this;
if(!(typeof(this)==='number')){
if(!(%_ClassOf(this)==='Number')){
throw MakeTypeError(36,
"Number.prototype.toPrecision",this);
}
v=%_ValueOf(this);
}
if((bc===(void 0)))return(%_ToString(v));
var X=(%_ToInteger(bc));
if((!%_IsSmi(%IS_VAR(v))&&!(v==v)))return"NaN";
if(v==(1/0))return"Infinity";
if(v==-(1/0))return"-Infinity";
if(X<1||X>21){
throw MakeRangeError(152);
}
return %NumberToPrecision(v,X);
}
function NumberIsFinite(s){
return(typeof(s)==='number')&&(%_IsSmi(%IS_VAR(s))||((s==s)&&(s!=1/0)&&(s!=-1/0)));
}
function NumberIsInteger(s){
return NumberIsFinite(s)&&(%_ToInteger(s))==s;
}
function NumberIsNaN(s){
return(typeof(s)==='number')&&(!%_IsSmi(%IS_VAR(s))&&!(s==s));
}
function NumberIsSafeInteger(s){
if(NumberIsFinite(s)){
var bd=(%_ToInteger(s));
if(bd==s){
return k(bd)<=9007199254740991;
}
}
return false;
}
%SetCode(g,NumberConstructor);
%FunctionSetPrototype(g,new g(0));
%OptimizeObjectForAddingMultipleProperties(g.prototype,8);
%AddNamedProperty(g.prototype,"constructor",g,
2);
b.InstallConstants(g,[
"MAX_VALUE",1.7976931348623157e+308,
"MIN_VALUE",5e-324,
"NaN",$NaN,
"NEGATIVE_INFINITY",-(1/0),
"POSITIVE_INFINITY",(1/0),
"MAX_SAFE_INTEGER",%_MathPow(2,53)-1,
"MIN_SAFE_INTEGER",-%_MathPow(2,53)+1,
"EPSILON",%_MathPow(2,-52)
]);
b.InstallFunctions(g.prototype,2,[
"toString",NumberToStringJS,
"toLocaleString",NumberToLocaleString,
"valueOf",NumberValueOf,
"toFixed",NumberToFixedJS,
"toExponential",NumberToExponentialJS,
"toPrecision",NumberToPrecisionJS
]);
b.InstallFunctions(g,2,[
"isFinite",NumberIsFinite,
"isInteger",NumberIsInteger,
"isNaN",NumberIsNaN,
"isSafeInteger",NumberIsSafeInteger,
"parseInt",GlobalParseInt,
"parseFloat",GlobalParseFloat
]);
%SetForceInlineFlag(NumberIsNaN);
function NativeCodeFunctionSourceString(ab){
var D=%FunctionGetName(ab);
if(D){
return'function '+D+'() { [native code] }';
}
return'function () { [native code] }';
}
function FunctionSourceString(ab){
while(%IsJSFunctionProxy(ab)){
ab=%GetCallTrap(ab);
}
if(!(%_IsFunction(ab))){
throw MakeTypeError(58,'Function.prototype.toString');
}
if(%FunctionHidesSource(ab)){
return NativeCodeFunctionSourceString(ab);
}
var be=%ClassGetSourceCode(ab);
if((typeof(be)==='string')){
return be;
}
var bf=%FunctionGetSourceCode(ab);
if(!(typeof(bf)==='string')){
return NativeCodeFunctionSourceString(ab);
}
if(%FunctionIsArrow(ab)){
return bf;
}
var D=%FunctionNameShouldPrintAsAnonymous(ab)
?'anonymous'
:%FunctionGetName(ab);
var bg=%FunctionIsGenerator(ab);
var bh=%FunctionIsConciseMethod(ab)
?(bg?'*':'')
:(bg?'function* ':'function ');
return bh+D+bf;
}
function FunctionToString(){
return FunctionSourceString(this);
}
function FunctionBind(bi){
if(!(typeof(this)==='function'))throw MakeTypeError(33);
var bj=function(){
"use strict";
if(%_IsConstructCall()){
return %NewObjectFromBound(bj);
}
var bk=%BoundFunctionGetBindings(bj);
var bl=%_ArgumentsLength();
if(bl==0){
return %Apply(bk[0],bk[1],bk,2,bk.length-2);
}
if(bk.length===2){
return %Apply(bk[0],bk[1],arguments,0,bl);
}
var bm=bk.length-2;
var bn=new i(bm+bl);
for(var ay=0;ay<bm;ay++){
bn[ay]=bk[ay+2];
}
for(var aD=0;aD<bl;aD++){
bn[ay++]=%_Arguments(aD);
}
return %Apply(bk[0],bk[1],bn,0,bm+bl);
};
var bo=0;
var bp=this.length;
if((typeof bp==="number")&&
((bp>>>0)===bp)){
var bl=%_ArgumentsLength();
if(bl>0)bl--;
bo=bp-bl;
if(bo<0)bo=0;
}
var ac=%FunctionBindArguments(bj,this,
bi,bo);
var D=this.name;
var bq=(typeof(D)==='string')?D:"";
%DefineDataPropertyUnchecked(ac,"name","bound "+bq,
2|1);
return ac;
}
function NewFunctionString(br,bs){
var aq=br.length;
var X='';
if(aq>1){
X=(%_ToString(br[0]));
for(var ay=1;ay<aq-1;ay++){
X+=','+(%_ToString(br[ay]));
}
if(%_CallFunction(X,')',o)!=-1){
throw MakeSyntaxError(191);
}
X+='\n/'+'**/';
}
var bt=(aq>0)?(%_ToString(br[aq-1])):'';
return'('+bs+'('+X+') {\n'+bt+'\n})';
}
function FunctionConstructor(bu){
var bf=NewFunctionString(arguments,'function');
var w=%GlobalProxy(FunctionConstructor);
var x=%_CallFunction(w,%CompileString(bf,true));
%FunctionMarkNameShouldPrintAsAnonymous(x);
return x;
}
%SetCode(f,FunctionConstructor);
%AddNamedProperty(f.prototype,"constructor",f,
2);
b.InstallFunctions(f.prototype,2,[
"bind",FunctionBind,
"toString",FunctionToString
]);
function GetIterator(L,bv){
if((bv===(void 0))){
bv=L[j];
}
if(!(typeof(bv)==='function')){
throw MakeTypeError(59,L);
}
var bw=%_CallFunction(L,bv);
if(!(%_IsSpecObject(bw))){
throw MakeTypeError(53,bw);
}
return bw;
}
b.Export(function(aU){
aU.Delete=Delete;
aU.FunctionSourceString=FunctionSourceString;
aU.GetIterator=GetIterator;
aU.GetMethod=GetMethod;
aU.IsFinite=GlobalIsFinite;
aU.IsNaN=GlobalIsNaN;
aU.NewFunctionString=NewFunctionString;
aU.NumberIsNaN=NumberIsNaN;
aU.ObjectDefineProperties=ObjectDefineProperties;
aU.ObjectDefineProperty=ObjectDefineProperty;
aU.ObjectFreeze=ObjectFreezeJS;
aU.ObjectGetOwnPropertyKeys=ObjectGetOwnPropertyKeys;
aU.ObjectHasOwnProperty=ObjectHasOwnProperty;
aU.ObjectIsFrozen=ObjectIsFrozen;
aU.ObjectIsSealed=ObjectIsSealed;
aU.ObjectToString=ObjectToString;
aU.ToNameArray=ToNameArray;
});
%InstallToContext([
"global_eval_fun",GlobalEval,
"object_value_of",ObjectValueOf,
"object_to_string",ObjectToString,
"object_define_own_property",DefineOwnPropertyFromAPI,
"object_get_own_property_descriptor",ObjectGetOwnPropertyDescriptor,
"to_complete_property_descriptor",ToCompletePropertyDescriptor,
]);
})

symboly
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
var d=a.Symbol;
var e=b.ImportNow("has_instance_symbol");
var f=
b.ImportNow("is_concat_spreadable_symbol");
var g=b.ImportNow("is_regexp_symbol");
var h=b.ImportNow("iterator_symbol");
var i;
var j=b.ImportNow("to_primitive_symbol");
var k=b.ImportNow("to_string_tag_symbol");
var l=b.ImportNow("unscopables_symbol");
b.Import(function(m){
i=m.ObjectGetOwnPropertyKeys;
});
function SymbolToPrimitive(n){
if(!((typeof(this)==='symbol')||(%_ClassOf(this)==='Symbol'))){
throw MakeTypeError(36,
"Symbol.prototype [ @@toPrimitive ]",this);
}
return %_ValueOf(this);
}
function SymbolToString(){
if(!((typeof(this)==='symbol')||(%_ClassOf(this)==='Symbol'))){
throw MakeTypeError(36,
"Symbol.prototype.toString",this);
}
return %SymbolDescriptiveString(%_ValueOf(this));
}
function SymbolValueOf(){
if(!((typeof(this)==='symbol')||(%_ClassOf(this)==='Symbol'))){
throw MakeTypeError(36,
"Symbol.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function SymbolFor(o){
o=(%_ToString(o));
var p=%SymbolRegistry();
if((p.for[o]===(void 0))){
var q=%CreateSymbol(o);
p.for[o]=q;
p.keyFor[q]=o;
}
return p.for[o];
}
function SymbolKeyFor(q){
if(!(typeof(q)==='symbol'))throw MakeTypeError(114,q);
return %SymbolRegistry().keyFor[q];
}
function ObjectGetOwnPropertySymbols(r){
r=(%_ToObject(r));
return i(r,8);
}
%FunctionSetPrototype(d,new c());
b.InstallConstants(d,[
"iterator",h,
"toPrimitive",j,
"unscopables",l,
]);
b.InstallFunctions(d,2,[
"for",SymbolFor,
"keyFor",SymbolKeyFor
]);
%AddNamedProperty(
d.prototype,"constructor",d,2);
%AddNamedProperty(
d.prototype,k,"Symbol",2|1);
b.InstallFunctions(d.prototype,2|1,[
j,SymbolToPrimitive
]);
b.InstallFunctions(d.prototype,2,[
"toString",SymbolToString,
"valueOf",SymbolValueOf
]);
b.InstallFunctions(c,2,[
"getOwnPropertySymbols",ObjectGetOwnPropertySymbols
]);
b.Export(function(s){
s.SymbolToString=SymbolToString;
})
})

arrayb~
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c;
var d=a.Array;
var e=b.InternalArray;
var f=b.InternalPackedArray;
var g;
var h;
var i;
var j;
var k;
var l=b.ImportNow("unscopables_symbol");
b.Import(function(m){
c=m.Delete;
g=m.MathMin;
h=m.ObjectHasOwnProperty;
i=m.ObjectIsFrozen;
j=m.ObjectIsSealed;
k=m.ObjectToString;
});
var n=new e();
function GetSortedArrayKeys(o,p){
var q=new e();
if((typeof(p)==='number')){
var r=p;
for(var s=0;s<r;++s){
var t=o[s];
if(!(t===(void 0))||s in o){
q.push(s);
}
}
}else{
var u=p.length;
for(var v=0;v<u;++v){
var w=p[v];
if(!(w===(void 0))){
var t=o[w];
if(!(t===(void 0))||w in o){
q.push(w);
}
}
}
q.sort(function(x,y){return x-y;});
}
return q;
}
function SparseJoinWithSeparatorJS(o,z,A,B){
var q=GetSortedArrayKeys(o,%GetArrayKeys(o,z));
var C=0;
var D=new e(q.length*2);
var E=-1;
for(var s=0;s<q.length;s++){
var w=q[s];
if(w!=E){
var t=o[w];
if(!(typeof(t)==='string'))t=A(t);
D[s*2]=w;
D[s*2+1]=t;
E=w;
}
}
return %SparseJoinWithSeparator(D,z,B);
}
function SparseJoin(o,z,A){
var q=GetSortedArrayKeys(o,%GetArrayKeys(o,z));
var F=-1;
var G=q.length;
var D=new e(G);
var H=0;
for(var s=0;s<G;s++){
var w=q[s];
if(w!=F){
var t=o[w];
if(!(typeof(t)==='string'))t=A(t);
D[H++]=t;
F=w;
}
}
return %StringBuilderConcat(D,H,'');
}
function UseSparseVariant(o,u,I,J){
if(!I||u<1000||%IsObserved(o)||
%HasComplexElements(o)){
return false;
}
if(!%_IsSmi(u)){
return true;
}
var K=u>>2;
var L=%EstimateNumberOfElements(o);
return(L<K)&&
(J>L*4);
}
function Join(o,u,B,A){
if(u==0)return'';
var I=(%_IsArray(o));
if(I){
if(!%PushIfAbsent(n,o))return'';
}
try{
if(UseSparseVariant(o,u,I,u)){
%NormalizeElements(o);
if(B.length==0){
return SparseJoin(o,u,A);
}else{
return SparseJoinWithSeparatorJS(o,u,A,B);
}
}
if(u==1){
var t=o[0];
if((typeof(t)==='string'))return t;
return A(t);
}
var D=new e(u);
if(B.length==0){
var H=0;
for(var s=0;s<u;s++){
var t=o[s];
if(!(typeof(t)==='string'))t=A(t);
D[H++]=t;
}
D.length=H;
var M=%_FastOneByteArrayJoin(D,'');
if(!(M===(void 0)))return M;
return %StringBuilderConcat(D,H,'');
}
if(!(typeof(o[0])==='number')){
for(var s=0;s<u;s++){
var t=o[s];
if(!(typeof(t)==='string'))t=A(t);
D[s]=t;
}
}else{
for(var s=0;s<u;s++){
var t=o[s];
if((typeof(t)==='number')){
t=%_NumberToString(t);
}else if(!(typeof(t)==='string')){
t=A(t);
}
D[s]=t;
}
}
var M=%_FastOneByteArrayJoin(D,B);
if(!(M===(void 0)))return M;
return %StringBuilderJoin(D,u,B);
}finally{
if(I)n.length=n.length-1;
}
}
function ConvertToString(N){
if((N==null)){
return'';
}else{
return(%_ToString(N));
}
}
function ConvertToLocaleString(t){
if((t==null)){
return'';
}else{
var O=(%_ToObject(t));
return(%_ToString(O.toLocaleString()));
}
}
function SparseSlice(o,P,Q,z,R){
var p=%GetArrayKeys(o,P+Q);
if((typeof(p)==='number')){
var r=p;
for(var s=P;s<r;++s){
var S=o[s];
if(!(S===(void 0))||s in o){
%AddElement(R,s-P,S);
}
}
}else{
var u=p.length;
for(var v=0;v<u;++v){
var w=p[v];
if(!(w===(void 0))){
if(w>=P){
var S=o[w];
if(!(S===(void 0))||w in o){
%AddElement(R,w-P,S);
}
}
}
}
}
}
function SparseMove(o,P,Q,z,T){
if(T===Q)return;
var U=new e(
g(z-Q+T,0xffffffff));
var V;
var p=%GetArrayKeys(o,z);
if((typeof(p)==='number')){
var r=p;
for(var s=0;s<P&&s<r;++s){
var S=o[s];
if(!(S===(void 0))||s in o){
U[s]=S;
}
}
for(var s=P+Q;s<r;++s){
var S=o[s];
if(!(S===(void 0))||s in o){
U[s-Q+T]=S;
}
}
}else{
var u=p.length;
for(var v=0;v<u;++v){
var w=p[v];
if(!(w===(void 0))){
if(w<P){
var S=o[w];
if(!(S===(void 0))||w in o){
U[w]=S;
}
}else if(w>=P+Q){
var S=o[w];
if(!(S===(void 0))||w in o){
var W=w-Q+T;
U[W]=S;
if(W>0xfffffffe){
V=V||new e();
V.push(W);
}
}
}
}
}
}
%MoveArrayContents(U,o);
if(!(V===(void 0))){
var u=V.length;
for(var s=0;s<u;++s){
var w=V[s];
o[w]=U[w];
}
}
}
function SimpleSlice(o,P,Q,z,R){
var I=(%_IsArray(o));
for(var s=0;s<Q;s++){
var X=P+s;
if(((I&&%_HasFastPackedElements(%IS_VAR(o)))?(X<o.length):(X in o))){
var S=o[X];
%AddElement(R,s,S);
}
}
}
function SimpleMove(o,P,Q,z,T){
var I=(%_IsArray(o));
if(T!==Q){
if(T>Q){
for(var s=z-Q;s>P;s--){
var Y=s+Q-1;
var Z=s+T-1;
if(((I&&%_HasFastPackedElements(%IS_VAR(o)))?(Y<o.length):(Y in o))){
o[Z]=o[Y];
}else{
delete o[Z];
}
}
}else{
for(var s=P;s<z-Q;s++){
var Y=s+Q;
var Z=s+T;
if(((I&&%_HasFastPackedElements(%IS_VAR(o)))?(Y<o.length):(Y in o))){
o[Z]=o[Y];
}else{
delete o[Z];
}
}
for(var s=z;s>z-Q+T;s--){
delete o[s-1];
}
}
}
}
function ArrayToString(){
var o;
var aa;
if((%_IsArray(this))){
aa=this.join;
if(aa===ArrayJoin){
return Join(this,this.length,',',ConvertToString);
}
o=this;
}else{
o=(%_ToObject(this));
aa=o.join;
}
if(!(typeof(aa)==='function')){
return %_CallFunction(o,k);
}
return %_Call(aa,o);
}
function InnerArrayToLocaleString(o,u){
var z=(harmony_tolength?(%ToLength(u)):(u>>>0));
if(z===0)return"";
return Join(o,z,',',ConvertToLocaleString);
}
function ArrayToLocaleString(){
var o=(%_ToObject(this));
var ab=o.length;
return InnerArrayToLocaleString(o,ab);
}
function InnerArrayJoin(B,o,u){
if((B===(void 0))){
B=',';
}else{
B=(%_ToString(B));
}
var M=%_FastOneByteArrayJoin(o,B);
if(!(M===(void 0)))return M;
if(u===1){
var t=o[0];
if((t==null))return'';
return(%_ToString(t));
}
return Join(o,u,B,ConvertToString);
}
function ArrayJoin(B){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.join");
var o=(%_ToObject(this));
var u=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
return InnerArrayJoin(B,o,u);
}
function ObservedArrayPop(ac){
ac--;
var ad=this[ac];
try{
$observeBeginPerformSplice(this);
delete this[ac];
this.length=ac;
}finally{
$observeEndPerformSplice(this);
$observeEnqueueSpliceRecord(this,ac,[ad],0);
}
return ad;
}
function ArrayPop(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.pop");
var o=(%_ToObject(this));
var ac=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
if(ac==0){
o.length=ac;
return;
}
if(%IsObserved(o))
return ObservedArrayPop.call(o,ac);
ac--;
var ad=o[ac];
c(o,ac,true);
o.length=ac;
return ad;
}
function ObservedArrayPush(){
var ac=(harmony_tolength?(%ToLength(this.length)):(this.length>>>0));
var ae=%_ArgumentsLength();
try{
$observeBeginPerformSplice(this);
for(var s=0;s<ae;s++){
this[s+ac]=%_Arguments(s);
}
var af=ac+ae;
this.length=af;
}finally{
$observeEndPerformSplice(this);
$observeEnqueueSpliceRecord(this,ac,[],ae);
}
return af;
}
function ArrayPush(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.push");
if(%IsObserved(this))
return ObservedArrayPush.apply(this,arguments);
var o=(%_ToObject(this));
var ac=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
var ae=%_ArgumentsLength();
for(var s=0;s<ae;s++){
o[s+ac]=%_Arguments(s);
}
var af=ac+ae;
o.length=af;
return af;
}
function SparseReverse(o,z){
var q=GetSortedArrayKeys(o,%GetArrayKeys(o,z));
var ag=q.length-1;
var ah=0;
while(ah<=ag){
var s=q[ah];
var ai=q[ag];
var aj=z-ai-1;
var ak,al;
if(aj<=s){
al=ai;
while(q[--ag]==ai){}
ak=aj;
}
if(aj>=s){
ak=s;
while(q[++ah]==s){}
al=z-s-1;
}
var am=o[ak];
if(!(am===(void 0))||ak in o){
var an=o[al];
if(!(an===(void 0))||al in o){
o[ak]=an;
o[al]=am;
}else{
o[al]=am;
delete o[ak];
}
}else{
var an=o[al];
if(!(an===(void 0))||al in o){
o[ak]=an;
delete o[al];
}
}
}
}
function PackedArrayReverse(o,z){
var ai=z-1;
for(var s=0;s<ai;s++,ai--){
var am=o[s];
var an=o[ai];
o[s]=an;
o[ai]=am;
}
return o;
}
function GenericArrayReverse(o,z){
var ai=z-1;
for(var s=0;s<ai;s++,ai--){
if(s in o){
var am=o[s];
if(ai in o){
var an=o[ai];
o[s]=an;
o[ai]=am;
}else{
o[ai]=am;
delete o[s];
}
}else{
if(ai in o){
var an=o[ai];
o[s]=an;
delete o[ai];
}
}
}
return o;
}
function ArrayReverse(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.reverse");
var o=(%_ToObject(this));
var z=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
var ao=(%_IsArray(o));
if(UseSparseVariant(o,z,ao,z)){
%NormalizeElements(o);
SparseReverse(o,z);
return o;
}else if(ao&&%_HasFastPackedElements(o)){
return PackedArrayReverse(o,z);
}else{
return GenericArrayReverse(o,z);
}
}
function ObservedArrayShift(z){
var ap=this[0];
try{
$observeBeginPerformSplice(this);
SimpleMove(this,0,1,z,0);
this.length=z-1;
}finally{
$observeEndPerformSplice(this);
$observeEnqueueSpliceRecord(this,0,[ap],0);
}
return ap;
}
function ArrayShift(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.shift");
var o=(%_ToObject(this));
var z=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
if(z===0){
o.length=0;
return;
}
if(j(o))throw MakeTypeError(11);
if(%IsObserved(o))
return ObservedArrayShift.call(o,z);
var ap=o[0];
if(UseSparseVariant(o,z,(%_IsArray(o)),z)){
SparseMove(o,0,1,z,0);
}else{
SimpleMove(o,0,1,z,0);
}
o.length=z-1;
return ap;
}
function ObservedArrayUnshift(){
var z=(harmony_tolength?(%ToLength(this.length)):(this.length>>>0));
var aq=%_ArgumentsLength();
try{
$observeBeginPerformSplice(this);
SimpleMove(this,0,0,z,aq);
for(var s=0;s<aq;s++){
this[s]=%_Arguments(s);
}
var af=z+aq;
this.length=af;
}finally{
$observeEndPerformSplice(this);
$observeEnqueueSpliceRecord(this,0,[],aq);
}
return af;
}
function ArrayUnshift(ar){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.unshift");
if(%IsObserved(this))
return ObservedArrayUnshift.apply(this,arguments);
var o=(%_ToObject(this));
var z=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
var aq=%_ArgumentsLength();
if(z>0&&UseSparseVariant(o,z,(%_IsArray(o)),z)&&
!j(o)){
SparseMove(o,0,0,z,aq);
}else{
SimpleMove(o,0,0,z,aq);
}
for(var s=0;s<aq;s++){
o[s]=%_Arguments(s);
}
var af=z+aq;
o.length=af;
return af;
}
function ArraySlice(as,at){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.slice");
var o=(%_ToObject(this));
var z=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
var P=(%_ToInteger(as));
var au=z;
if(!(at===(void 0)))au=(%_ToInteger(at));
if(P<0){
P+=z;
if(P<0)P=0;
}else{
if(P>z)P=z;
}
if(au<0){
au+=z;
if(au<0)au=0;
}else{
if(au>z)au=z;
}
var M=[];
if(au<P)return M;
if(UseSparseVariant(o,z,(%_IsArray(o)),au-P)){
%NormalizeElements(o);
%NormalizeElements(M);
SparseSlice(o,P,au-P,z,M);
}else{
SimpleSlice(o,P,au-P,z,M);
}
M.length=au-P;
return M;
}
function ComputeSpliceStartIndex(P,z){
if(P<0){
P+=z;
return P<0?0:P;
}
return P>z?z:P;
}
function ComputeSpliceDeleteCount(av,aq,z,P){
var Q=0;
if(aq==1)
return z-P;
Q=(%_ToInteger(av));
if(Q<0)
return 0;
if(Q>z-P)
return z-P;
return Q;
}
function ObservedArraySplice(as,av){
var aq=%_ArgumentsLength();
var z=(harmony_tolength?(%ToLength(this.length)):(this.length>>>0));
var P=ComputeSpliceStartIndex((%_ToInteger(as)),z);
var Q=ComputeSpliceDeleteCount(av,aq,z,
P);
var R=[];
R.length=Q;
var aw=aq>2?aq-2:0;
try{
$observeBeginPerformSplice(this);
SimpleSlice(this,P,Q,z,R);
SimpleMove(this,P,Q,z,aw);
var s=P;
var ax=2;
var ay=%_ArgumentsLength();
while(ax<ay){
this[s++]=%_Arguments(ax++);
}
this.length=z-Q+aw;
}finally{
$observeEndPerformSplice(this);
if(R.length||aw){
$observeEnqueueSpliceRecord(this,
P,
R.slice(),
aw);
}
}
return R;
}
function ArraySplice(as,av){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.splice");
if(%IsObserved(this))
return ObservedArraySplice.apply(this,arguments);
var aq=%_ArgumentsLength();
var o=(%_ToObject(this));
var z=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
var P=ComputeSpliceStartIndex((%_ToInteger(as)),z);
var Q=ComputeSpliceDeleteCount(av,aq,z,
P);
var R=[];
R.length=Q;
var aw=aq>2?aq-2:0;
if(Q!=aw&&j(o)){
throw MakeTypeError(11);
}else if(Q>0&&i(o)){
throw MakeTypeError(10);
}
var az=Q;
if(aw!=Q){
az+=z-P-Q;
}
if(UseSparseVariant(o,z,(%_IsArray(o)),az)){
%NormalizeElements(o);
%NormalizeElements(R);
SparseSlice(o,P,Q,z,R);
SparseMove(o,P,Q,z,aw);
}else{
SimpleSlice(o,P,Q,z,R);
SimpleMove(o,P,Q,z,aw);
}
var s=P;
var ax=2;
var ay=%_ArgumentsLength();
while(ax<ay){
o[s++]=%_Arguments(ax++);
}
o.length=z-Q+aw;
return R;
}
function InnerArraySort(o,u,aA){
if(!(typeof(aA)==='function')){
aA=function(N,aB){
if(N===aB)return 0;
if(%_IsSmi(N)&&%_IsSmi(aB)){
return %SmiLexicographicCompare(N,aB);
}
N=(%_ToString(N));
aB=(%_ToString(aB));
if(N==aB)return 0;
else return N<aB?-1:1;
};
}
var aC=function InsertionSort(x,m,aD){
for(var s=m+1;s<aD;s++){
var aE=x[s];
for(var ai=s-1;ai>=m;ai--){
var aF=x[ai];
var aG=aA(aF,aE);
if(aG>0){
x[ai+1]=aF;
}else{
break;
}
}
x[ai+1]=aE;
}
};
var aH=function(x,m,aD){
var aI=new e();
var aJ=200+((aD-m)&15);
var ai=0;
m+=1;
aD-=1;
for(var s=m;s<aD;s+=aJ){
aI[ai]=[s,x[s]];
ai++;
}
aI.sort(function(x,y){
return aA(x[1],y[1]);
});
var aK=aI[aI.length>>1][0];
return aK;
}
var aL=function QuickSort(x,m,aD){
var aK=0;
while(true){
if(aD-m<=10){
aC(x,m,aD);
return;
}
if(aD-m>1000){
aK=aH(x,m,aD);
}else{
aK=m+((aD-m)>>1);
}
var aM=x[m];
var aN=x[aD-1];
var aO=x[aK];
var aP=aA(aM,aN);
if(aP>0){
var aF=aM;
aM=aN;
aN=aF;
}
var aQ=aA(aM,aO);
if(aQ>=0){
var aF=aM;
aM=aO;
aO=aN;
aN=aF;
}else{
var aR=aA(aN,aO);
if(aR>0){
var aF=aN;
aN=aO;
aO=aF;
}
}
x[m]=aM;
x[aD-1]=aO;
var aS=aN;
var aT=m+1;
var aU=aD-1;
x[aK]=x[aT];
x[aT]=aS;
partition:for(var s=aT+1;s<aU;s++){
var aE=x[s];
var aG=aA(aE,aS);
if(aG<0){
x[s]=x[aT];
x[aT]=aE;
aT++;
}else if(aG>0){
do{
aU--;
if(aU==s)break partition;
var aV=x[aU];
aG=aA(aV,aS);
}while(aG>0);
x[s]=x[aU];
x[aU]=aE;
if(aG<0){
aE=x[s];
x[s]=x[aT];
x[aT]=aE;
aT++;
}
}
}
if(aD-aU<aT-m){
aL(x,aU,aD);
aD=aT;
}else{
aL(x,m,aT);
m=aU;
}
}
};
var aW=function CopyFromPrototype(aX,u){
var aY=0;
for(var aZ=%_GetPrototype(aX);aZ;aZ=%_GetPrototype(aZ)){
var p=%GetArrayKeys(aZ,u);
if((typeof(p)==='number')){
var ba=p;
for(var s=0;s<ba;s++){
if(!(%_CallFunction(aX,s,h))&&(%_CallFunction(aZ,s,h))){
aX[s]=aZ[s];
if(s>=aY){aY=s+1;}
}
}
}else{
for(var s=0;s<p.length;s++){
var X=p[s];
if(!(X===(void 0))&&!(%_CallFunction(aX,X,h))
&&(%_CallFunction(aZ,X,h))){
aX[X]=aZ[X];
if(X>=aY){aY=X+1;}
}
}
}
}
return aY;
};
var bb=function(aX,m,aD){
for(var aZ=%_GetPrototype(aX);aZ;aZ=%_GetPrototype(aZ)){
var p=%GetArrayKeys(aZ,aD);
if((typeof(p)==='number')){
var ba=p;
for(var s=m;s<ba;s++){
if((%_CallFunction(aZ,s,h))){
aX[s]=(void 0);
}
}
}else{
for(var s=0;s<p.length;s++){
var X=p[s];
if(!(X===(void 0))&&m<=X&&
(%_CallFunction(aZ,X,h))){
aX[X]=(void 0);
}
}
}
}
};
var bc=function SafeRemoveArrayHoles(aX){
var bd=0;
var be=u-1;
var bf=0;
while(bd<be){
while(bd<be&&
!(aX[bd]===(void 0))){
bd++;
}
if(!(%_CallFunction(aX,bd,h))){
bf++;
}
while(bd<be&&
(aX[be]===(void 0))){
if(!(%_CallFunction(aX,be,h))){
bf++;
}
be--;
}
if(bd<be){
aX[bd]=aX[be];
aX[be]=(void 0);
}
}
if(!(aX[bd]===(void 0)))bd++;
var s;
for(s=bd;s<u-bf;s++){
aX[s]=(void 0);
}
for(s=u-bf;s<u;s++){
if(s in %_GetPrototype(aX)){
aX[s]=(void 0);
}else{
delete aX[s];
}
}
return bd;
};
if(u<2)return o;
var I=(%_IsArray(o));
var bg;
if(!I){
bg=aW(o,u);
}
var bh=%RemoveArrayHoles(o,u);
if(bh==-1){
bh=bc(o);
}
aL(o,0,bh);
if(!I&&(bh+1<bg)){
bb(o,bh,bg);
}
return o;
}
function ArraySort(aA){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.sort");
var o=(%_ToObject(this));
var u=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
return InnerArraySort(o,u,aA);
}
function InnerArrayFilter(bi,bj,o,u){
if(!(typeof(bi)==='function'))throw MakeTypeError(13,bi);
var bk=new e();
var bl=0;
var I=(%_IsArray(o));
var bm=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(bi);
for(var s=0;s<u;s++){
if(((I&&%_HasFastPackedElements(%IS_VAR(o)))?(s<o.length):(s in o))){
var aE=o[s];
if(bm)%DebugPrepareStepInIfStepping(bi);
if(%_Call(bi,bj,aE,s,o)){
bk[bl++]=aE;
}
}
}
return bk;
}
function ArrayFilter(bi,bj){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.filter");
var o=(%_ToObject(this));
var u=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
var bk=InnerArrayFilter(bi,bj,o,u);
var M=new d();
%MoveArrayContents(bk,M);
return M;
}
function InnerArrayForEach(bi,bj,o,u){
if(!(typeof(bi)==='function'))throw MakeTypeError(13,bi);
var I=(%_IsArray(o));
var bm=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(bi);
for(var s=0;s<u;s++){
if(((I&&%_HasFastPackedElements(%IS_VAR(o)))?(s<o.length):(s in o))){
var aE=o[s];
if(bm)%DebugPrepareStepInIfStepping(bi);
%_Call(bi,bj,aE,s,o);
}
}
}
function ArrayForEach(bi,bj){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.forEach");
var o=(%_ToObject(this));
var u=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
InnerArrayForEach(bi,bj,o,u);
}
function InnerArraySome(bi,bj,o,u){
if(!(typeof(bi)==='function'))throw MakeTypeError(13,bi);
var I=(%_IsArray(o));
var bm=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(bi);
for(var s=0;s<u;s++){
if(((I&&%_HasFastPackedElements(%IS_VAR(o)))?(s<o.length):(s in o))){
var aE=o[s];
if(bm)%DebugPrepareStepInIfStepping(bi);
if(%_Call(bi,bj,aE,s,o))return true;
}
}
return false;
}
function ArraySome(bi,bj){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.some");
var o=(%_ToObject(this));
var u=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
return InnerArraySome(bi,bj,o,u);
}
function InnerArrayEvery(bi,bj,o,u){
if(!(typeof(bi)==='function'))throw MakeTypeError(13,bi);
var I=(%_IsArray(o));
var bm=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(bi);
for(var s=0;s<u;s++){
if(((I&&%_HasFastPackedElements(%IS_VAR(o)))?(s<o.length):(s in o))){
var aE=o[s];
if(bm)%DebugPrepareStepInIfStepping(bi);
if(!%_Call(bi,bj,aE,s,o))return false;
}
}
return true;
}
function ArrayEvery(bi,bj){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.every");
var o=(%_ToObject(this));
var u=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
return InnerArrayEvery(bi,bj,o,u);
}
function InnerArrayMap(bi,bj,o,u){
if(!(typeof(bi)==='function'))throw MakeTypeError(13,bi);
var bk=new e(u);
var I=(%_IsArray(o));
var bm=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(bi);
for(var s=0;s<u;s++){
if(((I&&%_HasFastPackedElements(%IS_VAR(o)))?(s<o.length):(s in o))){
var aE=o[s];
if(bm)%DebugPrepareStepInIfStepping(bi);
bk[s]=%_Call(bi,bj,aE,s,o);
}
}
return bk;
}
function ArrayMap(bi,bj){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.map");
var o=(%_ToObject(this));
var u=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
var bk=InnerArrayMap(bi,bj,o,u);
var M=new d();
%MoveArrayContents(bk,M);
return M;
}
function InnerArrayIndexOf(o,aE,X,u){
if(u==0)return-1;
if((X===(void 0))){
X=0;
}else{
X=(%_ToInteger(X));
if(X<0){
X=u+X;
if(X<0)X=0;
}
}
var bn=X;
var aY=u;
if(UseSparseVariant(o,u,(%_IsArray(o)),aY-bn)){
%NormalizeElements(o);
var p=%GetArrayKeys(o,u);
if((typeof(p)==='number')){
aY=p;
}else{
if(p.length==0)return-1;
var bo=GetSortedArrayKeys(o,p);
var ac=bo.length;
var s=0;
while(s<ac&&bo[s]<X)s++;
while(s<ac){
var w=bo[s];
if(!(w===(void 0))&&o[w]===aE)return w;
s++;
}
return-1;
}
}
if(!(aE===(void 0))){
for(var s=bn;s<aY;s++){
if(o[s]===aE)return s;
}
return-1;
}
for(var s=bn;s<aY;s++){
if((o[s]===(void 0))&&s in o){
return s;
}
}
return-1;
}
function ArrayIndexOf(aE,X){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.indexOf");
var u=(harmony_tolength?(%ToLength(this.length)):(this.length>>>0));
return InnerArrayIndexOf(this,aE,X,u);
}
function InnerArrayLastIndexOf(o,aE,X,u,bp){
if(u==0)return-1;
if(bp<2){
X=u-1;
}else{
X=(%_ToInteger(X));
if(X<0)X+=u;
if(X<0)return-1;
else if(X>=u)X=u-1;
}
var bn=0;
var aY=X;
if(UseSparseVariant(o,u,(%_IsArray(o)),X)){
%NormalizeElements(o);
var p=%GetArrayKeys(o,X+1);
if((typeof(p)==='number')){
aY=p;
}else{
if(p.length==0)return-1;
var bo=GetSortedArrayKeys(o,p);
var s=bo.length-1;
while(s>=0){
var w=bo[s];
if(!(w===(void 0))&&o[w]===aE)return w;
s--;
}
return-1;
}
}
if(!(aE===(void 0))){
for(var s=aY;s>=bn;s--){
if(o[s]===aE)return s;
}
return-1;
}
for(var s=aY;s>=bn;s--){
if((o[s]===(void 0))&&s in o){
return s;
}
}
return-1;
}
function ArrayLastIndexOf(aE,X){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.lastIndexOf");
var u=(harmony_tolength?(%ToLength(this.length)):(this.length>>>0));
return InnerArrayLastIndexOf(this,aE,X,u,
%_ArgumentsLength());
}
function InnerArrayReduce(bq,S,o,u,bp){
if(!(typeof(bq)==='function')){
throw MakeTypeError(13,bq);
}
var I=(%_IsArray(o));
var s=0;
find_initial:if(bp<2){
for(;s<u;s++){
if(((I&&%_HasFastPackedElements(%IS_VAR(o)))?(s<o.length):(s in o))){
S=o[s++];
break find_initial;
}
}
throw MakeTypeError(97);
}
var bm=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(bq);
for(;s<u;s++){
if(((I&&%_HasFastPackedElements(%IS_VAR(o)))?(s<o.length):(s in o))){
var aE=o[s];
if(bm)%DebugPrepareStepInIfStepping(bq);
S=bq(S,aE,s,o);
}
}
return S;
}
function ArrayReduce(bq,S){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.reduce");
var o=(%_ToObject(this));
var u=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
return InnerArrayReduce(bq,S,o,u,
%_ArgumentsLength());
}
function InnerArrayReduceRight(bq,S,o,u,
bp){
if(!(typeof(bq)==='function')){
throw MakeTypeError(13,bq);
}
var I=(%_IsArray(o));
var s=u-1;
find_initial:if(bp<2){
for(;s>=0;s--){
if(((I&&%_HasFastPackedElements(%IS_VAR(o)))?(s<o.length):(s in o))){
S=o[s--];
break find_initial;
}
}
throw MakeTypeError(97);
}
var bm=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(bq);
for(;s>=0;s--){
if(((I&&%_HasFastPackedElements(%IS_VAR(o)))?(s<o.length):(s in o))){
var aE=o[s];
if(bm)%DebugPrepareStepInIfStepping(bq);
S=bq(S,aE,s,o);
}
}
return S;
}
function ArrayReduceRight(bq,S){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.reduceRight");
var o=(%_ToObject(this));
var u=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
return InnerArrayReduceRight(bq,S,o,u,
%_ArgumentsLength());
}
function ArrayIsArray(aX){
return(%_IsArray(aX));
}
%AddNamedProperty(d.prototype,"constructor",d,
2);
var br={
__proto__:null,
copyWithin:true,
entries:true,
fill:true,
find:true,
findIndex:true,
keys:true,
};
%AddNamedProperty(d.prototype,l,br,
2|1);
b.InstallFunctions(d,2,[
"isArray",ArrayIsArray
]);
var bs=%SpecialArrayFunctions();
var bt=function(bu,bv,z){
var bi=bv;
if(bs.hasOwnProperty(bu)){
bi=bs[bu];
}
if(!(z===(void 0))){
%FunctionSetLength(bi,z);
}
return bi;
};
b.InstallFunctions(d.prototype,2,[
"toString",bt("toString",ArrayToString),
"toLocaleString",bt("toLocaleString",ArrayToLocaleString),
"join",bt("join",ArrayJoin),
"pop",bt("pop",ArrayPop),
"push",bt("push",ArrayPush,1),
"reverse",bt("reverse",ArrayReverse),
"shift",bt("shift",ArrayShift),
"unshift",bt("unshift",ArrayUnshift,1),
"slice",bt("slice",ArraySlice,2),
"splice",bt("splice",ArraySplice,2),
"sort",bt("sort",ArraySort),
"filter",bt("filter",ArrayFilter,1),
"forEach",bt("forEach",ArrayForEach,1),
"some",bt("some",ArraySome,1),
"every",bt("every",ArrayEvery,1),
"map",bt("map",ArrayMap,1),
"indexOf",bt("indexOf",ArrayIndexOf,1),
"lastIndexOf",bt("lastIndexOf",ArrayLastIndexOf,1),
"reduce",bt("reduce",ArrayReduce,1),
"reduceRight",bt("reduceRight",ArrayReduceRight,1)
]);
%FinishArrayPrototypeSetup(d.prototype);
b.SetUpLockedPrototype(e,d(),[
"indexOf",bt("indexOf",ArrayIndexOf),
"join",bt("join",ArrayJoin),
"pop",bt("pop",ArrayPop),
"push",bt("push",ArrayPush),
"shift",bt("shift",ArrayShift),
"sort",bt("sort",ArraySort),
"splice",bt("splice",ArraySplice)
]);
b.SetUpLockedPrototype(f,d(),[
"join",bt("join",ArrayJoin),
"pop",bt("pop",ArrayPop),
"push",bt("push",ArrayPush),
"shift",bt("shift",ArrayShift)
]);
b.Export(function(aD){
aD.ArrayIndexOf=ArrayIndexOf;
aD.ArrayJoin=ArrayJoin;
aD.ArrayPush=ArrayPush;
aD.ArrayToString=ArrayToString;
aD.InnerArrayEvery=InnerArrayEvery;
aD.InnerArrayFilter=InnerArrayFilter;
aD.InnerArrayForEach=InnerArrayForEach;
aD.InnerArrayIndexOf=InnerArrayIndexOf;
aD.InnerArrayJoin=InnerArrayJoin;
aD.InnerArrayLastIndexOf=InnerArrayLastIndexOf;
aD.InnerArrayMap=InnerArrayMap;
aD.InnerArrayReduce=InnerArrayReduce;
aD.InnerArrayReduceRight=InnerArrayReduceRight;
aD.InnerArraySome=InnerArraySome;
aD.InnerArraySort=InnerArraySort;
aD.InnerArrayToLocaleString=InnerArrayToLocaleString;
aD.PackedArrayReverse=PackedArrayReverse;
});
%InstallToContext([
"array_pop",ArrayPop,
"array_push",ArrayPush,
"array_shift",ArrayShift,
"array_splice",ArraySplice,
"array_slice",ArraySlice,
"array_unshift",ArrayUnshift,
]);
});

string2
(function(a,b){
%CheckIsBootstrapping();
var c;
var d;
var e=a.RegExp;
var f=a.String;
var g=b.InternalArray;
var h=b.InternalPackedArray;
var i;
var j;
var k;
b.Import(function(l){
c=l.ArrayIndexOf;
d=l.ArrayJoin;
i=l.RegExpExec;
j=l.RegExpExecNoTests;
k=l.RegExpLastMatchInfo;
});
function StringToString(){
if(!(typeof(this)==='string')&&!(%_ClassOf(this)==='String')){
throw MakeTypeError(58,'String.prototype.toString');
}
return %_ValueOf(this);
}
function StringValueOf(){
if(!(typeof(this)==='string')&&!(%_ClassOf(this)==='String')){
throw MakeTypeError(58,'String.prototype.valueOf');
}
return %_ValueOf(this);
}
function StringCharAtJS(m){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.charAt");
var n=%_StringCharAt(this,m);
if(%_IsSmi(n)){
n=%_StringCharAt((%_ToString(this)),(%_ToInteger(m)));
}
return n;
}
function StringCharCodeAtJS(m){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.charCodeAt");
var n=%_StringCharCodeAt(this,m);
if(!%_IsSmi(n)){
n=%_StringCharCodeAt((%_ToString(this)),(%_ToInteger(m)));
}
return n;
}
function StringConcat(o){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.concat");
var p=%_ArgumentsLength();
var q=(%_ToString(this));
if(p===1){
return q+(%_ToString(o));
}
var r=new g(p+1);
r[0]=q;
for(var s=0;s<p;s++){
var t=%_Arguments(s);
r[s+1]=(%_ToString(t));
}
return %StringBuilderConcat(r,p+1,"");
}
function StringIndexOfJS(u){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.indexOf");
var v=(%_ToString(this));
u=(%_ToString(u));
var w=0;
if(%_ArgumentsLength()>1){
w=%_Arguments(1);
w=(%_ToInteger(w));
if(w<0)w=0;
if(w>v.length)w=v.length;
}
return %StringIndexOf(v,u,w);
}
function StringLastIndexOfJS(x){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.lastIndexOf");
var y=(%_ToString(this));
var z=y.length;
var x=(%_ToString(x));
var A=x.length;
var w=z-A;
if(%_ArgumentsLength()>1){
var B=(%_ToNumber(%_Arguments(1)));
if(!(!%_IsSmi(%IS_VAR(B))&&!(B==B))){
B=(%_ToInteger(B));
if(B<0){
B=0;
}
if(B+A<z){
w=B;
}
}
}
if(w<0){
return-1;
}
return %StringLastIndexOf(y,x,w);
}
function StringLocaleCompareJS(o){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.localeCompare");
return %StringLocaleCompare((%_ToString(this)),(%_ToString(o)));
}
function StringMatchJS(C){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.match");
var v=(%_ToString(this));
if((%_IsRegExp(C))){
var D=(%_ToInteger(C.lastIndex));
if(!C.global)return j(C,v,0);
var n=%StringMatch(v,C,k);
if(n!==null)$regexpLastMatchInfoOverride=null;
C.lastIndex=0;
return n;
}
C=new e(C);
return j(C,v,0);
}
function StringNormalizeJS(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.normalize");
var E=(%_ToString(this));
var F=%_Arguments(0);
var G=(F===(void 0))?'NFC':(%_ToString(F));
var H=['NFC','NFD','NFKC','NFKD'];
var I=
%_CallFunction(H,G,c);
if(I===-1){
throw MakeRangeError(148,
%_CallFunction(H,', ',d));
}
return E;
}
var J=[2,"","",-1,-1];
function StringReplace(K,L){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.replace");
var v=(%_ToString(this));
if((%_IsRegExp(K))){
var D=(%_ToInteger(K.lastIndex));
if(!(typeof(L)==='function')){
L=(%_ToString(L));
if(!K.global){
var M=i(K,v,0);
if(M==null){
K.lastIndex=0
return v;
}
if(L.length==0){
return %_SubString(v,0,M[3])+
%_SubString(v,M[4],v.length)
}
return ExpandReplacement(L,v,k,
%_SubString(v,0,M[3]))+
%_SubString(v,M[4],v.length);
}
K.lastIndex=0;
if($regexpLastMatchInfoOverride==null){
return %StringReplaceGlobalRegExpWithString(
v,K,L,k);
}else{
var N=k[1];
k[1]=0;
var O=%StringReplaceGlobalRegExpWithString(
v,K,L,k);
if(%_IsSmi(k[1])){
k[1]=N;
}else{
$regexpLastMatchInfoOverride=null;
}
return O;
}
}
if(K.global){
return StringReplaceGlobalRegExpWithFunction(v,K,L);
}
return StringReplaceNonGlobalRegExpWithFunction(v,K,L);
}
K=(%_ToString(K));
if(K.length==1&&
v.length>0xFF&&
(typeof(L)==='string')&&
%StringIndexOf(L,'$',0)<0){
return %StringReplaceOneCharWithString(v,K,L);
}
var P=%StringIndexOf(v,K,0);
if(P<0)return v;
var Q=P+K.length;
var n=%_SubString(v,0,P);
if((typeof(L)==='function')){
n+=L(K,P,v);
}else{
J[3]=P;
J[4]=Q;
n=ExpandReplacement((%_ToString(L)),
v,
J,
n);
}
return n+%_SubString(v,Q,v.length);
}
function ExpandReplacement(R,v,S,n){
var T=R.length;
var U=%StringIndexOf(R,'$',0);
if(U<0){
if(T>0)n+=R;
return n;
}
if(U>0)n+=%_SubString(R,0,U);
while(true){
var V='$';
var B=U+1;
if(B<T){
var W=%_StringCharCodeAt(R,B);
if(W==36){
++B;
n+='$';
}else if(W==38){
++B;
n+=
%_SubString(v,S[3],S[4]);
}else if(W==96){
++B;
n+=%_SubString(v,0,S[3]);
}else if(W==39){
++B;
n+=%_SubString(v,S[4],v.length);
}else if(W>=48&&W<=57){
var X=(W-48)<<1;
var Y=1;
var Z=((S)[0]);
if(B+1<R.length){
var U=%_StringCharCodeAt(R,B+1);
if(U>=48&&U<=57){
var aa=X*10+((U-48)<<1);
if(aa<Z){
X=aa;
Y=2;
}
}
}
if(X!=0&&X<Z){
var P=S[(3+(X))];
if(P>=0){
n+=
%_SubString(v,P,S[(3+(X+1))]);
}
B+=Y;
}else{
n+='$';
}
}else{
n+='$';
}
}else{
n+='$';
}
U=%StringIndexOf(R,'$',B);
if(U<0){
if(B<T){
n+=%_SubString(R,B,T);
}
return n;
}
if(U>B){
n+=%_SubString(R,B,U);
}
}
return n;
}
function CaptureString(R,ab,w){
var ac=w<<1;
var P=ab[(3+(ac))];
if(P<0)return;
var Q=ab[(3+(ac+1))];
return %_SubString(R,P,Q);
}
var ad=new g(4);
function StringReplaceGlobalRegExpWithFunction(v,C,L){
var ae=ad;
if(ae){
ad=null;
}else{
ae=new g(16);
}
var af=%RegExpExecMultiple(C,
v,
k,
ae);
C.lastIndex=0;
if((af===null)){
ad=ae;
return v;
}
var p=af.length;
if(((k)[0])==2){
var ag=0;
var ah=new h(null,0,v);
for(var s=0;s<p;s++){
var ai=af[s];
if(%_IsSmi(ai)){
if(ai>0){
ag=(ai>>11)+(ai&0x7ff);
}else{
ag=af[++s]-ai;
}
}else{
ah[0]=ai;
ah[1]=ag;
$regexpLastMatchInfoOverride=ah;
var aj=L(ai,ag,v);
af[s]=(%_ToString(aj));
ag+=ai.length;
}
}
}else{
for(var s=0;s<p;s++){
var ai=af[s];
if(!%_IsSmi(ai)){
$regexpLastMatchInfoOverride=ai;
var aj=%Apply(L,(void 0),ai,0,ai.length);
af[s]=(%_ToString(aj));
}
}
}
var n=%StringBuilderConcat(af,af.length,v);
ae.length=0;
ad=ae;
return n;
}
function StringReplaceNonGlobalRegExpWithFunction(v,C,L){
var S=i(C,v,0);
if((S===null)){
C.lastIndex=0;
return v;
}
var w=S[3];
var n=%_SubString(v,0,w);
var ak=S[4];
var al=((S)[0])>>1;
var am;
if(al==1){
var E=%_SubString(v,w,ak);
am=L(E,w,v);
}else{
var an=new g(al+2);
for(var ao=0;ao<al;ao++){
an[ao]=CaptureString(v,S,ao);
}
an[ao]=w;
an[ao+1]=v;
am=%Apply(L,(void 0),an,0,ao+2);
}
n+=am;
return n+%_SubString(v,ak,v.length);
}
function StringSearch(ap){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.search");
var C;
if((%_IsRegExp(ap))){
C=ap;
}else{
C=new e(ap);
}
var M=i(C,(%_ToString(this)),0);
if(M){
return M[3];
}
return-1;
}
function StringSlice(P,Q){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.slice");
var E=(%_ToString(this));
var aq=E.length;
var ar=(%_ToInteger(P));
var as=aq;
if(!(Q===(void 0))){
as=(%_ToInteger(Q));
}
if(ar<0){
ar+=aq;
if(ar<0){
ar=0;
}
}else{
if(ar>aq){
return'';
}
}
if(as<0){
as+=aq;
if(as<0){
return'';
}
}else{
if(as>aq){
as=aq;
}
}
if(as<=ar){
return'';
}
return %_SubString(E,ar,as);
}
function StringSplitJS(at,au){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.split");
var v=(%_ToString(this));
au=((au===(void 0)))?0xffffffff:(au>>>0);
var T=v.length;
if(!(%_IsRegExp(at))){
var av=(%_ToString(at));
if(au===0)return[];
if((at===(void 0)))return[v];
var aw=av.length;
if(aw===0)return %StringToArray(v,au);
var n=%StringSplit(v,av,au);
return n;
}
if(au===0)return[];
return StringSplitOnRegExp(v,at,au,T);
}
function StringSplitOnRegExp(v,at,au,T){
if(T===0){
if(i(at,v,0,0)!=null){
return[];
}
return[v];
}
var ax=0;
var ay=0;
var az=0;
var n=new g();
outer_loop:
while(true){
if(ay===T){
n[n.length]=%_SubString(v,ax,T);
break;
}
var S=i(at,v,ay);
if(S==null||T===(az=S[3])){
n[n.length]=%_SubString(v,ax,T);
break;
}
var aA=S[4];
if(ay===aA&&aA===ax){
ay++;
continue;
}
n[n.length]=%_SubString(v,ax,az);
if(n.length===au)break;
var aB=((S)[0])+3;
for(var s=3+2;s<aB;){
var P=S[s++];
var Q=S[s++];
if(Q!=-1){
n[n.length]=%_SubString(v,P,Q);
}else{
n[n.length]=(void 0);
}
if(n.length===au)break outer_loop;
}
ay=ax=aA;
}
var aC=[];
%MoveArrayContents(n,aC);
return aC;
}
function StringSubstring(P,Q){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.subString");
var E=(%_ToString(this));
var aq=E.length;
var ar=(%_ToInteger(P));
if(ar<0){
ar=0;
}else if(ar>aq){
ar=aq;
}
var as=aq;
if(!(Q===(void 0))){
as=(%_ToInteger(Q));
if(as>aq){
as=aq;
}else{
if(as<0)as=0;
if(ar>as){
var aD=as;
as=ar;
ar=aD;
}
}
}
return %_SubString(E,ar,as);
}
function StringSubstr(P,aE){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.substr");
var E=(%_ToString(this));
var p;
if((aE===(void 0))){
p=E.length;
}else{
p=(%_ToInteger(aE));
if(p<=0)return'';
}
if((P===(void 0))){
P=0;
}else{
P=(%_ToInteger(P));
if(P>=E.length)return'';
if(P<0){
P+=E.length;
if(P<0)P=0;
}
}
var Q=P+p;
if(Q>E.length)Q=E.length;
return %_SubString(E,P,Q);
}
function StringToLowerCaseJS(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.toLowerCase");
return %StringToLowerCase((%_ToString(this)));
}
function StringToLocaleLowerCase(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.toLocaleLowerCase");
return %StringToLowerCase((%_ToString(this)));
}
function StringToUpperCaseJS(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.toUpperCase");
return %StringToUpperCase((%_ToString(this)));
}
function StringToLocaleUpperCase(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.toLocaleUpperCase");
return %StringToUpperCase((%_ToString(this)));
}
function StringTrimJS(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.trim");
return %StringTrim((%_ToString(this)),true,true);
}
function StringTrimLeft(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.trimLeft");
return %StringTrim((%_ToString(this)),true,false);
}
function StringTrimRight(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.trimRight");
return %StringTrim((%_ToString(this)),false,true);
}
function StringFromCharCode(aF){
var aE=%_ArgumentsLength();
if(aE==1){
if(!%_IsSmi(aF))aF=(%_ToNumber(aF));
return %_StringCharFromCode(aF&0xffff);
}
var aG=%NewString(aE,true);
var s;
for(s=0;s<aE;s++){
var aF=%_Arguments(s);
if(!%_IsSmi(aF))aF=(%_ToNumber(aF))&0xffff;
if(aF<0)aF=aF&0xffff;
if(aF>0xff)break;
%_OneByteSeqStringSetChar(s,aF,aG);
}
if(s==aE)return aG;
aG=%TruncateString(aG,s);
var aH=%NewString(aE-s,false);
for(var ao=0;s<aE;s++,ao++){
var aF=%_Arguments(s);
if(!%_IsSmi(aF))aF=(%_ToNumber(aF))&0xffff;
%_TwoByteSeqStringSetChar(ao,aF,aH);
}
return aG+aH;
}
function HtmlEscape(aI){
return %_CallFunction((%_ToString(aI)),/"/g,"&quot;",StringReplace);
}
function StringAnchor(aJ){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.anchor");
return"<a name=\""+HtmlEscape(aJ)+"\">"+(%_ToString(this))+
"</a>";
}
function StringBig(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.big");
return"<big>"+(%_ToString(this))+"</big>";
}
function StringBlink(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.blink");
return"<blink>"+(%_ToString(this))+"</blink>";
}
function StringBold(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.bold");
return"<b>"+(%_ToString(this))+"</b>";
}
function StringFixed(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.fixed");
return"<tt>"+(%_ToString(this))+"</tt>";
}
function StringFontcolor(aK){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.fontcolor");
return"<font color=\""+HtmlEscape(aK)+"\">"+(%_ToString(this))+
"</font>";
}
function StringFontsize(aL){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.fontsize");
return"<font size=\""+HtmlEscape(aL)+"\">"+(%_ToString(this))+
"</font>";
}
function StringItalics(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.italics");
return"<i>"+(%_ToString(this))+"</i>";
}
function StringLink(E){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.link");
return"<a href=\""+HtmlEscape(E)+"\">"+(%_ToString(this))+"</a>";
}
function StringSmall(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.small");
return"<small>"+(%_ToString(this))+"</small>";
}
function StringStrike(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.strike");
return"<strike>"+(%_ToString(this))+"</strike>";
}
function StringSub(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.sub");
return"<sub>"+(%_ToString(this))+"</sub>";
}
function StringSup(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.sup");
return"<sup>"+(%_ToString(this))+"</sup>";
}
function StringRepeat(aM){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.repeat");
var E=(%_ToString(this));
var aE=(%_ToInteger(aM));
if(aE<0||aE>%_MaxSmi())throw MakeRangeError(133);
var aN="";
while(true){
if(aE&1)aN+=E;
aE>>=1;
if(aE===0)return aN;
E+=E;
}
}
function StringStartsWith(aO){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.startsWith");
var E=(%_ToString(this));
if((%_IsRegExp(aO))){
throw MakeTypeError(31,"String.prototype.startsWith");
}
var aP=(%_ToString(aO));
var m=0;
if(%_ArgumentsLength()>1){
var aQ=%_Arguments(1);
if(!(aQ===(void 0))){
m=(%_ToInteger(aQ));
}
}
var aq=E.length;
if(m<0)m=0;
if(m>aq)m=aq;
var aR=aP.length;
if(aR+m>aq){
return false;
}
for(var s=0;s<aR;s++){
if(%_StringCharCodeAt(E,m+s)!==%_StringCharCodeAt(aP,s)){
return false;
}
}
return true;
}
function StringEndsWith(aO){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.endsWith");
var E=(%_ToString(this));
if((%_IsRegExp(aO))){
throw MakeTypeError(31,"String.prototype.endsWith");
}
var aP=(%_ToString(aO));
var aq=E.length;
var m=aq;
if(%_ArgumentsLength()>1){
var aQ=%_Arguments(1);
if(!(aQ===(void 0))){
m=(%_ToInteger(aQ));
}
}
if(m<0)m=0;
if(m>aq)m=aq;
var aR=aP.length;
m=m-aR;
if(m<0){
return false;
}
for(var s=0;s<aR;s++){
if(%_StringCharCodeAt(E,m+s)!==%_StringCharCodeAt(aP,s)){
return false;
}
}
return true;
}
function StringIncludes(aO){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.includes");
var R=(%_ToString(this));
if((%_IsRegExp(aO))){
throw MakeTypeError(31,"String.prototype.includes");
}
aO=(%_ToString(aO));
var m=0;
if(%_ArgumentsLength()>1){
m=%_Arguments(1);
m=(%_ToInteger(m));
}
var aS=R.length;
if(m<0)m=0;
if(m>aS)m=aS;
var aT=aO.length;
if(aT+m>aS){
return false;
}
return %StringIndexOf(R,aO,m)!==-1;
}
function StringCodePointAt(m){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.codePointAt");
var R=(%_ToString(this));
var aL=R.length;
m=(%_ToInteger(m));
if(m<0||m>=aL){
return(void 0);
}
var aU=%_StringCharCodeAt(R,m);
if(aU<0xD800||aU>0xDBFF||m+1==aL){
return aU;
}
var aV=%_StringCharCodeAt(R,m+1);
if(aV<0xDC00||aV>0xDFFF){
return aU;
}
return(aU-0xD800)*0x400+aV+0x2400;
}
function StringFromCodePoint(aW){
var aF;
var T=%_ArgumentsLength();
var w;
var n="";
for(w=0;w<T;w++){
aF=%_Arguments(w);
if(!%_IsSmi(aF)){
aF=(%_ToNumber(aF));
}
if(aF<0||aF>0x10FFFF||aF!==(%_ToInteger(aF))){
throw MakeRangeError(132,aF);
}
if(aF<=0xFFFF){
n+=%_StringCharFromCode(aF);
}else{
aF-=0x10000;
n+=%_StringCharFromCode((aF>>>10)&0x3FF|0xD800);
n+=%_StringCharFromCode(aF&0x3FF|0xDC00);
}
}
return n;
}
function StringRaw(aX){
var aY=%_ArgumentsLength();
var aZ=(%_ToObject(aX));
var ba=(%_ToObject(aZ.raw));
var bb=(%ToLength(ba.length));
if(bb<=0)return"";
var n=(%_ToString(ba[0]));
for(var s=1;s<bb;++s){
if(s<aY){
n+=(%_ToString(%_Arguments(s)));
}
n+=(%_ToString(ba[s]));
}
return n;
}
%FunctionSetPrototype(f,new f());
%AddNamedProperty(
f.prototype,"constructor",f,2);
b.InstallFunctions(f,2,[
"fromCharCode",StringFromCharCode,
"fromCodePoint",StringFromCodePoint,
"raw",StringRaw
]);
b.InstallFunctions(f.prototype,2,[
"valueOf",StringValueOf,
"toString",StringToString,
"charAt",StringCharAtJS,
"charCodeAt",StringCharCodeAtJS,
"codePointAt",StringCodePointAt,
"concat",StringConcat,
"endsWith",StringEndsWith,
"includes",StringIncludes,
"indexOf",StringIndexOfJS,
"lastIndexOf",StringLastIndexOfJS,
"localeCompare",StringLocaleCompareJS,
"match",StringMatchJS,
"normalize",StringNormalizeJS,
"repeat",StringRepeat,
"replace",StringReplace,
"search",StringSearch,
"slice",StringSlice,
"split",StringSplitJS,
"substring",StringSubstring,
"substr",StringSubstr,
"startsWith",StringStartsWith,
"toLowerCase",StringToLowerCaseJS,
"toLocaleLowerCase",StringToLocaleLowerCase,
"toUpperCase",StringToUpperCaseJS,
"toLocaleUpperCase",StringToLocaleUpperCase,
"trim",StringTrimJS,
"trimLeft",StringTrimLeft,
"trimRight",StringTrimRight,
"link",StringLink,
"anchor",StringAnchor,
"fontcolor",StringFontcolor,
"fontsize",StringFontsize,
"big",StringBig,
"blink",StringBlink,
"bold",StringBold,
"fixed",StringFixed,
"italics",StringItalics,
"small",StringSmall,
"strike",StringStrike,
"sub",StringSub,
"sup",StringSup
]);
b.Export(function(bc){
bc.StringCharAt=StringCharAtJS;
bc.StringIndexOf=StringIndexOfJS;
bc.StringLastIndexOf=StringLastIndexOfJS;
bc.StringMatch=StringMatchJS;
bc.StringReplace=StringReplace;
bc.StringSlice=StringSlice;
bc.StringSplit=StringSplitJS;
bc.StringSubstr=StringSubstr;
bc.StringSubstring=StringSubstring;
});
})

uriX
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
var d=a.Array;
var e=b.InternalArray;
function HexValueOf(f){
if(f>=48&&f<=57)return f-48;
if(f>=65&&f<=70)return f-55;
if(f>=97&&f<=102)return f-87;
return-1;
}
function isAlphaNumeric(g){
if(97<=g&&g<=122)return true;
if(65<=g&&g<=90)return true;
if(48<=g&&g<=57)return true;
return false;
}
var h=0;
function URIAddEncodedOctetToBuffer(i,j,k){
j[k++]=37;
j[k++]=h[i>>4];
j[k++]=h[i&0x0F];
return k;
}
function URIEncodeOctets(l,j,k){
if(h===0){
h=[48,49,50,51,52,53,54,55,56,57,
65,66,67,68,69,70];
}
k=URIAddEncodedOctetToBuffer(l[0],j,k);
if(l[1])k=URIAddEncodedOctetToBuffer(l[1],j,k);
if(l[2])k=URIAddEncodedOctetToBuffer(l[2],j,k);
if(l[3])k=URIAddEncodedOctetToBuffer(l[3],j,k);
return k;
}
function URIEncodeSingle(g,j,k){
var m=(g>>12)&0xF;
var n=(g>>6)&63;
var o=g&63;
var l=new d(3);
if(g<=0x007F){
l[0]=g;
}else if(g<=0x07FF){
l[0]=n+192;
l[1]=o+128;
}else{
l[0]=m+224;
l[1]=n+128;
l[2]=o+128;
}
return URIEncodeOctets(l,j,k);
}
function URIEncodePair(p,q,j,k){
var r=((p>>6)&0xF)+1;
var s=(p>>2)&0xF;
var m=p&3;
var n=(q>>6)&0xF;
var o=q&63;
var l=new d(4);
l[0]=(r>>2)+240;
l[1]=(((r&3)<<4)|s)+128;
l[2]=((m<<4)|n)+128;
l[3]=o+128;
return URIEncodeOctets(l,j,k);
}
function URIHexCharsToCharCode(t,u){
var v=HexValueOf(t);
var w=HexValueOf(u);
if(v==-1||w==-1)throw MakeURIError();
return(v<<4)|w;
}
function URIDecodeOctets(l,j,k){
var x;
var y=l[0];
if(y<0x80){
x=y;
}else if(y<0xc2){
throw MakeURIError();
}else{
var z=l[1];
if(y<0xe0){
var A=y&0x1f;
if((z<0x80)||(z>0xbf))throw MakeURIError();
var B=z&0x3f;
x=(A<<6)+B;
if(x<0x80||x>0x7ff)throw MakeURIError();
}else{
var C=l[2];
if(y<0xf0){
var A=y&0x0f;
if((z<0x80)||(z>0xbf))throw MakeURIError();
var B=z&0x3f;
if((C<0x80)||(C>0xbf))throw MakeURIError();
var D=C&0x3f;
x=(A<<12)+(B<<6)+D;
if((x<0x800)||(x>0xffff))throw MakeURIError();
}else{
var E=l[3];
if(y<0xf8){
var A=(y&0x07);
if((z<0x80)||(z>0xbf))throw MakeURIError();
var B=(z&0x3f);
if((C<0x80)||(C>0xbf)){
throw MakeURIError();
}
var D=(C&0x3f);
if((E<0x80)||(E>0xbf))throw MakeURIError();
var F=(E&0x3f);
x=(A<<18)+(B<<12)+(D<<6)+F;
if((x<0x10000)||(x>0x10ffff))throw MakeURIError();
}else{
throw MakeURIError();
}
}
}
}
if(0xD800<=x&&x<=0xDFFF)throw MakeURIError();
if(x<0x10000){
%_TwoByteSeqStringSetChar(k++,x,j);
}else{
%_TwoByteSeqStringSetChar(k++,(x>>10)+0xd7c0,j);
%_TwoByteSeqStringSetChar(k++,(x&0x3ff)+0xdc00,j);
}
return k;
}
function Encode(G,H){
G=(%_ToString(G));
var I=G.length;
var J=new e(I);
var k=0;
for(var K=0;K<I;K++){
var p=%_StringCharCodeAt(G,K);
if(H(p)){
J[k++]=p;
}else{
if(p>=0xDC00&&p<=0xDFFF)throw MakeURIError();
if(p<0xD800||p>0xDBFF){
k=URIEncodeSingle(p,J,k);
}else{
K++;
if(K==I)throw MakeURIError();
var q=%_StringCharCodeAt(G,K);
if(q<0xDC00||q>0xDFFF)throw MakeURIError();
k=URIEncodePair(p,q,J,k);
}
}
}
var j=%NewString(J.length,true);
for(var L=0;L<J.length;L++){
%_OneByteSeqStringSetChar(L,J[L],j);
}
return j;
}
function Decode(G,M){
G=(%_ToString(G));
var I=G.length;
var N=%NewString(I,true);
var k=0;
var K=0;
for(;K<I;K++){
var f=%_StringCharCodeAt(G,K);
if(f==37){
if(K+2>=I)throw MakeURIError();
var g=URIHexCharsToCharCode(%_StringCharCodeAt(G,K+1),
%_StringCharCodeAt(G,K+2));
if(g>>7)break;
if(M(g)){
%_OneByteSeqStringSetChar(k++,37,N);
%_OneByteSeqStringSetChar(k++,%_StringCharCodeAt(G,K+1),
N);
%_OneByteSeqStringSetChar(k++,%_StringCharCodeAt(G,K+2),
N);
}else{
%_OneByteSeqStringSetChar(k++,g,N);
}
K+=2;
}else{
if(f>0x7f)break;
%_OneByteSeqStringSetChar(k++,f,N);
}
}
N=%TruncateString(N,k);
if(K==I)return N;
var O=%NewString(I-K,false);
k=0;
for(;K<I;K++){
var f=%_StringCharCodeAt(G,K);
if(f==37){
if(K+2>=I)throw MakeURIError();
var g=URIHexCharsToCharCode(%_StringCharCodeAt(G,++K),
%_StringCharCodeAt(G,++K));
if(g>>7){
var P=0;
while(((g<<++P)&0x80)!=0){}
if(P==1||P>4)throw MakeURIError();
var l=new d(P);
l[0]=g;
if(K+3*(P-1)>=I)throw MakeURIError();
for(var L=1;L<P;L++){
if(G[++K]!='%')throw MakeURIError();
l[L]=URIHexCharsToCharCode(%_StringCharCodeAt(G,++K),
%_StringCharCodeAt(G,++K));
}
k=URIDecodeOctets(l,O,k);
}else if(M(g)){
%_TwoByteSeqStringSetChar(k++,37,O);
%_TwoByteSeqStringSetChar(k++,%_StringCharCodeAt(G,K-1),
O);
%_TwoByteSeqStringSetChar(k++,%_StringCharCodeAt(G,K),
O);
}else{
%_TwoByteSeqStringSetChar(k++,g,O);
}
}else{
%_TwoByteSeqStringSetChar(k++,f,O);
}
}
O=%TruncateString(O,k);
return N+O;
}
function URIEscapeJS(Q){
return %URIEscape(Q);
}
function URIUnescapeJS(Q){
return %URIUnescape(Q);
}
function URIDecode(G){
var R=function(g){
if(35<=g&&g<=36)return true;
if(g==38)return true;
if(43<=g&&g<=44)return true;
if(g==47)return true;
if(58<=g&&g<=59)return true;
if(g==61)return true;
if(63<=g&&g<=64)return true;
return false;
};
return Decode(G,R);
}
function URIDecodeComponent(S){
var R=function(g){return false;};
return Decode(S,R);
}
function URIEncode(G){
var T=function(g){
if(isAlphaNumeric(g))return true;
if(g==33)return true;
if(35<=g&&g<=36)return true;
if(38<=g&&g<=47)return true;
if(58<=g&&g<=59)return true;
if(g==61)return true;
if(63<=g&&g<=64)return true;
if(g==95)return true;
if(g==126)return true;
return false;
};
return Encode(G,T);
}
function URIEncodeComponent(S){
var T=function(g){
if(isAlphaNumeric(g))return true;
if(g==33)return true;
if(39<=g&&g<=42)return true;
if(45<=g&&g<=46)return true;
if(g==95)return true;
if(g==126)return true;
return false;
};
return Encode(S,T);
}
b.InstallFunctions(a,2,[
"escape",URIEscapeJS,
"unescape",URIUnescapeJS,
"decodeURI",URIDecode,
"decodeURIComponent",URIDecodeComponent,
"encodeURI",URIEncode,
"encodeURIComponent",URIEncodeComponent
]);
})

math9R
var rngstate;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Math;
var d=a.Object;
var e=b.InternalArray;
var f=b.ImportNow("to_string_tag_symbol");
function MathAbs(g){
g=+g;
return(g>0)?g:0-g;
}
function MathAcosJS(g){
return %_MathAcos(+g);
}
function MathAsinJS(g){
return %_MathAsin(+g);
}
function MathAtanJS(g){
return %_MathAtan(+g);
}
function MathAtan2JS(h,g){
h=+h;
g=+g;
return %_MathAtan2(h,g);
}
function MathCeil(g){
return-%_MathFloor(-g);
}
function MathExp(g){
return %MathExpRT((%_ToNumber(g)));
}
function MathFloorJS(g){
return %_MathFloor(+g);
}
function MathLog(g){
return %_MathLogRT((%_ToNumber(g)));
}
function MathMax(i,j){
var k=%_ArgumentsLength();
if(k==2){
i=(%_ToNumber(i));
j=(%_ToNumber(j));
if(j>i)return j;
if(i>j)return i;
if(i==j){
return(i===0&&%_IsMinusZero(i))?j:i;
}
return $NaN;
}
var l=-(1/0);
for(var m=0;m<k;m++){
var n=%_Arguments(m);
n=(%_ToNumber(n));
if((!%_IsSmi(%IS_VAR(n))&&!(n==n))||n>l||(l===0&&n===0&&%_IsMinusZero(l))){
l=n;
}
}
return l;
}
function MathMin(i,j){
var k=%_ArgumentsLength();
if(k==2){
i=(%_ToNumber(i));
j=(%_ToNumber(j));
if(j>i)return i;
if(i>j)return j;
if(i==j){
return(i===0&&%_IsMinusZero(i))?i:j;
}
return $NaN;
}
var l=(1/0);
for(var m=0;m<k;m++){
var n=%_Arguments(m);
n=(%_ToNumber(n));
if((!%_IsSmi(%IS_VAR(n))&&!(n==n))||n<l||(l===0&&n===0&&%_IsMinusZero(n))){
l=n;
}
}
return l;
}
function MathPowJS(g,h){
return %_MathPow((%_ToNumber(g)),(%_ToNumber(h)));
}
function MathRandom(){
var o=(MathImul(18030,rngstate[0]&0xFFFF)+(rngstate[0]>>>16))|0;
rngstate[0]=o;
var p=(MathImul(36969,rngstate[1]&0xFFFF)+(rngstate[1]>>>16))|0;
rngstate[1]=p;
var g=((o<<16)+(p&0xFFFF))|0;
return(g<0?(g+0x100000000):g)*2.3283064365386962890625e-10;
}
function MathRandomRaw(){
var o=(MathImul(18030,rngstate[0]&0xFFFF)+(rngstate[0]>>>16))|0;
rngstate[0]=o;
var p=(MathImul(36969,rngstate[1]&0xFFFF)+(rngstate[1]>>>16))|0;
rngstate[1]=p;
var g=((o<<16)+(p&0xFFFF))|0;
return g&0x3fffffff;
}
function MathRound(g){
return %RoundNumber((%_ToNumber(g)));
}
function MathSqrtJS(g){
return %_MathSqrt(+g);
}
function MathImul(g,h){
return %NumberImul((%_ToNumber(g)),(%_ToNumber(h)));
}
function MathSign(g){
g=+g;
if(g>0)return 1;
if(g<0)return-1;
return g;
}
function MathTrunc(g){
g=+g;
if(g>0)return %_MathFloor(g);
if(g<0)return-%_MathFloor(-g);
return g;
}
function MathTanh(g){
g=(%_ToNumber(g));
if(g===0)return g;
if(!(%_IsSmi(%IS_VAR(g))||((g==g)&&(g!=1/0)&&(g!=-1/0))))return MathSign(g);
var q=MathExp(g);
var r=MathExp(-g);
return(q-r)/(q+r);
}
function MathAsinh(g){
g=(%_ToNumber(g));
if(g===0||!(%_IsSmi(%IS_VAR(g))||((g==g)&&(g!=1/0)&&(g!=-1/0))))return g;
if(g>0)return MathLog(g+%_MathSqrt(g*g+1));
return-MathLog(-g+%_MathSqrt(g*g+1));
}
function MathAcosh(g){
g=(%_ToNumber(g));
if(g<1)return $NaN;
if(!(%_IsSmi(%IS_VAR(g))||((g==g)&&(g!=1/0)&&(g!=-1/0))))return g;
return MathLog(g+%_MathSqrt(g+1)*%_MathSqrt(g-1));
}
function MathAtanh(g){
g=(%_ToNumber(g));
if(g===0)return g;
if(!(%_IsSmi(%IS_VAR(g))||((g==g)&&(g!=1/0)&&(g!=-1/0))))return $NaN;
return 0.5*MathLog((1+g)/(1-g));
}
function MathHypot(g,h){
var k=%_ArgumentsLength();
var s=new e(k);
var t=0;
for(var m=0;m<k;m++){
var n=%_Arguments(m);
n=(%_ToNumber(n));
if(n===(1/0)||n===-(1/0))return(1/0);
n=MathAbs(n);
if(n>t)t=n;
s[m]=n;
}
if(t===0)t=1;
var u=0;
var v=0;
for(var m=0;m<k;m++){
var n=s[m]/t;
var w=n*n-v;
var x=u+w;
v=(x-u)-w;
u=x;
}
return %_MathSqrt(u)*t;
}
function MathFroundJS(g){
return %MathFround((%_ToNumber(g)));
}
function MathClz32JS(g){
return %_MathClz32(g>>>0);
}
function MathCbrt(g){
g=(%_ToNumber(g));
if(g==0||!(%_IsSmi(%IS_VAR(g))||((g==g)&&(g!=1/0)&&(g!=-1/0))))return g;
return g>=0?CubeRoot(g):-CubeRoot(-g);
}
function CubeRoot(g){
var y=MathFloorJS(%_DoubleHi(g)/3)+0x2A9F7893;
var z=%_ConstructDouble(y,0);
z=(1.0/3.0)*(g/(z*z)+2*z);
;
z=(1.0/3.0)*(g/(z*z)+2*z);
;
z=(1.0/3.0)*(g/(z*z)+2*z);
;
return(1.0/3.0)*(g/(z*z)+2*z);
;
}
%AddNamedProperty(c,f,"Math",1|2);
b.InstallConstants(c,[
"E",2.7182818284590452354,
"LN10",2.302585092994046,
"LN2",0.6931471805599453,
"LOG2E",1.4426950408889634,
"LOG10E",0.4342944819032518,
"PI",3.1415926535897932,
"SQRT1_2",0.7071067811865476,
"SQRT2",1.4142135623730951
]);
b.InstallFunctions(c,2,[
"random",MathRandom,
"abs",MathAbs,
"acos",MathAcosJS,
"asin",MathAsinJS,
"atan",MathAtanJS,
"ceil",MathCeil,
"exp",MathExp,
"floor",MathFloorJS,
"log",MathLog,
"round",MathRound,
"sqrt",MathSqrtJS,
"atan2",MathAtan2JS,
"pow",MathPowJS,
"max",MathMax,
"min",MathMin,
"imul",MathImul,
"sign",MathSign,
"trunc",MathTrunc,
"tanh",MathTanh,
"asinh",MathAsinh,
"acosh",MathAcosh,
"atanh",MathAtanh,
"hypot",MathHypot,
"fround",MathFroundJS,
"clz32",MathClz32JS,
"cbrt",MathCbrt
]);
%SetForceInlineFlag(MathAbs);
%SetForceInlineFlag(MathAcosJS);
%SetForceInlineFlag(MathAsinJS);
%SetForceInlineFlag(MathAtanJS);
%SetForceInlineFlag(MathAtan2JS);
%SetForceInlineFlag(MathCeil);
%SetForceInlineFlag(MathClz32JS);
%SetForceInlineFlag(MathFloorJS);
%SetForceInlineFlag(MathRandom);
%SetForceInlineFlag(MathSign);
%SetForceInlineFlag(MathSqrtJS);
%SetForceInlineFlag(MathTrunc);
b.Export(function(A){
A.MathAbs=MathAbs;
A.MathExp=MathExp;
A.MathFloor=MathFloorJS;
A.IntRandom=MathRandomRaw;
A.MathMax=MathMax;
A.MathMin=MathMin;
});
})

fdlibm-¨
var kMath;
var rempio2result;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Math;
var d;
var e;
b.Import(function(f){
d=f.MathAbs;
e=f.MathExp;
});





















function KernelTan(g,h,i){
var j;
var k;
var l=%_DoubleHi(g);
var m=l&0x7fffffff;
if(m<0x3e300000){
if(((m|%_DoubleLo(g))|(i+1))==0){
return 1/d(g);
}else{
if(i==1){
return g;
}else{
var k=g+h;
var j=%_ConstructDouble(%_DoubleHi(k),0);
var n=h-(j-g);
var o=-1/k;
var p=%_ConstructDouble(%_DoubleHi(o),0);
var q=1+p*j;
return p+o*(q+p*n);
}
}
}
if(m>=0x3fe59428){
if(g<0){
g=-g;
h=-h;
}
j=kMath[32]-g;
k=kMath[33]-h;
g=j+k;
h=0;
}
j=g*g;
k=j*j;
var r=kMath[19+1]
+k*(kMath[19+3]
+k*(kMath[19+5]
+
k*(kMath[19+7]
+k*(kMath[19+9]
+k*kMath[19+11]
))));
var n=j*(kMath[19+2]
+k*(kMath[19+4]
+k*(kMath[19+6]
+
k*(kMath[19+8]
+k*(kMath[19+10]
+k*kMath[19+12]
)))));
var q=j*g;
r=h+j*(q*(r+n)+h);
r=r+kMath[19+0]
*q;
k=g+r;
if(m>=0x3fe59428){
return(1-((l>>30)&2))*
(i-2.0*(g-(k*k/(k+i)-r)));
}
if(i==1){
return k;
}else{
j=%_ConstructDouble(%_DoubleHi(k),0);
n=r-(j-g);
var o=-1/k;
var p=%_ConstructDouble(%_DoubleHi(o),0);
q=1+p*j;
return p+o*(q+p*n);
}
}
function MathSinSlow(g){
var s,t,u;
var l=%_DoubleHi(g);
var m=l&0x7fffffff;
if(m<0x4002d97c){
if(l>0){
var j=g-kMath[1];
if(m!=0x3ff921fb){
t=j-kMath[2];
u=(j-t)-kMath[2];
}else{
j-=kMath[3];
t=j-kMath[4];
u=(j-t)-kMath[4];
}
s=1;
}else{
var j=g+kMath[1];
if(m!=0x3ff921fb){
t=j+kMath[2];
u=(j-t)+kMath[2];
}else{
j+=kMath[3];
t=j+kMath[4];
u=(j-t)+kMath[4];
}
s=-1;
}
}else if(m<=0x413921fb){
var p=d(g);
s=(p*kMath[0]+0.5)|0;
var r=p-s*kMath[1];
var k=s*kMath[2];
t=r-k;
if(m-(%_DoubleHi(t)&0x7ff00000)>0x1000000){
p=r;
k=s*kMath[3];
r=p-k;
k=s*kMath[4]-((p-r)-k);
t=r-k;
if(m-(%_DoubleHi(t)&0x7ff00000)>0x3100000){
p=r;
k=s*kMath[5];
r=p-k;
k=s*kMath[6]-((p-r)-k);
t=r-k;
}
}
u=(r-t)-k;
if(l<0){
s=-s;
t=-t;
u=-u;
}
}else{
s=%RemPiO2(g,rempio2result);
t=rempio2result[0];
u=rempio2result[1];
}
;
var v=1-(s&2);
if(s&1){
var m=%_DoubleHi(t)&0x7fffffff;
var j=t*t;
var r=j*(4.16666666666666019037e-02+j*(-1.38888888888741095749e-03+j*(2.48015872894767294178e-05+j*(-2.75573143513906633035e-07+j*(2.08757232129817482790e-09+j*-1.13596475577881948265e-11)))));
if(m<0x3fd33333){
return(1-(0.5*j-(j*r-t*u)))*v;
}else{
var w;
if(m>0x3fe90000){
w=0.28125;
}else{
w=%_ConstructDouble(%_DoubleHi(0.25*t),0);
}
var x=0.5*j-w;
return(1-w-(x-(j*r-t*u)))*v;
}
;
}else{
var j=t*t;
var n=j*t;
var r=8.33333333332248946124e-03+j*(-1.98412698298579493134e-04+j*(2.75573137070700676789e-06+j*(-2.50507602534068634195e-08+j*1.58969099521155010221e-10)));
return(t-((j*(0.5*u-n*r)-u)-n*-1.66666666666666324348e-01))*v;
;
}
}
function MathCosSlow(g){
var s,t,u;
var l=%_DoubleHi(g);
var m=l&0x7fffffff;
if(m<0x4002d97c){
if(l>0){
var j=g-kMath[1];
if(m!=0x3ff921fb){
t=j-kMath[2];
u=(j-t)-kMath[2];
}else{
j-=kMath[3];
t=j-kMath[4];
u=(j-t)-kMath[4];
}
s=1;
}else{
var j=g+kMath[1];
if(m!=0x3ff921fb){
t=j+kMath[2];
u=(j-t)+kMath[2];
}else{
j+=kMath[3];
t=j+kMath[4];
u=(j-t)+kMath[4];
}
s=-1;
}
}else if(m<=0x413921fb){
var p=d(g);
s=(p*kMath[0]+0.5)|0;
var r=p-s*kMath[1];
var k=s*kMath[2];
t=r-k;
if(m-(%_DoubleHi(t)&0x7ff00000)>0x1000000){
p=r;
k=s*kMath[3];
r=p-k;
k=s*kMath[4]-((p-r)-k);
t=r-k;
if(m-(%_DoubleHi(t)&0x7ff00000)>0x3100000){
p=r;
k=s*kMath[5];
r=p-k;
k=s*kMath[6]-((p-r)-k);
t=r-k;
}
}
u=(r-t)-k;
if(l<0){
s=-s;
t=-t;
u=-u;
}
}else{
s=%RemPiO2(g,rempio2result);
t=rempio2result[0];
u=rempio2result[1];
}
;
if(s&1){
var v=(s&2)-1;
var j=t*t;
var n=j*t;
var r=8.33333333332248946124e-03+j*(-1.98412698298579493134e-04+j*(2.75573137070700676789e-06+j*(-2.50507602534068634195e-08+j*1.58969099521155010221e-10)));
return(t-((j*(0.5*u-n*r)-u)-n*-1.66666666666666324348e-01))*v;
;
}else{
var v=1-(s&2);
var m=%_DoubleHi(t)&0x7fffffff;
var j=t*t;
var r=j*(4.16666666666666019037e-02+j*(-1.38888888888741095749e-03+j*(2.48015872894767294178e-05+j*(-2.75573143513906633035e-07+j*(2.08757232129817482790e-09+j*-1.13596475577881948265e-11)))));
if(m<0x3fd33333){
return(1-(0.5*j-(j*r-t*u)))*v;
}else{
var w;
if(m>0x3fe90000){
w=0.28125;
}else{
w=%_ConstructDouble(%_DoubleHi(0.25*t),0);
}
var x=0.5*j-w;
return(1-w-(x-(j*r-t*u)))*v;
}
;
}
}
function MathSin(g){
g=+g;
if((%_DoubleHi(g)&0x7fffffff)<=0x3fe921fb){
var j=g*g;
var n=j*g;
var r=8.33333333332248946124e-03+j*(-1.98412698298579493134e-04+j*(2.75573137070700676789e-06+j*(-2.50507602534068634195e-08+j*1.58969099521155010221e-10)));
return(g-((j*(0.5*0-n*r)-0)-n*-1.66666666666666324348e-01));
;
}
return+MathSinSlow(g);
}
function MathCos(g){
g=+g;
if((%_DoubleHi(g)&0x7fffffff)<=0x3fe921fb){
var m=%_DoubleHi(g)&0x7fffffff;
var j=g*g;
var r=j*(4.16666666666666019037e-02+j*(-1.38888888888741095749e-03+j*(2.48015872894767294178e-05+j*(-2.75573143513906633035e-07+j*(2.08757232129817482790e-09+j*-1.13596475577881948265e-11)))));
if(m<0x3fd33333){
return(1-(0.5*j-(j*r-g*0)));
}else{
var w;
if(m>0x3fe90000){
w=0.28125;
}else{
w=%_ConstructDouble(%_DoubleHi(0.25*g),0);
}
var x=0.5*j-w;
return(1-w-(x-(j*r-g*0)));
}
;
}
return+MathCosSlow(g);
}
function MathTan(g){
g=g*1;
if((%_DoubleHi(g)&0x7fffffff)<=0x3fe921fb){
return KernelTan(g,0,1);
}
var s,t,u;
var l=%_DoubleHi(g);
var m=l&0x7fffffff;
if(m<0x4002d97c){
if(l>0){
var j=g-kMath[1];
if(m!=0x3ff921fb){
t=j-kMath[2];
u=(j-t)-kMath[2];
}else{
j-=kMath[3];
t=j-kMath[4];
u=(j-t)-kMath[4];
}
s=1;
}else{
var j=g+kMath[1];
if(m!=0x3ff921fb){
t=j+kMath[2];
u=(j-t)+kMath[2];
}else{
j+=kMath[3];
t=j+kMath[4];
u=(j-t)+kMath[4];
}
s=-1;
}
}else if(m<=0x413921fb){
var p=d(g);
s=(p*kMath[0]+0.5)|0;
var r=p-s*kMath[1];
var k=s*kMath[2];
t=r-k;
if(m-(%_DoubleHi(t)&0x7ff00000)>0x1000000){
p=r;
k=s*kMath[3];
r=p-k;
k=s*kMath[4]-((p-r)-k);
t=r-k;
if(m-(%_DoubleHi(t)&0x7ff00000)>0x3100000){
p=r;
k=s*kMath[5];
r=p-k;
k=s*kMath[6]-((p-r)-k);
t=r-k;
}
}
u=(r-t)-k;
if(l<0){
s=-s;
t=-t;
u=-u;
}
}else{
s=%RemPiO2(g,rempio2result);
t=rempio2result[0];
u=rempio2result[1];
}
;
return KernelTan(t,u,(s&1)?-1:1);
}




function MathLog1p(g){
g=g*1;
var l=%_DoubleHi(g);
var y=l&0x7fffffff;
var z=1;
var A=g;
var B=1;
var C=0;
var D=g;
if(l<0x3fda827a){
if(y>=0x3ff00000){
if(g===-1){
return-(1/0);
}else{
return $NaN;
}
}else if(y<0x3c900000){
return g;
}else if(y<0x3e200000){
return g-g*g*0.5;
}
if((l>0)||(l<=-0x402D413D)){
z=0;
}
}
if(l>=0x7ff00000)return g;
if(z!==0){
if(l<0x43400000){
D=1+g;
B=%_DoubleHi(D);
z=(B>>20)-1023;
C=(z>0)?1-(D-g):g-(D-1);
C=C/D;
}else{
B=%_DoubleHi(D);
z=(B>>20)-1023;
}
B=B&0xfffff;
if(B<0x6a09e){
D=%_ConstructDouble(B|0x3ff00000,%_DoubleLo(D));
}else{
++z;
D=%_ConstructDouble(B|0x3fe00000,%_DoubleLo(D));
B=(0x00100000-B)>>2;
}
A=D-1;
}
var E=0.5*A*A;
if(B===0){
if(A===0){
if(z===0){
return 0.0;
}else{
return z*kMath[34]+(C+z*kMath[35]);
}
}
var F=E*(1-kMath[36]*A);
if(z===0){
return A-F;
}else{
return z*kMath[34]-((F-(z*kMath[35]+C))-A);
}
}
var q=A/(2+A);
var j=q*q;
var F=j*((kMath[37+0])
+j*((kMath[37+1])
+j*
((kMath[37+2])
+j*((kMath[37+3])
+j*
((kMath[37+4])
+j*((kMath[37+5])
+j*(kMath[37+6])
))))));
if(z===0){
return A-(E-q*(E+F));
}else{
return z*kMath[34]-((E-(q*(E+F)+(z*kMath[35]+C)))-A);
}
}


function MathExpm1(g){
g=g*1;
var h;
var G;
var H;
var z;
var p;
var C;
var l=%_DoubleHi(g);
var I=l&0x80000000;
var h=(I===0)?g:-g;
l&=0x7fffffff;
if(l>=0x4043687a){
if(l>=0x40862e42){
if(l>=0x7ff00000){
return(g===-(1/0))?-1:g;
}
if(g>kMath[44])return(1/0);
}
if(I!=0)return-1;
}
if(l>0x3fd62e42){
if(l<0x3ff0a2b2){
if(I===0){
G=g-kMath[34];
H=kMath[35];
z=1;
}else{
G=g+kMath[34];
H=-kMath[35];
z=-1;
}
}else{
z=(kMath[45]*g+((I===0)?0.5:-0.5))|0;
p=z;
G=g-p*kMath[34];
H=p*kMath[35];
}
g=G-H;
C=(G-g)-H;
}else if(l<0x3c900000){
return g;
}else{
z=0;
}
var J=0.5*g;
var K=g*J;
var L=1+K*((kMath[46+0])
+K*((kMath[46+1])
+K*
((kMath[46+2])
+K*((kMath[46+3])
+K*(kMath[46+4])
))));
p=3-L*J;
var M=K*((L-p)/(6-g*p));
if(z===0){
return g-(g*M-K);
}else{
M=(g*(M-C)-C);
M-=K;
if(z===-1)return 0.5*(g-M)-0.5;
if(z===1){
if(g<-0.25)return-2*(M-(g+0.5));
return 1+2*(g-M);
}
if(z<=-2||z>56){
h=1-(M-g);
h=%_ConstructDouble(%_DoubleHi(h)+(z<<20),%_DoubleLo(h));
return h-1;
}
if(z<20){
p=%_ConstructDouble(0x3ff00000-(0x200000>>z),0);
h=p-(M-g);
h=%_ConstructDouble(%_DoubleHi(h)+(z<<20),%_DoubleLo(h));
}else{
p=%_ConstructDouble((0x3ff-z)<<20,0);
h=g-(M+p);
h+=1;
h=%_ConstructDouble(%_DoubleHi(h)+(z<<20),%_DoubleLo(h));
}
}
return h;
}



function MathSinh(g){
g=g*1;
var N=(g<0)?-0.5:0.5;
var y=d(g);
if(y<22){
if(y<3.725290298461914e-9)return g;
var p=MathExpm1(y);
if(y<1)return N*(2*p-p*p/(p+1));
return N*(p+p/(p+1));
}
if(y<709.7822265625)return N*e(y);
if(y<=kMath[51]){
var k=e(0.5*y);
var p=N*k;
return p*k;
}
return g*(1/0);
}

function MathCosh(g){
g=g*1;
var m=%_DoubleHi(g)&0x7fffffff;
if(m<0x3fd62e43){
var p=MathExpm1(d(g));
var k=1+p;
if(m<0x3c800000)return k;
return 1+(p*p)/(k+k);
}
if(m<0x40360000){
var p=e(d(g));
return 0.5*p+0.5/p;
}
if(m<0x40862e42)return 0.5*e(d(g));
if(d(g)<=kMath[51]){
var k=e(0.5*d(g));
var p=0.5*k;
return p*k;
}
if((!%_IsSmi(%IS_VAR(g))&&!(g==g)))return g;
return(1/0);
}



function MathLog10(g){
g=g*1;
var l=%_DoubleHi(g);
var O=%_DoubleLo(g);
var z=0;
if(l<0x00100000){
if(((l&0x7fffffff)|O)===0)return-(1/0);
if(l<0)return $NaN;
z-=54;
g*=18014398509481984;
l=%_DoubleHi(g);
O=%_DoubleLo(g);
}
if(l>=0x7ff00000)return g;
z+=(l>>20)-1023;
var P=(z&0x80000000)>>>31;
l=(l&0x000fffff)|((0x3ff-P)<<20);
var h=z+P;
g=%_ConstructDouble(l,O);
var j=h*kMath[54]+kMath[52]*%_MathLogRT(g);
return j+h*kMath[53];
}






function MathLog2(g){
g=g*1;
var y=d(g);
var l=%_DoubleHi(g);
var O=%_DoubleLo(g);
var m=l&0x7fffffff;
if((m|O)==0)return-(1/0);
if(l<0)return $NaN;
if(m>=0x7ff00000)return g;
var s=0;
if(m<0x00100000){
y*=9007199254740992;
s-=53;
m=%_DoubleHi(y);
}
s+=(m>>20)-0x3ff;
var Q=m&0x000fffff;
m=Q|0x3ff00000;
var R=1;
var S=0;
var T=0;
if(Q>0x3988e){
if(Q<0xbb67a){
R=1.5;
S=kMath[64];
T=kMath[65];
}else{
s+=1;
m-=0x00100000;
}
}
y=%_ConstructDouble(m,%_DoubleLo(y));
var D=y-R;
var n=1/(y+R);
var U=D*n;
var V=%_ConstructDouble(%_DoubleHi(U),0);
var W=%_ConstructDouble(%_DoubleHi(y+R),0)
var X=y-(W-R);
var Y=n*((D-V*W)-V*X);
var Z=U*U;
var r=Z*Z*((kMath[55+0])
+Z*((kMath[55+1])
+Z*((kMath[55+2])
+Z*(
(kMath[55+3])
+Z*((kMath[55+4])
+Z*(kMath[55+5])
)))));
r+=Y*(V+U);
Z=V*V;
W=%_ConstructDouble(%_DoubleHi(3.0+Z+r),0);
X=r-((W-3.0)-Z);
D=V*W;
n=Y*W+X*U;
p_h=%_ConstructDouble(%_DoubleHi(D+n),0);
p_l=n-(p_h-D);
z_h=kMath[62]*p_h;
z_l=kMath[63]*p_h+p_l*kMath[61]+T;
var p=s;
var aa=%_ConstructDouble(%_DoubleHi(((z_h+z_l)+S)+p),0);
var ab=z_l-(((aa-p)-S)-z_h);
return aa+ab;
}
b.InstallFunctions(c,2,[
"cos",MathCos,
"sin",MathSin,
"tan",MathTan,
"sinh",MathSinh,
"cosh",MathCosh,
"log10",MathLog10,
"log2",MathLog2,
"log1p",MathLog1p,
"expm1",MathExpm1
]);
%SetForceInlineFlag(MathSin);
%SetForceInlineFlag(MathCos);
})

dateÿ
var $createDate;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Date;
var d=a.Object;
var e=b.InternalArray;
var f;
var g;
var h;
b.Import(function(i){
f=i.IsFinite;
g=i.MathAbs;
h=i.MathFloor;
});
var j=$NaN;
var k;
function LocalTimezone(l){
if((!%_IsSmi(%IS_VAR(l))&&!(l==l)))return"";
CheckDateCacheCurrent();
if(l==j){
return k;
}
var m=%DateLocalTimezone(l);
j=l;
k=m;
return m;
}
function UTC(n){
if((!%_IsSmi(%IS_VAR(n))&&!(n==n)))return n;
return %DateToUTC(n);
}
function MakeTime(o,p,q,r){
if(!f(o))return $NaN;
if(!f(p))return $NaN;
if(!f(q))return $NaN;
if(!f(r))return $NaN;
return(%_ToInteger(o))*3600000
+(%_ToInteger(p))*60000
+(%_ToInteger(q))*1000
+(%_ToInteger(r));
}
function TimeInYear(s){
return DaysInYear(s)*86400000;
}
function MakeDay(s,t,u){
if(!f(s)||!f(t)||!f(u))return $NaN;
s=(%_IsSmi(%IS_VAR(s))?s:%NumberToIntegerMapMinusZero(s));
t=(%_IsSmi(%IS_VAR(t))?t:%NumberToIntegerMapMinusZero(t));
u=(%_IsSmi(%IS_VAR(u))?u:%NumberToIntegerMapMinusZero(u));
if(s<-1000000||s>1000000||
t<-10000000||t>10000000){
return $NaN;
}
return %DateMakeDay(s|0,t|0)+u-1;
}
function MakeDate(v,n){
var n=v*86400000+n;
if(g(n)>8640002592000000)return $NaN;
return n;
}
function TimeClip(n){
if(!f(n))return $NaN;
if(g(n)>8640000000000000)return $NaN;
return(%_ToInteger(n));
}
var w={
time:0,
string:null
};
function DateConstructor(s,t,u,x,y,z,r){
if(!%_IsConstructCall()){
return %_CallFunction(new c(),DateToString);
}
var A=%_ArgumentsLength();
var B;
if(A==0){
B=%DateCurrentTime();
(%DateSetValue(this,B,1));
}else if(A==1){
if((typeof(s)==='number')){
B=s;
}else if((typeof(s)==='string')){
CheckDateCacheCurrent();
var C=w;
if(C.string===s){
B=C.time;
}else{
B=DateParse(s);
if(!(!%_IsSmi(%IS_VAR(B))&&!(B==B))){
C.time=B;
C.string=s;
}
}
}else if((%_IsDate(s))){
B=(%_DateField(s,0));
}else{
var n=(%_ToPrimitive(s));
B=(typeof(n)==='string')?DateParse(n):(%_ToNumber(n));
}
(%DateSetValue(this,B,1));
}else{
s=(%_ToNumber(s));
t=(%_ToNumber(t));
u=A>2?(%_ToNumber(u)):1;
x=A>3?(%_ToNumber(x)):0;
y=A>4?(%_ToNumber(y)):0;
z=A>5?(%_ToNumber(z)):0;
r=A>6?(%_ToNumber(r)):0;
s=(!(!%_IsSmi(%IS_VAR(s))&&!(s==s))&&
0<=(%_ToInteger(s))&&
(%_ToInteger(s))<=99)?1900+(%_ToInteger(s)):s;
var v=MakeDay(s,t,u);
var n=MakeTime(x,y,z,r);
B=MakeDate(v,n);
(%DateSetValue(this,B,0));
}
}
var D=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
var E=['Jan','Feb','Mar','Apr','May','Jun',
'Jul','Aug','Sep','Oct','Nov','Dec'];
function TwoDigitString(B){
return B<10?"0"+B:""+B;
}
function DateString(u){
if(!%_IsDate(u))%_ThrowNotDateError();
return D[(%_DateField(u,4))]+' '
+E[(%_DateField(u,2))]+' '
+TwoDigitString((%_DateField(u,3)))+' '
+(%_DateField(u,1));
}
var F=['Sunday','Monday','Tuesday','Wednesday',
'Thursday','Friday','Saturday'];
var G=['January','February','March','April','May','June',
'July','August','September','October','November','December'];
function LongDateString(u){
if(!%_IsDate(u))%_ThrowNotDateError();
return F[(%_DateField(u,4))]+', '
+G[(%_DateField(u,2))]+' '
+TwoDigitString((%_DateField(u,3)))+', '
+(%_DateField(u,1));
}
function TimeString(u){
if(!%_IsDate(u))%_ThrowNotDateError();
return TwoDigitString((%_DateField(u,5)))+':'
+TwoDigitString((%_DateField(u,6)))+':'
+TwoDigitString((%_DateField(u,7)));
}
function TimeStringUTC(u){
if(!%_IsDate(u))%_ThrowNotDateError();
return TwoDigitString((%_DateField(u,15)))+':'
+TwoDigitString((%_DateField(u,16)))+':'
+TwoDigitString((%_DateField(u,17)));
}
function LocalTimezoneString(u){
if(!%_IsDate(u))%_ThrowNotDateError();
var m=LocalTimezone((%_DateField(u,0)));
var H=-(%_DateField(u,21));
var I=(H>=0)?1:-1;
var x=h((I*H)/60);
var p=h((I*H)%60);
var J=' GMT'+((I==1)?'+':'-')+
TwoDigitString(x)+TwoDigitString(p);
return J+' ('+m+')';
}
function DatePrintString(u){
if(!%_IsDate(u))%_ThrowNotDateError();
return DateString(u)+' '+TimeString(u);
}
var K=new e(8);
function DateParse(L){
var M=%DateParseString(L,K);
if((M===null))return $NaN;
var v=MakeDay(M[0],M[1],M[2]);
var n=MakeTime(M[3],M[4],M[5],M[6]);
var u=MakeDate(v,n);
if((M[7]===null)){
return TimeClip(UTC(u));
}else{
return TimeClip(u-M[7]*1000);
}
}
function DateUTC(s,t,u,x,y,z,r){
s=(%_ToNumber(s));
t=(%_ToNumber(t));
var A=%_ArgumentsLength();
u=A>2?(%_ToNumber(u)):1;
x=A>3?(%_ToNumber(x)):0;
y=A>4?(%_ToNumber(y)):0;
z=A>5?(%_ToNumber(z)):0;
r=A>6?(%_ToNumber(r)):0;
s=(!(!%_IsSmi(%IS_VAR(s))&&!(s==s))&&
0<=(%_ToInteger(s))&&
(%_ToInteger(s))<=99)?1900+(%_ToInteger(s)):s;
var v=MakeDay(s,t,u);
var n=MakeTime(x,y,z,r);
return TimeClip(MakeDate(v,n));
}
function DateNow(){
return %DateCurrentTime();
}
function DateToString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0))
if((!%_IsSmi(%IS_VAR(l))&&!(l==l)))return'Invalid Date';
var N=LocalTimezoneString(this)
return DatePrintString(this)+N;
}
function DateToDateString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(l))&&!(l==l)))return'Invalid Date';
return DateString(this);
}
function DateToTimeString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(l))&&!(l==l)))return'Invalid Date';
var N=LocalTimezoneString(this);
return TimeString(this)+N;
}
function DateToLocaleString(){
if(!%_IsDate(this))%_ThrowNotDateError();
return %_CallFunction(this,DateToString);
}
function DateToLocaleDateString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(l))&&!(l==l)))return'Invalid Date';
return LongDateString(this);
}
function DateToLocaleTimeString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(l))&&!(l==l)))return'Invalid Date';
return TimeString(this);
}
function DateValueOf(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,0));
}
function DateGetTime(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,0));
}
function DateGetFullYear(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,1));
}
function DateGetUTCFullYear(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,11));
}
function DateGetMonth(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,2));
}
function DateGetUTCMonth(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,12));
}
function DateGetDate(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,3));
}
function DateGetUTCDate(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,13));
}
function DateGetDay(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,4));
}
function DateGetUTCDay(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,14));
}
function DateGetHours(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,5));
}
function DateGetUTCHours(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,15));
}
function DateGetMinutes(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,6));
}
function DateGetUTCMinutes(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,16));
}
function DateGetSeconds(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,7));
}
function DateGetUTCSeconds(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,17))
}
function DateGetMilliseconds(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,8));
}
function DateGetUTCMilliseconds(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,18));
}
function DateGetTimezoneOffset(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,21));
}
function DateSetTime(r){
if(!%_IsDate(this))%_ThrowNotDateError();
(%DateSetValue(this,(%_ToNumber(r)),1));
return(%_DateField(this,0));
}
function DateSetMilliseconds(r){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0)+%_DateField(this,21));
r=(%_ToNumber(r));
var n=MakeTime((%_DateField(this,5)),(%_DateField(this,6)),(%_DateField(this,7)),r);
return(%DateSetValue(this,MakeDate((%_DateField(this,9)),n),0));
}
function DateSetUTCMilliseconds(r){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0));
r=(%_ToNumber(r));
var n=MakeTime((%_DateField(this,15)),
(%_DateField(this,16)),
(%_DateField(this,17)),
r);
return(%DateSetValue(this,MakeDate((%_DateField(this,19)),n),1));
}
function DateSetSeconds(q,r){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0)+%_DateField(this,21));
q=(%_ToNumber(q));
r=%_ArgumentsLength()<2?(%_DateField(this,8)):(%_ToNumber(r));
var n=MakeTime((%_DateField(this,5)),(%_DateField(this,6)),q,r);
return(%DateSetValue(this,MakeDate((%_DateField(this,9)),n),0));
}
function DateSetUTCSeconds(q,r){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0));
q=(%_ToNumber(q));
r=%_ArgumentsLength()<2?(%_DateField(this,18)):(%_ToNumber(r));
var n=MakeTime((%_DateField(this,15)),(%_DateField(this,16)),q,r);
return(%DateSetValue(this,MakeDate((%_DateField(this,19)),n),1));
}
function DateSetMinutes(p,q,r){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0)+%_DateField(this,21));
p=(%_ToNumber(p));
var A=%_ArgumentsLength();
q=A<2?(%_DateField(this,7)):(%_ToNumber(q));
r=A<3?(%_DateField(this,8)):(%_ToNumber(r));
var n=MakeTime((%_DateField(this,5)),p,q,r);
return(%DateSetValue(this,MakeDate((%_DateField(this,9)),n),0));
}
function DateSetUTCMinutes(p,q,r){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0));
p=(%_ToNumber(p));
var A=%_ArgumentsLength();
q=A<2?(%_DateField(this,17)):(%_ToNumber(q));
r=A<3?(%_DateField(this,18)):(%_ToNumber(r));
var n=MakeTime((%_DateField(this,15)),p,q,r);
return(%DateSetValue(this,MakeDate((%_DateField(this,19)),n),1));
}
function DateSetHours(o,p,q,r){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0)+%_DateField(this,21));
o=(%_ToNumber(o));
var A=%_ArgumentsLength();
p=A<2?(%_DateField(this,6)):(%_ToNumber(p));
q=A<3?(%_DateField(this,7)):(%_ToNumber(q));
r=A<4?(%_DateField(this,8)):(%_ToNumber(r));
var n=MakeTime(o,p,q,r);
return(%DateSetValue(this,MakeDate((%_DateField(this,9)),n),0));
}
function DateSetUTCHours(o,p,q,r){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0));
o=(%_ToNumber(o));
var A=%_ArgumentsLength();
p=A<2?(%_DateField(this,16)):(%_ToNumber(p));
q=A<3?(%_DateField(this,17)):(%_ToNumber(q));
r=A<4?(%_DateField(this,18)):(%_ToNumber(r));
var n=MakeTime(o,p,q,r);
return(%DateSetValue(this,MakeDate((%_DateField(this,19)),n),1));
}
function DateSetDate(u){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0)+%_DateField(this,21));
u=(%_ToNumber(u));
var v=MakeDay((%_DateField(this,1)),(%_DateField(this,2)),u);
return(%DateSetValue(this,MakeDate(v,(%_DateField(this,10))),0));
}
function DateSetUTCDate(u){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0));
u=(%_ToNumber(u));
var v=MakeDay((%_DateField(this,11)),(%_DateField(this,12)),u);
return(%DateSetValue(this,MakeDate(v,(%_DateField(this,20))),1));
}
function DateSetMonth(t,u){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0)+%_DateField(this,21));
t=(%_ToNumber(t));
u=%_ArgumentsLength()<2?(%_DateField(this,3)):(%_ToNumber(u));
var v=MakeDay((%_DateField(this,1)),t,u);
return(%DateSetValue(this,MakeDate(v,(%_DateField(this,10))),0));
}
function DateSetUTCMonth(t,u){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0));
t=(%_ToNumber(t));
u=%_ArgumentsLength()<2?(%_DateField(this,13)):(%_ToNumber(u));
var v=MakeDay((%_DateField(this,11)),t,u);
return(%DateSetValue(this,MakeDate(v,(%_DateField(this,20))),1));
}
function DateSetFullYear(s,t,u){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0)+%_DateField(this,21));
s=(%_ToNumber(s));
var A=%_ArgumentsLength();
var n;
if((!%_IsSmi(%IS_VAR(l))&&!(l==l))){
t=A<2?0:(%_ToNumber(t));
u=A<3?1:(%_ToNumber(u));
n=0;
}else{
t=A<2?(%_DateField(this,2)):(%_ToNumber(t));
u=A<3?(%_DateField(this,3)):(%_ToNumber(u));
n=(%_DateField(this,10));
}
var v=MakeDay(s,t,u);
return(%DateSetValue(this,MakeDate(v,n),0));
}
function DateSetUTCFullYear(s,t,u){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0));
s=(%_ToNumber(s));
var A=%_ArgumentsLength();
var n;
if((!%_IsSmi(%IS_VAR(l))&&!(l==l))){
t=A<2?0:(%_ToNumber(t));
u=A<3?1:(%_ToNumber(u));
n=0;
}else{
t=A<2?(%_DateField(this,12)):(%_ToNumber(t));
u=A<3?(%_DateField(this,13)):(%_ToNumber(u));
n=(%_DateField(this,20));
}
var v=MakeDay(s,t,u);
return(%DateSetValue(this,MakeDate(v,n),1));
}
function DateToUTCString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(l))&&!(l==l)))return'Invalid Date';
return D[(%_DateField(this,14))]+', '
+TwoDigitString((%_DateField(this,13)))+' '
+E[(%_DateField(this,12))]+' '
+(%_DateField(this,11))+' '
+TimeStringUTC(this)+' GMT';
}
function DateGetYear(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,1))-1900;
}
function DateSetYear(s){
if(!%_IsDate(this))%_ThrowNotDateError();
s=(%_ToNumber(s));
if((!%_IsSmi(%IS_VAR(s))&&!(s==s)))return(%DateSetValue(this,$NaN,1));
s=(0<=(%_ToInteger(s))&&(%_ToInteger(s))<=99)
?1900+(%_ToInteger(s)):s;
var l=(%_DateField(this,0)+%_DateField(this,21));
var t,u,n;
if((!%_IsSmi(%IS_VAR(l))&&!(l==l))){
t=0;
u=1;
n=0;
}else{
t=(%_DateField(this,2));
u=(%_DateField(this,3));
n=(%_DateField(this,10));
}
var v=MakeDay(s,t,u);
return(%DateSetValue(this,MakeDate(v,n),0));
}
function DateToGMTString(){
return %_CallFunction(this,DateToUTCString);
}
function PadInt(O,P){
if(P==1)return O;
return O<%_MathPow(10,P-1)?'0'+PadInt(O,P-1):O;
}
function DateToISOString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var l=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(l))&&!(l==l)))throw MakeRangeError(143);
var s=(%_DateField(this,11));
var Q;
if(s>=0&&s<=9999){
Q=PadInt(s,4);
}else{
if(s<0){
Q="-"+PadInt(-s,6);
}else{
Q="+"+PadInt(s,6);
}
}
return Q+
'-'+PadInt((%_DateField(this,12))+1,2)+
'-'+PadInt((%_DateField(this,13)),2)+
'T'+PadInt((%_DateField(this,15)),2)+
':'+PadInt((%_DateField(this,16)),2)+
':'+PadInt((%_DateField(this,17)),2)+
'.'+PadInt((%_DateField(this,18)),3)+
'Z';
}
function DateToJSON(R){
var S=(%_ToObject(this));
var T=(%_ToPrimitive_Number(S));
if((typeof(T)==='number')&&!(%_IsSmi(%IS_VAR(T))||((T==T)&&(T!=1/0)&&(T!=-1/0)))){
return null;
}
return S.toISOString();
}
var U;
var V=$NaN;
function CheckDateCacheCurrent(){
if(!U){
U=%DateCacheVersion();
if(!U)return;
}
if(U[0]==V){
return;
}
V=U[0];
j=$NaN;
k=(void 0);
w.time=$NaN;
w.string=null;
}
function CreateDate(n){
var u=new c();
u.setTime(n);
return u;
}
%SetCode(c,DateConstructor);
%FunctionSetPrototype(c,new d());
b.InstallFunctions(c,2,[
"UTC",DateUTC,
"parse",DateParse,
"now",DateNow
]);
%AddNamedProperty(c.prototype,"constructor",c,2);
b.InstallFunctions(c.prototype,2,[
"toString",DateToString,
"toDateString",DateToDateString,
"toTimeString",DateToTimeString,
"toLocaleString",DateToLocaleString,
"toLocaleDateString",DateToLocaleDateString,
"toLocaleTimeString",DateToLocaleTimeString,
"valueOf",DateValueOf,
"getTime",DateGetTime,
"getFullYear",DateGetFullYear,
"getUTCFullYear",DateGetUTCFullYear,
"getMonth",DateGetMonth,
"getUTCMonth",DateGetUTCMonth,
"getDate",DateGetDate,
"getUTCDate",DateGetUTCDate,
"getDay",DateGetDay,
"getUTCDay",DateGetUTCDay,
"getHours",DateGetHours,
"getUTCHours",DateGetUTCHours,
"getMinutes",DateGetMinutes,
"getUTCMinutes",DateGetUTCMinutes,
"getSeconds",DateGetSeconds,
"getUTCSeconds",DateGetUTCSeconds,
"getMilliseconds",DateGetMilliseconds,
"getUTCMilliseconds",DateGetUTCMilliseconds,
"getTimezoneOffset",DateGetTimezoneOffset,
"setTime",DateSetTime,
"setMilliseconds",DateSetMilliseconds,
"setUTCMilliseconds",DateSetUTCMilliseconds,
"setSeconds",DateSetSeconds,
"setUTCSeconds",DateSetUTCSeconds,
"setMinutes",DateSetMinutes,
"setUTCMinutes",DateSetUTCMinutes,
"setHours",DateSetHours,
"setUTCHours",DateSetUTCHours,
"setDate",DateSetDate,
"setUTCDate",DateSetUTCDate,
"setMonth",DateSetMonth,
"setUTCMonth",DateSetUTCMonth,
"setFullYear",DateSetFullYear,
"setUTCFullYear",DateSetUTCFullYear,
"toGMTString",DateToGMTString,
"toUTCString",DateToUTCString,
"getYear",DateGetYear,
"setYear",DateSetYear,
"toISOString",DateToISOString,
"toJSON",DateToJSON
]);
%InstallToContext(["create_date_fun",CreateDate]);
})

regexpõb
var $regexpLastMatchInfoOverride;
(function(a,b){
%CheckIsBootstrapping();
var c;
var d;
var e=a.RegExp;
var f=b.InternalPackedArray;
b.ImportFromExperimental(function(g){
c=g.FLAG_harmony_regexps;
d=g.FLAG_harmony_unicode_regexps;
});
var h=new f(
2,
"",
(void 0),
0,
0
);
$regexpLastMatchInfoOverride=null;
function DoConstructRegExp(i,j,k){
if((%_IsRegExp(j))){
if(!(k===(void 0)))throw MakeTypeError(98);
k=(j.global?'g':'')
+(j.ignoreCase?'i':'')
+(j.multiline?'m':'');
if(d)
k+=(j.unicode?'u':'');
if(c)
k+=(j.sticky?'y':'');
j=j.source;
}
j=(j===(void 0))?'':(%_ToString(j));
k=(k===(void 0))?'':(%_ToString(k));
%RegExpInitializeAndCompile(i,j,k);
}
function RegExpConstructor(j,k){
if(%_IsConstructCall()){
DoConstructRegExp(this,j,k);
}else{
if((%_IsRegExp(j))&&(k===(void 0))){
return j;
}
return new e(j,k);
}
}
function RegExpCompileJS(j,k){
if(this==e.prototype){
throw MakeTypeError(36,
'RegExp.prototype.compile',this);
}
if((j===(void 0))&&%_ArgumentsLength()!=0){
DoConstructRegExp(this,'undefined',k);
}else{
DoConstructRegExp(this,j,k);
}
}
function DoRegExpExec(l,m,n){
var o=%_RegExpExec(l,m,n,h);
if(o!==null)$regexpLastMatchInfoOverride=null;
return o;
}
function RegExpExecNoTests(l,m,p){
var q=%_RegExpExec(l,m,p,h);
if(q!==null){
$regexpLastMatchInfoOverride=null;
var r=((q)[0])>>1;
var p=q[3];
var s=q[4];
var t=%_SubString(m,p,s);
var o=%_RegExpConstructResult(r,p,m);
o[0]=t;
if(r==1)return o;
var u=3+2;
for(var v=1;v<r;v++){
p=q[u++];
if(p!=-1){
s=q[u];
o[v]=%_SubString(m,p,s);
}
u++;
}
return o;
;
}
l.lastIndex=0;
return null;
}
function RegExpExecJS(m){
if(!(%_IsRegExp(this))){
throw MakeTypeError(36,
'RegExp.prototype.exec',this);
}
m=(%_ToString(m));
var w=this.lastIndex;
var v=(%_ToInteger(w));
var x=this.global||(c&&this.sticky);
if(x){
if(v<0||v>m.length){
this.lastIndex=0;
return null;
}
}else{
v=0;
}
var y=%_RegExpExec(this,m,v,h);
if((y===null)){
this.lastIndex=0;
return null;
}
$regexpLastMatchInfoOverride=null;
if(x){
this.lastIndex=h[4];
}
var r=((y)[0])>>1;
var p=y[3];
var s=y[4];
var t=%_SubString(m,p,s);
var o=%_RegExpConstructResult(r,p,m);
o[0]=t;
if(r==1)return o;
var u=3+2;
for(var v=1;v<r;v++){
p=y[u++];
if(p!=-1){
s=y[u];
o[v]=%_SubString(m,p,s);
}
u++;
}
return o;
;
}
var z;
var A;
function RegExpTest(m){
if(!(%_IsRegExp(this))){
throw MakeTypeError(36,
'RegExp.prototype.test',this);
}
m=(%_ToString(m));
var w=this.lastIndex;
var v=(%_ToInteger(w));
if(this.global||(c&&this.sticky)){
if(v<0||v>m.length){
this.lastIndex=0;
return false;
}
var y=%_RegExpExec(this,m,v,h);
if((y===null)){
this.lastIndex=0;
return false;
}
$regexpLastMatchInfoOverride=null;
this.lastIndex=h[4];
return true;
}else{
var l=this;
if(l.source.length>=3&&
%_StringCharCodeAt(l.source,0)==46&&
%_StringCharCodeAt(l.source,1)==42&&
%_StringCharCodeAt(l.source,2)!=63){
l=TrimRegExp(l);
}
var y=%_RegExpExec(l,m,0,h);
if((y===null)){
this.lastIndex=0;
return false;
}
$regexpLastMatchInfoOverride=null;
return true;
}
}
function TrimRegExp(l){
if(!%_ObjectEquals(z,l)){
z=l;
A=
new e(%_SubString(l.source,2,l.source.length),
(l.ignoreCase?l.multiline?"im":"i"
:l.multiline?"m":""));
}
return A;
}
function RegExpToString(){
if(!(%_IsRegExp(this))){
throw MakeTypeError(36,
'RegExp.prototype.toString',this);
}
var o='/'+this.source+'/';
if(this.global)o+='g';
if(this.ignoreCase)o+='i';
if(this.multiline)o+='m';
if(d&&this.unicode)o+='u';
if(c&&this.sticky)o+='y';
return o;
}
function RegExpGetLastMatch(){
if($regexpLastMatchInfoOverride!==null){
return(($regexpLastMatchInfoOverride)[0]);
}
var B=((h)[1]);
return %_SubString(B,
h[3],
h[4]);
}
function RegExpGetLastParen(){
if($regexpLastMatchInfoOverride){
var C=$regexpLastMatchInfoOverride;
if(C.length<=3)return'';
return C[C.length-3];
}
var D=((h)[0]);
if(D<=2)return'';
var B=((h)[1]);
var p=h[(3+(D-2))];
var s=h[(3+(D-1))];
if(p!=-1&&s!=-1){
return %_SubString(B,p,s);
}
return"";
}
function RegExpGetLeftContext(){
var E;
var F;
if(!$regexpLastMatchInfoOverride){
E=h[3];
F=((h)[1]);
}else{
var C=$regexpLastMatchInfoOverride;
E=((C)[(C).length-2]);
F=((C)[(C).length-1]);
}
return %_SubString(F,0,E);
}
function RegExpGetRightContext(){
var E;
var F;
if(!$regexpLastMatchInfoOverride){
E=h[4];
F=((h)[1]);
}else{
var C=$regexpLastMatchInfoOverride;
F=((C)[(C).length-1]);
var G=((C)[0]);
E=((C)[(C).length-2])+G.length;
}
return %_SubString(F,E,F.length);
}
function RegExpMakeCaptureGetter(H){
return function foo(){
if($regexpLastMatchInfoOverride){
if(H<$regexpLastMatchInfoOverride.length-2){
return(($regexpLastMatchInfoOverride)[(H)]);
}
return'';
}
var n=H*2;
if(n>=((h)[0]))return'';
var I=h[(3+(n))];
var J=h[(3+(n+1))];
if(I==-1||J==-1)return'';
return %_SubString(((h)[1]),I,J);
};
}
%FunctionSetInstanceClassName(e,'RegExp');
%AddNamedProperty(
e.prototype,'constructor',e,2);
%SetCode(e,RegExpConstructor);
b.InstallFunctions(e.prototype,2,[
"exec",RegExpExecJS,
"test",RegExpTest,
"toString",RegExpToString,
"compile",RegExpCompileJS
]);
%FunctionSetLength(e.prototype.compile,1);
var K=function(){
var L=((h)[2]);
return(L===(void 0))?"":L;
};
var M=function(m){
((h)[2])=(%_ToString(m));
};
%OptimizeObjectForAddingMultipleProperties(e,22);
%DefineAccessorPropertyUnchecked(e,'input',K,
M,4);
%DefineAccessorPropertyUnchecked(e,'$_',K,
M,2|4);
var N=false;
var O=function(){return N;};
var P=function(Q){N=Q?true:false;};
%DefineAccessorPropertyUnchecked(e,'multiline',O,
P,4);
%DefineAccessorPropertyUnchecked(e,'$*',O,
P,
2|4);
var R=function(S){};
%DefineAccessorPropertyUnchecked(e,'lastMatch',RegExpGetLastMatch,
R,4);
%DefineAccessorPropertyUnchecked(e,'$&',RegExpGetLastMatch,
R,2|4);
%DefineAccessorPropertyUnchecked(e,'lastParen',RegExpGetLastParen,
R,4);
%DefineAccessorPropertyUnchecked(e,'$+',RegExpGetLastParen,
R,2|4);
%DefineAccessorPropertyUnchecked(e,'leftContext',
RegExpGetLeftContext,R,
4);
%DefineAccessorPropertyUnchecked(e,'$`',RegExpGetLeftContext,
R,2|4);
%DefineAccessorPropertyUnchecked(e,'rightContext',
RegExpGetRightContext,R,
4);
%DefineAccessorPropertyUnchecked(e,"$'",RegExpGetRightContext,
R,2|4);
for(var v=1;v<10;++v){
%DefineAccessorPropertyUnchecked(e,'$'+v,
RegExpMakeCaptureGetter(v),R,
4);
}
%ToFastProperties(e);
b.Export(function(T){
T.RegExpExec=DoRegExpExec;
T.RegExpExecNoTests=RegExpExecNoTests;
T.RegExpLastMatchInfo=h;
T.RegExpTest=RegExpTest;
});
})

,arraybuffer©
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.ArrayBuffer;
var d=a.Object;
var e;
var f;
var g=b.ImportNow("to_string_tag_symbol");
b.Import(function(h){
e=h.MathMax;
f=h.MathMin;
});
function ArrayBufferConstructor(i){
if(%_IsConstructCall()){
var j=$toPositiveInteger(i,130);
%ArrayBufferInitialize(this,j,false);
}else{
throw MakeTypeError(21,"ArrayBuffer");
}
}
function ArrayBufferGetByteLen(){
if(!(%_ClassOf(this)==='ArrayBuffer')){
throw MakeTypeError(36,
'ArrayBuffer.prototype.byteLength',this);
}
return %_ArrayBufferGetByteLength(this);
}
function ArrayBufferSlice(k,l){
if(!(%_ClassOf(this)==='ArrayBuffer')){
throw MakeTypeError(36,
'ArrayBuffer.prototype.slice',this);
}
var m=(%_ToInteger(k));
if(!(l===(void 0))){
l=(%_ToInteger(l));
}
var n;
var o=%_ArrayBufferGetByteLength(this);
if(m<0){
n=e(o+m,0);
}else{
n=f(m,o);
}
var p=(l===(void 0))?o:l;
var q;
if(p<0){
q=e(o+p,0);
}else{
q=f(p,o);
}
if(q<n){
q=n;
}
var r=q-n;
var s=new c(r);
%ArrayBufferSliceImpl(this,s,n);
return s;
}
function ArrayBufferIsViewJS(t){
return %ArrayBufferIsView(t);
}
%SetCode(c,ArrayBufferConstructor);
%FunctionSetPrototype(c,new d());
%AddNamedProperty(
c.prototype,"constructor",c,2);
%AddNamedProperty(c.prototype,
g,"ArrayBuffer",2|1);
b.InstallGetter(c.prototype,"byteLength",
ArrayBufferGetByteLen);
b.InstallFunctions(c,2,[
"isView",ArrayBufferIsViewJS
]);
b.InstallFunctions(c.prototype,2,[
"slice",ArrayBufferSlice
]);
})

(typedarrayÖ™
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Array;
var d=a.ArrayBuffer;
var e=a.DataView;
var f=a.Object;
var g=b.ImportNow("iterator_symbol");
var h=b.ImportNow("to_string_tag_symbol");
var i=a.Uint8Array;

var j=a.Int8Array;

var k=a.Uint16Array;

var l=a.Int16Array;

var m=a.Uint32Array;

var n=a.Int32Array;

var o=a.Float32Array;

var p=a.Float64Array;

var q=a.Uint8ClampedArray;


var r=b.InternalArray;
function Uint8ArrayConstructByArrayBuffer(s,t,u,v){
if(!(u===(void 0))){
u=
$toPositiveInteger(u,145);
}
if(!(v===(void 0))){
v=$toPositiveInteger(v,145);
}
var w=%_ArrayBufferGetByteLength(t);
var x;
if((u===(void 0))){
x=0;
}else{
x=u;
if(x % 1!==0){
throw MakeRangeError(144,
"start offset","Uint8Array",1);
}
if(x>w){
throw MakeRangeError(146);
}
}
var y;
var z;
if((v===(void 0))){
if(w % 1!==0){
throw MakeRangeError(144,
"byte length","Uint8Array",1);
}
y=w-x;
z=y/1;
}else{
var z=v;
y=z*1;
}
if((x+y>w)
||(z>%_MaxSmi())){
throw MakeRangeError(145);
}
%_TypedArrayInitialize(s,1,t,x,y,true);
}
function Uint8ArrayConstructByLength(s,v){
var A=(v===(void 0))?
0:$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var B=A*1;
if(B>%_TypedArrayMaxSizeInHeap()){
var t=new d(B);
%_TypedArrayInitialize(s,1,t,0,B,true);
}else{
%_TypedArrayInitialize(s,1,null,0,B,true);
}
}
function Uint8ArrayConstructByArrayLike(s,C){
var v=C.length;
var A=$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var D=false;
var B=A*1;
if(B<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(s,1,null,0,B,false);
}else{
D=
%TypedArrayInitializeFromArrayLike(s,1,C,A);
}
if(!D){
for(var E=0;E<A;E++){
s[E]=C[E];
}
}
}
function Uint8ArrayConstructByIterable(s,F,G){
var H=new r();
var I=%_Call(G,F);
var J={
__proto__:null
};
J[g]=function(){return I;}
for(var K of J){
H.push(K);
}
Uint8ArrayConstructByArrayLike(s,H);
}
function Uint8ArrayConstructor(L,M,N){
if(%_IsConstructCall()){
if((%_ClassOf(L)==='ArrayBuffer')||(%_ClassOf(L)==='SharedArrayBuffer')){
Uint8ArrayConstructByArrayBuffer(this,L,M,N);
}else if((typeof(L)==='number')||(typeof(L)==='string')||
(typeof(L)==='boolean')||(L===(void 0))){
Uint8ArrayConstructByLength(this,L);
}else{
var G=L[g];
if((G===(void 0))||G===$arrayValues){
Uint8ArrayConstructByArrayLike(this,L);
}else{
Uint8ArrayConstructByIterable(this,L,G);
}
}
}else{
throw MakeTypeError(21,"Uint8Array")
}
}
function Uint8Array_GetBuffer(){
if(!(%_ClassOf(this)==='Uint8Array')){
throw MakeTypeError(36,"Uint8Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Uint8Array_GetByteLength(){
if(!(%_ClassOf(this)==='Uint8Array')){
throw MakeTypeError(36,"Uint8Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Uint8Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Uint8Array')){
throw MakeTypeError(36,"Uint8Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Uint8Array_GetLength(){
if(!(%_ClassOf(this)==='Uint8Array')){
throw MakeTypeError(36,"Uint8Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Uint8ArraySubArray(O,P){
if(!(%_ClassOf(this)==='Uint8Array')){
throw MakeTypeError(36,"Uint8Array.subarray",this);
}
var Q=(%_ToInteger(O));
if(!(P===(void 0))){
var R=(%_ToInteger(P));
var S=%_TypedArrayGetLength(this);
}else{
var S=%_TypedArrayGetLength(this);
var R=S;
}
if(Q<0){
Q=(0<S+Q?S+Q:0);
}else{
Q=(Q<S?Q:S);
}
if(R<0){
R=(0<S+R?S+R:0);
}else{
R=(R<S?R:S);
}
if(R<Q){
R=Q;
}
var z=R-Q;
var T=
%_ArrayBufferViewGetByteOffset(this)+Q*1;
return new i(%TypedArrayGetBuffer(this),
T,z);
}

function Int8ArrayConstructByArrayBuffer(s,t,u,v){
if(!(u===(void 0))){
u=
$toPositiveInteger(u,145);
}
if(!(v===(void 0))){
v=$toPositiveInteger(v,145);
}
var w=%_ArrayBufferGetByteLength(t);
var x;
if((u===(void 0))){
x=0;
}else{
x=u;
if(x % 1!==0){
throw MakeRangeError(144,
"start offset","Int8Array",1);
}
if(x>w){
throw MakeRangeError(146);
}
}
var y;
var z;
if((v===(void 0))){
if(w % 1!==0){
throw MakeRangeError(144,
"byte length","Int8Array",1);
}
y=w-x;
z=y/1;
}else{
var z=v;
y=z*1;
}
if((x+y>w)
||(z>%_MaxSmi())){
throw MakeRangeError(145);
}
%_TypedArrayInitialize(s,2,t,x,y,true);
}
function Int8ArrayConstructByLength(s,v){
var A=(v===(void 0))?
0:$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var B=A*1;
if(B>%_TypedArrayMaxSizeInHeap()){
var t=new d(B);
%_TypedArrayInitialize(s,2,t,0,B,true);
}else{
%_TypedArrayInitialize(s,2,null,0,B,true);
}
}
function Int8ArrayConstructByArrayLike(s,C){
var v=C.length;
var A=$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var D=false;
var B=A*1;
if(B<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(s,2,null,0,B,false);
}else{
D=
%TypedArrayInitializeFromArrayLike(s,2,C,A);
}
if(!D){
for(var E=0;E<A;E++){
s[E]=C[E];
}
}
}
function Int8ArrayConstructByIterable(s,F,G){
var H=new r();
var I=%_Call(G,F);
var J={
__proto__:null
};
J[g]=function(){return I;}
for(var K of J){
H.push(K);
}
Int8ArrayConstructByArrayLike(s,H);
}
function Int8ArrayConstructor(L,M,N){
if(%_IsConstructCall()){
if((%_ClassOf(L)==='ArrayBuffer')||(%_ClassOf(L)==='SharedArrayBuffer')){
Int8ArrayConstructByArrayBuffer(this,L,M,N);
}else if((typeof(L)==='number')||(typeof(L)==='string')||
(typeof(L)==='boolean')||(L===(void 0))){
Int8ArrayConstructByLength(this,L);
}else{
var G=L[g];
if((G===(void 0))||G===$arrayValues){
Int8ArrayConstructByArrayLike(this,L);
}else{
Int8ArrayConstructByIterable(this,L,G);
}
}
}else{
throw MakeTypeError(21,"Int8Array")
}
}
function Int8Array_GetBuffer(){
if(!(%_ClassOf(this)==='Int8Array')){
throw MakeTypeError(36,"Int8Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Int8Array_GetByteLength(){
if(!(%_ClassOf(this)==='Int8Array')){
throw MakeTypeError(36,"Int8Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Int8Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Int8Array')){
throw MakeTypeError(36,"Int8Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Int8Array_GetLength(){
if(!(%_ClassOf(this)==='Int8Array')){
throw MakeTypeError(36,"Int8Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Int8ArraySubArray(O,P){
if(!(%_ClassOf(this)==='Int8Array')){
throw MakeTypeError(36,"Int8Array.subarray",this);
}
var Q=(%_ToInteger(O));
if(!(P===(void 0))){
var R=(%_ToInteger(P));
var S=%_TypedArrayGetLength(this);
}else{
var S=%_TypedArrayGetLength(this);
var R=S;
}
if(Q<0){
Q=(0<S+Q?S+Q:0);
}else{
Q=(Q<S?Q:S);
}
if(R<0){
R=(0<S+R?S+R:0);
}else{
R=(R<S?R:S);
}
if(R<Q){
R=Q;
}
var z=R-Q;
var T=
%_ArrayBufferViewGetByteOffset(this)+Q*1;
return new j(%TypedArrayGetBuffer(this),
T,z);
}

function Uint16ArrayConstructByArrayBuffer(s,t,u,v){
if(!(u===(void 0))){
u=
$toPositiveInteger(u,145);
}
if(!(v===(void 0))){
v=$toPositiveInteger(v,145);
}
var w=%_ArrayBufferGetByteLength(t);
var x;
if((u===(void 0))){
x=0;
}else{
x=u;
if(x % 2!==0){
throw MakeRangeError(144,
"start offset","Uint16Array",2);
}
if(x>w){
throw MakeRangeError(146);
}
}
var y;
var z;
if((v===(void 0))){
if(w % 2!==0){
throw MakeRangeError(144,
"byte length","Uint16Array",2);
}
y=w-x;
z=y/2;
}else{
var z=v;
y=z*2;
}
if((x+y>w)
||(z>%_MaxSmi())){
throw MakeRangeError(145);
}
%_TypedArrayInitialize(s,3,t,x,y,true);
}
function Uint16ArrayConstructByLength(s,v){
var A=(v===(void 0))?
0:$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var B=A*2;
if(B>%_TypedArrayMaxSizeInHeap()){
var t=new d(B);
%_TypedArrayInitialize(s,3,t,0,B,true);
}else{
%_TypedArrayInitialize(s,3,null,0,B,true);
}
}
function Uint16ArrayConstructByArrayLike(s,C){
var v=C.length;
var A=$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var D=false;
var B=A*2;
if(B<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(s,3,null,0,B,false);
}else{
D=
%TypedArrayInitializeFromArrayLike(s,3,C,A);
}
if(!D){
for(var E=0;E<A;E++){
s[E]=C[E];
}
}
}
function Uint16ArrayConstructByIterable(s,F,G){
var H=new r();
var I=%_Call(G,F);
var J={
__proto__:null
};
J[g]=function(){return I;}
for(var K of J){
H.push(K);
}
Uint16ArrayConstructByArrayLike(s,H);
}
function Uint16ArrayConstructor(L,M,N){
if(%_IsConstructCall()){
if((%_ClassOf(L)==='ArrayBuffer')||(%_ClassOf(L)==='SharedArrayBuffer')){
Uint16ArrayConstructByArrayBuffer(this,L,M,N);
}else if((typeof(L)==='number')||(typeof(L)==='string')||
(typeof(L)==='boolean')||(L===(void 0))){
Uint16ArrayConstructByLength(this,L);
}else{
var G=L[g];
if((G===(void 0))||G===$arrayValues){
Uint16ArrayConstructByArrayLike(this,L);
}else{
Uint16ArrayConstructByIterable(this,L,G);
}
}
}else{
throw MakeTypeError(21,"Uint16Array")
}
}
function Uint16Array_GetBuffer(){
if(!(%_ClassOf(this)==='Uint16Array')){
throw MakeTypeError(36,"Uint16Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Uint16Array_GetByteLength(){
if(!(%_ClassOf(this)==='Uint16Array')){
throw MakeTypeError(36,"Uint16Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Uint16Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Uint16Array')){
throw MakeTypeError(36,"Uint16Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Uint16Array_GetLength(){
if(!(%_ClassOf(this)==='Uint16Array')){
throw MakeTypeError(36,"Uint16Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Uint16ArraySubArray(O,P){
if(!(%_ClassOf(this)==='Uint16Array')){
throw MakeTypeError(36,"Uint16Array.subarray",this);
}
var Q=(%_ToInteger(O));
if(!(P===(void 0))){
var R=(%_ToInteger(P));
var S=%_TypedArrayGetLength(this);
}else{
var S=%_TypedArrayGetLength(this);
var R=S;
}
if(Q<0){
Q=(0<S+Q?S+Q:0);
}else{
Q=(Q<S?Q:S);
}
if(R<0){
R=(0<S+R?S+R:0);
}else{
R=(R<S?R:S);
}
if(R<Q){
R=Q;
}
var z=R-Q;
var T=
%_ArrayBufferViewGetByteOffset(this)+Q*2;
return new k(%TypedArrayGetBuffer(this),
T,z);
}

function Int16ArrayConstructByArrayBuffer(s,t,u,v){
if(!(u===(void 0))){
u=
$toPositiveInteger(u,145);
}
if(!(v===(void 0))){
v=$toPositiveInteger(v,145);
}
var w=%_ArrayBufferGetByteLength(t);
var x;
if((u===(void 0))){
x=0;
}else{
x=u;
if(x % 2!==0){
throw MakeRangeError(144,
"start offset","Int16Array",2);
}
if(x>w){
throw MakeRangeError(146);
}
}
var y;
var z;
if((v===(void 0))){
if(w % 2!==0){
throw MakeRangeError(144,
"byte length","Int16Array",2);
}
y=w-x;
z=y/2;
}else{
var z=v;
y=z*2;
}
if((x+y>w)
||(z>%_MaxSmi())){
throw MakeRangeError(145);
}
%_TypedArrayInitialize(s,4,t,x,y,true);
}
function Int16ArrayConstructByLength(s,v){
var A=(v===(void 0))?
0:$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var B=A*2;
if(B>%_TypedArrayMaxSizeInHeap()){
var t=new d(B);
%_TypedArrayInitialize(s,4,t,0,B,true);
}else{
%_TypedArrayInitialize(s,4,null,0,B,true);
}
}
function Int16ArrayConstructByArrayLike(s,C){
var v=C.length;
var A=$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var D=false;
var B=A*2;
if(B<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(s,4,null,0,B,false);
}else{
D=
%TypedArrayInitializeFromArrayLike(s,4,C,A);
}
if(!D){
for(var E=0;E<A;E++){
s[E]=C[E];
}
}
}
function Int16ArrayConstructByIterable(s,F,G){
var H=new r();
var I=%_Call(G,F);
var J={
__proto__:null
};
J[g]=function(){return I;}
for(var K of J){
H.push(K);
}
Int16ArrayConstructByArrayLike(s,H);
}
function Int16ArrayConstructor(L,M,N){
if(%_IsConstructCall()){
if((%_ClassOf(L)==='ArrayBuffer')||(%_ClassOf(L)==='SharedArrayBuffer')){
Int16ArrayConstructByArrayBuffer(this,L,M,N);
}else if((typeof(L)==='number')||(typeof(L)==='string')||
(typeof(L)==='boolean')||(L===(void 0))){
Int16ArrayConstructByLength(this,L);
}else{
var G=L[g];
if((G===(void 0))||G===$arrayValues){
Int16ArrayConstructByArrayLike(this,L);
}else{
Int16ArrayConstructByIterable(this,L,G);
}
}
}else{
throw MakeTypeError(21,"Int16Array")
}
}
function Int16Array_GetBuffer(){
if(!(%_ClassOf(this)==='Int16Array')){
throw MakeTypeError(36,"Int16Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Int16Array_GetByteLength(){
if(!(%_ClassOf(this)==='Int16Array')){
throw MakeTypeError(36,"Int16Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Int16Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Int16Array')){
throw MakeTypeError(36,"Int16Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Int16Array_GetLength(){
if(!(%_ClassOf(this)==='Int16Array')){
throw MakeTypeError(36,"Int16Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Int16ArraySubArray(O,P){
if(!(%_ClassOf(this)==='Int16Array')){
throw MakeTypeError(36,"Int16Array.subarray",this);
}
var Q=(%_ToInteger(O));
if(!(P===(void 0))){
var R=(%_ToInteger(P));
var S=%_TypedArrayGetLength(this);
}else{
var S=%_TypedArrayGetLength(this);
var R=S;
}
if(Q<0){
Q=(0<S+Q?S+Q:0);
}else{
Q=(Q<S?Q:S);
}
if(R<0){
R=(0<S+R?S+R:0);
}else{
R=(R<S?R:S);
}
if(R<Q){
R=Q;
}
var z=R-Q;
var T=
%_ArrayBufferViewGetByteOffset(this)+Q*2;
return new l(%TypedArrayGetBuffer(this),
T,z);
}

function Uint32ArrayConstructByArrayBuffer(s,t,u,v){
if(!(u===(void 0))){
u=
$toPositiveInteger(u,145);
}
if(!(v===(void 0))){
v=$toPositiveInteger(v,145);
}
var w=%_ArrayBufferGetByteLength(t);
var x;
if((u===(void 0))){
x=0;
}else{
x=u;
if(x % 4!==0){
throw MakeRangeError(144,
"start offset","Uint32Array",4);
}
if(x>w){
throw MakeRangeError(146);
}
}
var y;
var z;
if((v===(void 0))){
if(w % 4!==0){
throw MakeRangeError(144,
"byte length","Uint32Array",4);
}
y=w-x;
z=y/4;
}else{
var z=v;
y=z*4;
}
if((x+y>w)
||(z>%_MaxSmi())){
throw MakeRangeError(145);
}
%_TypedArrayInitialize(s,5,t,x,y,true);
}
function Uint32ArrayConstructByLength(s,v){
var A=(v===(void 0))?
0:$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var B=A*4;
if(B>%_TypedArrayMaxSizeInHeap()){
var t=new d(B);
%_TypedArrayInitialize(s,5,t,0,B,true);
}else{
%_TypedArrayInitialize(s,5,null,0,B,true);
}
}
function Uint32ArrayConstructByArrayLike(s,C){
var v=C.length;
var A=$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var D=false;
var B=A*4;
if(B<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(s,5,null,0,B,false);
}else{
D=
%TypedArrayInitializeFromArrayLike(s,5,C,A);
}
if(!D){
for(var E=0;E<A;E++){
s[E]=C[E];
}
}
}
function Uint32ArrayConstructByIterable(s,F,G){
var H=new r();
var I=%_Call(G,F);
var J={
__proto__:null
};
J[g]=function(){return I;}
for(var K of J){
H.push(K);
}
Uint32ArrayConstructByArrayLike(s,H);
}
function Uint32ArrayConstructor(L,M,N){
if(%_IsConstructCall()){
if((%_ClassOf(L)==='ArrayBuffer')||(%_ClassOf(L)==='SharedArrayBuffer')){
Uint32ArrayConstructByArrayBuffer(this,L,M,N);
}else if((typeof(L)==='number')||(typeof(L)==='string')||
(typeof(L)==='boolean')||(L===(void 0))){
Uint32ArrayConstructByLength(this,L);
}else{
var G=L[g];
if((G===(void 0))||G===$arrayValues){
Uint32ArrayConstructByArrayLike(this,L);
}else{
Uint32ArrayConstructByIterable(this,L,G);
}
}
}else{
throw MakeTypeError(21,"Uint32Array")
}
}
function Uint32Array_GetBuffer(){
if(!(%_ClassOf(this)==='Uint32Array')){
throw MakeTypeError(36,"Uint32Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Uint32Array_GetByteLength(){
if(!(%_ClassOf(this)==='Uint32Array')){
throw MakeTypeError(36,"Uint32Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Uint32Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Uint32Array')){
throw MakeTypeError(36,"Uint32Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Uint32Array_GetLength(){
if(!(%_ClassOf(this)==='Uint32Array')){
throw MakeTypeError(36,"Uint32Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Uint32ArraySubArray(O,P){
if(!(%_ClassOf(this)==='Uint32Array')){
throw MakeTypeError(36,"Uint32Array.subarray",this);
}
var Q=(%_ToInteger(O));
if(!(P===(void 0))){
var R=(%_ToInteger(P));
var S=%_TypedArrayGetLength(this);
}else{
var S=%_TypedArrayGetLength(this);
var R=S;
}
if(Q<0){
Q=(0<S+Q?S+Q:0);
}else{
Q=(Q<S?Q:S);
}
if(R<0){
R=(0<S+R?S+R:0);
}else{
R=(R<S?R:S);
}
if(R<Q){
R=Q;
}
var z=R-Q;
var T=
%_ArrayBufferViewGetByteOffset(this)+Q*4;
return new m(%TypedArrayGetBuffer(this),
T,z);
}

function Int32ArrayConstructByArrayBuffer(s,t,u,v){
if(!(u===(void 0))){
u=
$toPositiveInteger(u,145);
}
if(!(v===(void 0))){
v=$toPositiveInteger(v,145);
}
var w=%_ArrayBufferGetByteLength(t);
var x;
if((u===(void 0))){
x=0;
}else{
x=u;
if(x % 4!==0){
throw MakeRangeError(144,
"start offset","Int32Array",4);
}
if(x>w){
throw MakeRangeError(146);
}
}
var y;
var z;
if((v===(void 0))){
if(w % 4!==0){
throw MakeRangeError(144,
"byte length","Int32Array",4);
}
y=w-x;
z=y/4;
}else{
var z=v;
y=z*4;
}
if((x+y>w)
||(z>%_MaxSmi())){
throw MakeRangeError(145);
}
%_TypedArrayInitialize(s,6,t,x,y,true);
}
function Int32ArrayConstructByLength(s,v){
var A=(v===(void 0))?
0:$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var B=A*4;
if(B>%_TypedArrayMaxSizeInHeap()){
var t=new d(B);
%_TypedArrayInitialize(s,6,t,0,B,true);
}else{
%_TypedArrayInitialize(s,6,null,0,B,true);
}
}
function Int32ArrayConstructByArrayLike(s,C){
var v=C.length;
var A=$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var D=false;
var B=A*4;
if(B<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(s,6,null,0,B,false);
}else{
D=
%TypedArrayInitializeFromArrayLike(s,6,C,A);
}
if(!D){
for(var E=0;E<A;E++){
s[E]=C[E];
}
}
}
function Int32ArrayConstructByIterable(s,F,G){
var H=new r();
var I=%_Call(G,F);
var J={
__proto__:null
};
J[g]=function(){return I;}
for(var K of J){
H.push(K);
}
Int32ArrayConstructByArrayLike(s,H);
}
function Int32ArrayConstructor(L,M,N){
if(%_IsConstructCall()){
if((%_ClassOf(L)==='ArrayBuffer')||(%_ClassOf(L)==='SharedArrayBuffer')){
Int32ArrayConstructByArrayBuffer(this,L,M,N);
}else if((typeof(L)==='number')||(typeof(L)==='string')||
(typeof(L)==='boolean')||(L===(void 0))){
Int32ArrayConstructByLength(this,L);
}else{
var G=L[g];
if((G===(void 0))||G===$arrayValues){
Int32ArrayConstructByArrayLike(this,L);
}else{
Int32ArrayConstructByIterable(this,L,G);
}
}
}else{
throw MakeTypeError(21,"Int32Array")
}
}
function Int32Array_GetBuffer(){
if(!(%_ClassOf(this)==='Int32Array')){
throw MakeTypeError(36,"Int32Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Int32Array_GetByteLength(){
if(!(%_ClassOf(this)==='Int32Array')){
throw MakeTypeError(36,"Int32Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Int32Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Int32Array')){
throw MakeTypeError(36,"Int32Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Int32Array_GetLength(){
if(!(%_ClassOf(this)==='Int32Array')){
throw MakeTypeError(36,"Int32Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Int32ArraySubArray(O,P){
if(!(%_ClassOf(this)==='Int32Array')){
throw MakeTypeError(36,"Int32Array.subarray",this);
}
var Q=(%_ToInteger(O));
if(!(P===(void 0))){
var R=(%_ToInteger(P));
var S=%_TypedArrayGetLength(this);
}else{
var S=%_TypedArrayGetLength(this);
var R=S;
}
if(Q<0){
Q=(0<S+Q?S+Q:0);
}else{
Q=(Q<S?Q:S);
}
if(R<0){
R=(0<S+R?S+R:0);
}else{
R=(R<S?R:S);
}
if(R<Q){
R=Q;
}
var z=R-Q;
var T=
%_ArrayBufferViewGetByteOffset(this)+Q*4;
return new n(%TypedArrayGetBuffer(this),
T,z);
}

function Float32ArrayConstructByArrayBuffer(s,t,u,v){
if(!(u===(void 0))){
u=
$toPositiveInteger(u,145);
}
if(!(v===(void 0))){
v=$toPositiveInteger(v,145);
}
var w=%_ArrayBufferGetByteLength(t);
var x;
if((u===(void 0))){
x=0;
}else{
x=u;
if(x % 4!==0){
throw MakeRangeError(144,
"start offset","Float32Array",4);
}
if(x>w){
throw MakeRangeError(146);
}
}
var y;
var z;
if((v===(void 0))){
if(w % 4!==0){
throw MakeRangeError(144,
"byte length","Float32Array",4);
}
y=w-x;
z=y/4;
}else{
var z=v;
y=z*4;
}
if((x+y>w)
||(z>%_MaxSmi())){
throw MakeRangeError(145);
}
%_TypedArrayInitialize(s,7,t,x,y,true);
}
function Float32ArrayConstructByLength(s,v){
var A=(v===(void 0))?
0:$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var B=A*4;
if(B>%_TypedArrayMaxSizeInHeap()){
var t=new d(B);
%_TypedArrayInitialize(s,7,t,0,B,true);
}else{
%_TypedArrayInitialize(s,7,null,0,B,true);
}
}
function Float32ArrayConstructByArrayLike(s,C){
var v=C.length;
var A=$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var D=false;
var B=A*4;
if(B<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(s,7,null,0,B,false);
}else{
D=
%TypedArrayInitializeFromArrayLike(s,7,C,A);
}
if(!D){
for(var E=0;E<A;E++){
s[E]=C[E];
}
}
}
function Float32ArrayConstructByIterable(s,F,G){
var H=new r();
var I=%_Call(G,F);
var J={
__proto__:null
};
J[g]=function(){return I;}
for(var K of J){
H.push(K);
}
Float32ArrayConstructByArrayLike(s,H);
}
function Float32ArrayConstructor(L,M,N){
if(%_IsConstructCall()){
if((%_ClassOf(L)==='ArrayBuffer')||(%_ClassOf(L)==='SharedArrayBuffer')){
Float32ArrayConstructByArrayBuffer(this,L,M,N);
}else if((typeof(L)==='number')||(typeof(L)==='string')||
(typeof(L)==='boolean')||(L===(void 0))){
Float32ArrayConstructByLength(this,L);
}else{
var G=L[g];
if((G===(void 0))||G===$arrayValues){
Float32ArrayConstructByArrayLike(this,L);
}else{
Float32ArrayConstructByIterable(this,L,G);
}
}
}else{
throw MakeTypeError(21,"Float32Array")
}
}
function Float32Array_GetBuffer(){
if(!(%_ClassOf(this)==='Float32Array')){
throw MakeTypeError(36,"Float32Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Float32Array_GetByteLength(){
if(!(%_ClassOf(this)==='Float32Array')){
throw MakeTypeError(36,"Float32Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Float32Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Float32Array')){
throw MakeTypeError(36,"Float32Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Float32Array_GetLength(){
if(!(%_ClassOf(this)==='Float32Array')){
throw MakeTypeError(36,"Float32Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Float32ArraySubArray(O,P){
if(!(%_ClassOf(this)==='Float32Array')){
throw MakeTypeError(36,"Float32Array.subarray",this);
}
var Q=(%_ToInteger(O));
if(!(P===(void 0))){
var R=(%_ToInteger(P));
var S=%_TypedArrayGetLength(this);
}else{
var S=%_TypedArrayGetLength(this);
var R=S;
}
if(Q<0){
Q=(0<S+Q?S+Q:0);
}else{
Q=(Q<S?Q:S);
}
if(R<0){
R=(0<S+R?S+R:0);
}else{
R=(R<S?R:S);
}
if(R<Q){
R=Q;
}
var z=R-Q;
var T=
%_ArrayBufferViewGetByteOffset(this)+Q*4;
return new o(%TypedArrayGetBuffer(this),
T,z);
}

function Float64ArrayConstructByArrayBuffer(s,t,u,v){
if(!(u===(void 0))){
u=
$toPositiveInteger(u,145);
}
if(!(v===(void 0))){
v=$toPositiveInteger(v,145);
}
var w=%_ArrayBufferGetByteLength(t);
var x;
if((u===(void 0))){
x=0;
}else{
x=u;
if(x % 8!==0){
throw MakeRangeError(144,
"start offset","Float64Array",8);
}
if(x>w){
throw MakeRangeError(146);
}
}
var y;
var z;
if((v===(void 0))){
if(w % 8!==0){
throw MakeRangeError(144,
"byte length","Float64Array",8);
}
y=w-x;
z=y/8;
}else{
var z=v;
y=z*8;
}
if((x+y>w)
||(z>%_MaxSmi())){
throw MakeRangeError(145);
}
%_TypedArrayInitialize(s,8,t,x,y,true);
}
function Float64ArrayConstructByLength(s,v){
var A=(v===(void 0))?
0:$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var B=A*8;
if(B>%_TypedArrayMaxSizeInHeap()){
var t=new d(B);
%_TypedArrayInitialize(s,8,t,0,B,true);
}else{
%_TypedArrayInitialize(s,8,null,0,B,true);
}
}
function Float64ArrayConstructByArrayLike(s,C){
var v=C.length;
var A=$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var D=false;
var B=A*8;
if(B<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(s,8,null,0,B,false);
}else{
D=
%TypedArrayInitializeFromArrayLike(s,8,C,A);
}
if(!D){
for(var E=0;E<A;E++){
s[E]=C[E];
}
}
}
function Float64ArrayConstructByIterable(s,F,G){
var H=new r();
var I=%_Call(G,F);
var J={
__proto__:null
};
J[g]=function(){return I;}
for(var K of J){
H.push(K);
}
Float64ArrayConstructByArrayLike(s,H);
}
function Float64ArrayConstructor(L,M,N){
if(%_IsConstructCall()){
if((%_ClassOf(L)==='ArrayBuffer')||(%_ClassOf(L)==='SharedArrayBuffer')){
Float64ArrayConstructByArrayBuffer(this,L,M,N);
}else if((typeof(L)==='number')||(typeof(L)==='string')||
(typeof(L)==='boolean')||(L===(void 0))){
Float64ArrayConstructByLength(this,L);
}else{
var G=L[g];
if((G===(void 0))||G===$arrayValues){
Float64ArrayConstructByArrayLike(this,L);
}else{
Float64ArrayConstructByIterable(this,L,G);
}
}
}else{
throw MakeTypeError(21,"Float64Array")
}
}
function Float64Array_GetBuffer(){
if(!(%_ClassOf(this)==='Float64Array')){
throw MakeTypeError(36,"Float64Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Float64Array_GetByteLength(){
if(!(%_ClassOf(this)==='Float64Array')){
throw MakeTypeError(36,"Float64Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Float64Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Float64Array')){
throw MakeTypeError(36,"Float64Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Float64Array_GetLength(){
if(!(%_ClassOf(this)==='Float64Array')){
throw MakeTypeError(36,"Float64Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Float64ArraySubArray(O,P){
if(!(%_ClassOf(this)==='Float64Array')){
throw MakeTypeError(36,"Float64Array.subarray",this);
}
var Q=(%_ToInteger(O));
if(!(P===(void 0))){
var R=(%_ToInteger(P));
var S=%_TypedArrayGetLength(this);
}else{
var S=%_TypedArrayGetLength(this);
var R=S;
}
if(Q<0){
Q=(0<S+Q?S+Q:0);
}else{
Q=(Q<S?Q:S);
}
if(R<0){
R=(0<S+R?S+R:0);
}else{
R=(R<S?R:S);
}
if(R<Q){
R=Q;
}
var z=R-Q;
var T=
%_ArrayBufferViewGetByteOffset(this)+Q*8;
return new p(%TypedArrayGetBuffer(this),
T,z);
}

function Uint8ClampedArrayConstructByArrayBuffer(s,t,u,v){
if(!(u===(void 0))){
u=
$toPositiveInteger(u,145);
}
if(!(v===(void 0))){
v=$toPositiveInteger(v,145);
}
var w=%_ArrayBufferGetByteLength(t);
var x;
if((u===(void 0))){
x=0;
}else{
x=u;
if(x % 1!==0){
throw MakeRangeError(144,
"start offset","Uint8ClampedArray",1);
}
if(x>w){
throw MakeRangeError(146);
}
}
var y;
var z;
if((v===(void 0))){
if(w % 1!==0){
throw MakeRangeError(144,
"byte length","Uint8ClampedArray",1);
}
y=w-x;
z=y/1;
}else{
var z=v;
y=z*1;
}
if((x+y>w)
||(z>%_MaxSmi())){
throw MakeRangeError(145);
}
%_TypedArrayInitialize(s,9,t,x,y,true);
}
function Uint8ClampedArrayConstructByLength(s,v){
var A=(v===(void 0))?
0:$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var B=A*1;
if(B>%_TypedArrayMaxSizeInHeap()){
var t=new d(B);
%_TypedArrayInitialize(s,9,t,0,B,true);
}else{
%_TypedArrayInitialize(s,9,null,0,B,true);
}
}
function Uint8ClampedArrayConstructByArrayLike(s,C){
var v=C.length;
var A=$toPositiveInteger(v,145);
if(A>%_MaxSmi()){
throw MakeRangeError(145);
}
var D=false;
var B=A*1;
if(B<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(s,9,null,0,B,false);
}else{
D=
%TypedArrayInitializeFromArrayLike(s,9,C,A);
}
if(!D){
for(var E=0;E<A;E++){
s[E]=C[E];
}
}
}
function Uint8ClampedArrayConstructByIterable(s,F,G){
var H=new r();
var I=%_Call(G,F);
var J={
__proto__:null
};
J[g]=function(){return I;}
for(var K of J){
H.push(K);
}
Uint8ClampedArrayConstructByArrayLike(s,H);
}
function Uint8ClampedArrayConstructor(L,M,N){
if(%_IsConstructCall()){
if((%_ClassOf(L)==='ArrayBuffer')||(%_ClassOf(L)==='SharedArrayBuffer')){
Uint8ClampedArrayConstructByArrayBuffer(this,L,M,N);
}else if((typeof(L)==='number')||(typeof(L)==='string')||
(typeof(L)==='boolean')||(L===(void 0))){
Uint8ClampedArrayConstructByLength(this,L);
}else{
var G=L[g];
if((G===(void 0))||G===$arrayValues){
Uint8ClampedArrayConstructByArrayLike(this,L);
}else{
Uint8ClampedArrayConstructByIterable(this,L,G);
}
}
}else{
throw MakeTypeError(21,"Uint8ClampedArray")
}
}
function Uint8ClampedArray_GetBuffer(){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw MakeTypeError(36,"Uint8ClampedArray.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Uint8ClampedArray_GetByteLength(){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw MakeTypeError(36,"Uint8ClampedArray.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Uint8ClampedArray_GetByteOffset(){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw MakeTypeError(36,"Uint8ClampedArray.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Uint8ClampedArray_GetLength(){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw MakeTypeError(36,"Uint8ClampedArray.length",this);
}
return %_TypedArrayGetLength(this);
}
function Uint8ClampedArraySubArray(O,P){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw MakeTypeError(36,"Uint8ClampedArray.subarray",this);
}
var Q=(%_ToInteger(O));
if(!(P===(void 0))){
var R=(%_ToInteger(P));
var S=%_TypedArrayGetLength(this);
}else{
var S=%_TypedArrayGetLength(this);
var R=S;
}
if(Q<0){
Q=(0<S+Q?S+Q:0);
}else{
Q=(Q<S?Q:S);
}
if(R<0){
R=(0<S+R?S+R:0);
}else{
R=(R<S?R:S);
}
if(R<Q){
R=Q;
}
var z=R-Q;
var T=
%_ArrayBufferViewGetByteOffset(this)+Q*1;
return new q(%TypedArrayGetBuffer(this),
T,z);
}


function TypedArraySetFromArrayLike(U,V,W,x){
if(x>0){
for(var E=0;E<W;E++){
U[x+E]=V[E];
}
}
else{
for(var E=0;E<W;E++){
U[E]=V[E];
}
}
}
function TypedArraySetFromOverlappingTypedArray(U,V,x){
var X=V.BYTES_PER_ELEMENT;
var Y=U.BYTES_PER_ELEMENT;
var W=V.length;
function CopyLeftPart(){
var Z=U.byteOffset+(x+1)*Y;
var aa=V.byteOffset;
for(var ab=0;
ab<W&&Z<=aa;
ab++){
U[x+ab]=V[ab];
Z+=Y;
aa+=X;
}
return ab;
}
var ab=CopyLeftPart();
function CopyRightPart(){
var Z=
U.byteOffset+(x+W-1)*Y;
var aa=
V.byteOffset+W*X;
for(var ac=W-1;
ac>=ab&&Z>=aa;
ac--){
U[x+ac]=V[ac];
Z-=Y;
aa-=X;
}
return ac;
}
var ac=CopyRightPart();
var ad=new c(ac+1-ab);
for(var E=ab;E<=ac;E++){
ad[E-ab]=V[E];
}
for(E=ab;E<=ac;E++){
U[x+E]=ad[E-ab];
}
}
function TypedArraySet(s,x){
var ae=(x===(void 0))?0:(%_ToInteger(x));
if(ae<0)throw MakeTypeError(154);
if(ae>%_MaxSmi()){
throw MakeRangeError(155);
}
switch(%TypedArraySetFastCases(this,s,ae)){
case 0:
return;
case 1:
TypedArraySetFromOverlappingTypedArray(this,s,ae);
return;
case 2:
TypedArraySetFromArrayLike(this,s,s.length,ae);
return;
case 3:
var A=s.length;
if((A===(void 0))){
if((typeof(s)==='number')){
throw MakeTypeError(39);
}
return;
}
A=(%ToLength(A));
if(ae+A>this.length){
throw MakeRangeError(155);
}
TypedArraySetFromArrayLike(this,s,A,ae);
return;
}
}
function TypedArrayGetToStringTag(){
if(!%_IsTypedArray(this))return;
var af=%_ClassOf(this);
if((af===(void 0)))return;
return af;
}
%SetCode(i,Uint8ArrayConstructor);
%FunctionSetPrototype(i,new f());
%AddNamedProperty(i,"BYTES_PER_ELEMENT",1,
1|2|4);
%AddNamedProperty(i.prototype,
"constructor",a.Uint8Array,2);
%AddNamedProperty(i.prototype,
"BYTES_PER_ELEMENT",1,
1|2|4);
b.InstallGetter(i.prototype,"buffer",Uint8Array_GetBuffer);
b.InstallGetter(i.prototype,"byteOffset",Uint8Array_GetByteOffset,
2|4);
b.InstallGetter(i.prototype,"byteLength",Uint8Array_GetByteLength,
2|4);
b.InstallGetter(i.prototype,"length",Uint8Array_GetLength,
2|4);
b.InstallGetter(i.prototype,h,
TypedArrayGetToStringTag);
b.InstallFunctions(i.prototype,2,[
"subarray",Uint8ArraySubArray,
"set",TypedArraySet
]);

%SetCode(j,Int8ArrayConstructor);
%FunctionSetPrototype(j,new f());
%AddNamedProperty(j,"BYTES_PER_ELEMENT",1,
1|2|4);
%AddNamedProperty(j.prototype,
"constructor",a.Int8Array,2);
%AddNamedProperty(j.prototype,
"BYTES_PER_ELEMENT",1,
1|2|4);
b.InstallGetter(j.prototype,"buffer",Int8Array_GetBuffer);
b.InstallGetter(j.prototype,"byteOffset",Int8Array_GetByteOffset,
2|4);
b.InstallGetter(j.prototype,"byteLength",Int8Array_GetByteLength,
2|4);
b.InstallGetter(j.prototype,"length",Int8Array_GetLength,
2|4);
b.InstallGetter(j.prototype,h,
TypedArrayGetToStringTag);
b.InstallFunctions(j.prototype,2,[
"subarray",Int8ArraySubArray,
"set",TypedArraySet
]);

%SetCode(k,Uint16ArrayConstructor);
%FunctionSetPrototype(k,new f());
%AddNamedProperty(k,"BYTES_PER_ELEMENT",2,
1|2|4);
%AddNamedProperty(k.prototype,
"constructor",a.Uint16Array,2);
%AddNamedProperty(k.prototype,
"BYTES_PER_ELEMENT",2,
1|2|4);
b.InstallGetter(k.prototype,"buffer",Uint16Array_GetBuffer);
b.InstallGetter(k.prototype,"byteOffset",Uint16Array_GetByteOffset,
2|4);
b.InstallGetter(k.prototype,"byteLength",Uint16Array_GetByteLength,
2|4);
b.InstallGetter(k.prototype,"length",Uint16Array_GetLength,
2|4);
b.InstallGetter(k.prototype,h,
TypedArrayGetToStringTag);
b.InstallFunctions(k.prototype,2,[
"subarray",Uint16ArraySubArray,
"set",TypedArraySet
]);

%SetCode(l,Int16ArrayConstructor);
%FunctionSetPrototype(l,new f());
%AddNamedProperty(l,"BYTES_PER_ELEMENT",2,
1|2|4);
%AddNamedProperty(l.prototype,
"constructor",a.Int16Array,2);
%AddNamedProperty(l.prototype,
"BYTES_PER_ELEMENT",2,
1|2|4);
b.InstallGetter(l.prototype,"buffer",Int16Array_GetBuffer);
b.InstallGetter(l.prototype,"byteOffset",Int16Array_GetByteOffset,
2|4);
b.InstallGetter(l.prototype,"byteLength",Int16Array_GetByteLength,
2|4);
b.InstallGetter(l.prototype,"length",Int16Array_GetLength,
2|4);
b.InstallGetter(l.prototype,h,
TypedArrayGetToStringTag);
b.InstallFunctions(l.prototype,2,[
"subarray",Int16ArraySubArray,
"set",TypedArraySet
]);

%SetCode(m,Uint32ArrayConstructor);
%FunctionSetPrototype(m,new f());
%AddNamedProperty(m,"BYTES_PER_ELEMENT",4,
1|2|4);
%AddNamedProperty(m.prototype,
"constructor",a.Uint32Array,2);
%AddNamedProperty(m.prototype,
"BYTES_PER_ELEMENT",4,
1|2|4);
b.InstallGetter(m.prototype,"buffer",Uint32Array_GetBuffer);
b.InstallGetter(m.prototype,"byteOffset",Uint32Array_GetByteOffset,
2|4);
b.InstallGetter(m.prototype,"byteLength",Uint32Array_GetByteLength,
2|4);
b.InstallGetter(m.prototype,"length",Uint32Array_GetLength,
2|4);
b.InstallGetter(m.prototype,h,
TypedArrayGetToStringTag);
b.InstallFunctions(m.prototype,2,[
"subarray",Uint32ArraySubArray,
"set",TypedArraySet
]);

%SetCode(n,Int32ArrayConstructor);
%FunctionSetPrototype(n,new f());
%AddNamedProperty(n,"BYTES_PER_ELEMENT",4,
1|2|4);
%AddNamedProperty(n.prototype,
"constructor",a.Int32Array,2);
%AddNamedProperty(n.prototype,
"BYTES_PER_ELEMENT",4,
1|2|4);
b.InstallGetter(n.prototype,"buffer",Int32Array_GetBuffer);
b.InstallGetter(n.prototype,"byteOffset",Int32Array_GetByteOffset,
2|4);
b.InstallGetter(n.prototype,"byteLength",Int32Array_GetByteLength,
2|4);
b.InstallGetter(n.prototype,"length",Int32Array_GetLength,
2|4);
b.InstallGetter(n.prototype,h,
TypedArrayGetToStringTag);
b.InstallFunctions(n.prototype,2,[
"subarray",Int32ArraySubArray,
"set",TypedArraySet
]);

%SetCode(o,Float32ArrayConstructor);
%FunctionSetPrototype(o,new f());
%AddNamedProperty(o,"BYTES_PER_ELEMENT",4,
1|2|4);
%AddNamedProperty(o.prototype,
"constructor",a.Float32Array,2);
%AddNamedProperty(o.prototype,
"BYTES_PER_ELEMENT",4,
1|2|4);
b.InstallGetter(o.prototype,"buffer",Float32Array_GetBuffer);
b.InstallGetter(o.prototype,"byteOffset",Float32Array_GetByteOffset,
2|4);
b.InstallGetter(o.prototype,"byteLength",Float32Array_GetByteLength,
2|4);
b.InstallGetter(o.prototype,"length",Float32Array_GetLength,
2|4);
b.InstallGetter(o.prototype,h,
TypedArrayGetToStringTag);
b.InstallFunctions(o.prototype,2,[
"subarray",Float32ArraySubArray,
"set",TypedArraySet
]);

%SetCode(p,Float64ArrayConstructor);
%FunctionSetPrototype(p,new f());
%AddNamedProperty(p,"BYTES_PER_ELEMENT",8,
1|2|4);
%AddNamedProperty(p.prototype,
"constructor",a.Float64Array,2);
%AddNamedProperty(p.prototype,
"BYTES_PER_ELEMENT",8,
1|2|4);
b.InstallGetter(p.prototype,"buffer",Float64Array_GetBuffer);
b.InstallGetter(p.prototype,"byteOffset",Float64Array_GetByteOffset,
2|4);
b.InstallGetter(p.prototype,"byteLength",Float64Array_GetByteLength,
2|4);
b.InstallGetter(p.prototype,"length",Float64Array_GetLength,
2|4);
b.InstallGetter(p.prototype,h,
TypedArrayGetToStringTag);
b.InstallFunctions(p.prototype,2,[
"subarray",Float64ArraySubArray,
"set",TypedArraySet
]);

%SetCode(q,Uint8ClampedArrayConstructor);
%FunctionSetPrototype(q,new f());
%AddNamedProperty(q,"BYTES_PER_ELEMENT",1,
1|2|4);
%AddNamedProperty(q.prototype,
"constructor",a.Uint8ClampedArray,2);
%AddNamedProperty(q.prototype,
"BYTES_PER_ELEMENT",1,
1|2|4);
b.InstallGetter(q.prototype,"buffer",Uint8ClampedArray_GetBuffer);
b.InstallGetter(q.prototype,"byteOffset",Uint8ClampedArray_GetByteOffset,
2|4);
b.InstallGetter(q.prototype,"byteLength",Uint8ClampedArray_GetByteLength,
2|4);
b.InstallGetter(q.prototype,"length",Uint8ClampedArray_GetLength,
2|4);
b.InstallGetter(q.prototype,h,
TypedArrayGetToStringTag);
b.InstallFunctions(q.prototype,2,[
"subarray",Uint8ClampedArraySubArray,
"set",TypedArraySet
]);


function DataViewConstructor(t,u,B){
if(%_IsConstructCall()){
if(!(%_ClassOf(t)==='ArrayBuffer'))throw MakeTypeError(23);
if(!(u===(void 0))){
u=$toPositiveInteger(u,137);
}
if(!(B===(void 0))){
B=(%_ToInteger(B));
}
var w=%_ArrayBufferGetByteLength(t);
var x=(u===(void 0))?0:u;
if(x>w)throw MakeRangeError(137);
var v=(B===(void 0))
?w-x
:B;
if(v<0||x+v>w){
throw new MakeRangeError(136);
}
%_DataViewInitialize(this,t,x,v);
}else{
throw MakeTypeError(21,"DataView");
}
}
function DataViewGetBufferJS(){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,'DataView.buffer',this);
}
return %DataViewGetBuffer(this);
}
function DataViewGetByteOffset(){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.byteOffset',this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function DataViewGetByteLength(){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.byteLength',this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function DataViewGetInt8JS(x,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getInt8',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
return %DataViewGetInt8(this,x,!!ag);
}
function DataViewSetInt8JS(x,K,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setInt8',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
%DataViewSetInt8(this,x,(%_ToNumber(K)),!!ag);
}

function DataViewGetUint8JS(x,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getUint8',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
return %DataViewGetUint8(this,x,!!ag);
}
function DataViewSetUint8JS(x,K,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setUint8',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
%DataViewSetUint8(this,x,(%_ToNumber(K)),!!ag);
}

function DataViewGetInt16JS(x,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getInt16',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
return %DataViewGetInt16(this,x,!!ag);
}
function DataViewSetInt16JS(x,K,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setInt16',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
%DataViewSetInt16(this,x,(%_ToNumber(K)),!!ag);
}

function DataViewGetUint16JS(x,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getUint16',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
return %DataViewGetUint16(this,x,!!ag);
}
function DataViewSetUint16JS(x,K,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setUint16',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
%DataViewSetUint16(this,x,(%_ToNumber(K)),!!ag);
}

function DataViewGetInt32JS(x,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getInt32',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
return %DataViewGetInt32(this,x,!!ag);
}
function DataViewSetInt32JS(x,K,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setInt32',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
%DataViewSetInt32(this,x,(%_ToNumber(K)),!!ag);
}

function DataViewGetUint32JS(x,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getUint32',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
return %DataViewGetUint32(this,x,!!ag);
}
function DataViewSetUint32JS(x,K,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setUint32',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
%DataViewSetUint32(this,x,(%_ToNumber(K)),!!ag);
}

function DataViewGetFloat32JS(x,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getFloat32',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
return %DataViewGetFloat32(this,x,!!ag);
}
function DataViewSetFloat32JS(x,K,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setFloat32',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
%DataViewSetFloat32(this,x,(%_ToNumber(K)),!!ag);
}

function DataViewGetFloat64JS(x,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getFloat64',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
return %DataViewGetFloat64(this,x,!!ag);
}
function DataViewSetFloat64JS(x,K,ag){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setFloat64',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
x=$toPositiveInteger(x,135);
%DataViewSetFloat64(this,x,(%_ToNumber(K)),!!ag);
}


%SetCode(e,DataViewConstructor);
%FunctionSetPrototype(e,new f);
%AddNamedProperty(e.prototype,"constructor",e,
2);
%AddNamedProperty(e.prototype,h,"DataView",
1|2);
b.InstallGetter(e.prototype,"buffer",DataViewGetBufferJS);
b.InstallGetter(e.prototype,"byteOffset",
DataViewGetByteOffset);
b.InstallGetter(e.prototype,"byteLength",
DataViewGetByteLength);
b.InstallFunctions(e.prototype,2,[
"getInt8",DataViewGetInt8JS,
"setInt8",DataViewSetInt8JS,
"getUint8",DataViewGetUint8JS,
"setUint8",DataViewSetUint8JS,
"getInt16",DataViewGetInt16JS,
"setInt16",DataViewSetInt16JS,
"getUint16",DataViewGetUint16JS,
"setUint16",DataViewSetUint16JS,
"getInt32",DataViewGetInt32JS,
"setInt32",DataViewSetInt32JS,
"getUint32",DataViewGetUint32JS,
"setUint32",DataViewSetUint32JS,
"getFloat32",DataViewGetFloat32JS,
"setFloat32",DataViewSetFloat32JS,
"getFloat64",DataViewGetFloat64JS,
"setFloat64",DataViewSetFloat64JS
]);
})

Hiterator-prototypeÕ
var $iteratorPrototype;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
var d=b.ImportNow("iterator_symbol");
function IteratorPrototypeIterator(){
return this;
}
b.SetFunctionName(IteratorPrototypeIterator,d);
%AddNamedProperty($iteratorPrototype,d,
IteratorPrototypeIterator,2);
})

$generator
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Function;
var d;
var e=b.ImportNow("to_string_tag_symbol");
b.Import(function(f){
d=f.NewFunctionString;
});
function GeneratorObjectNext(g){
if(!(%_ClassOf(this)==='Generator')){
throw MakeTypeError(36,
'[Generator].prototype.next',this);
}
var h=%GeneratorGetContinuation(this);
if(h>0){
if((%_DebugIsActive()!=0))%DebugPrepareStepInIfStepping(this);
try{
return %_GeneratorNext(this,g);
}catch(e){
%GeneratorClose(this);
throw e;
}
}else if(h==0){
return{value:void 0,done:true};
}else{
throw MakeTypeError(34);
}
}
function GeneratorObjectThrow(i){
if(!(%_ClassOf(this)==='Generator')){
throw MakeTypeError(36,
'[Generator].prototype.throw',this);
}
var h=%GeneratorGetContinuation(this);
if(h>0){
try{
return %_GeneratorThrow(this,i);
}catch(e){
%GeneratorClose(this);
throw e;
}
}else if(h==0){
throw i;
}else{
throw MakeTypeError(34);
}
}
function GeneratorFunctionConstructor(j){
var k=d(arguments,'function*');
var l=%GlobalProxy(GeneratorFunctionConstructor);
var m=%_CallFunction(l,%CompileString(k,true));
%FunctionMarkNameShouldPrintAsAnonymous(m);
return m;
}
%NeverOptimizeFunction(GeneratorObjectNext);
%NeverOptimizeFunction(GeneratorObjectThrow);
var n=GeneratorFunctionPrototype.prototype;
b.InstallFunctions(n,
2,
["next",GeneratorObjectNext,
"throw",GeneratorObjectThrow]);
%AddNamedProperty(n,"constructor",
GeneratorFunctionPrototype,2|1);
%AddNamedProperty(n,
e,"Generator",2|1);
%InternalSetPrototype(GeneratorFunctionPrototype,c.prototype);
%AddNamedProperty(GeneratorFunctionPrototype,
e,"GeneratorFunction",2|1);
%AddNamedProperty(GeneratorFunctionPrototype,"constructor",
GeneratorFunction,2|1);
%InternalSetPrototype(GeneratorFunction,c);
%SetCode(GeneratorFunction,GeneratorFunctionConstructor);
})

8object-observe³
var $observeEnqueueSpliceRecord;
var $observeBeginPerformSplice;
var $observeEndPerformSplice;
var $observeObjectMethods;
var $observeArrayMethods;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Array;
var d=a.Object;
var e=b.InternalArray;
var f;
var g;
b.Import(function(h){
f=h.ObjectFreeze;
g=h.ObjectIsFrozen;
});
var i;
var j={};
function GetObservationStateJS(){
if((i===(void 0))){
i=%GetObservationState();
}
if((i.callbackInfoMap===(void 0))){
i.callbackInfoMap=%ObservationWeakMapCreate();
i.objectInfoMap=%ObservationWeakMapCreate();
i.notifierObjectInfoMap=%ObservationWeakMapCreate();
i.pendingObservers=null;
i.nextCallbackPriority=0;
i.lastMicrotaskId=0;
}
return i;
}
function GetPendingObservers(){
return GetObservationStateJS().pendingObservers;
}
function SetPendingObservers(k){
GetObservationStateJS().pendingObservers=k;
}
function GetNextCallbackPriority(){
return GetObservationStateJS().nextCallbackPriority++;
}
function nullProtoObject(){
return{__proto__:null};
}
function TypeMapCreate(){
return nullProtoObject();
}
function TypeMapAddType(l,m,n){
l[m]=n?1:(l[m]||0)+1;
}
function TypeMapRemoveType(l,m){
l[m]--;
}
function TypeMapCreateFromList(o,p){
var l=TypeMapCreate();
for(var q=0;q<p;q++){
TypeMapAddType(l,o[q],true);
}
return l;
}
function TypeMapHasType(l,m){
return!!l[m];
}
function TypeMapIsDisjointFrom(r,s){
if(!r||!s)
return true;
for(var m in r){
if(TypeMapHasType(r,m)&&TypeMapHasType(s,m))
return false;
}
return true;
}
var t=(function(){
var u=[
'add',
'update',
'delete',
'setPrototype',
'reconfigure',
'preventExtensions'
];
return TypeMapCreateFromList(u,u.length);
})();
function ObserverCreate(v,w){
if((w===(void 0)))
return v;
var x=nullProtoObject();
x.callback=v;
x.accept=w;
return x;
}
function ObserverGetCallback(x){
return(typeof(x)==='function')?x:x.callback;
}
function ObserverGetAcceptTypes(x){
return(typeof(x)==='function')?t:x.accept;
}
function ObserverIsActive(x,y){
return TypeMapIsDisjointFrom(ObjectInfoGetPerformingTypes(y),
ObserverGetAcceptTypes(x));
}
function ObjectInfoGetOrCreate(z){
var y=ObjectInfoGet(z);
if((y===(void 0))){
if(!%_IsJSProxy(z)){
%SetIsObserved(z);
}
y={
object:z,
changeObservers:null,
notifier:null,
performing:null,
performingCount:0,
};
%WeakCollectionSet(GetObservationStateJS().objectInfoMap,
z,y,$getHash(z));
}
return y;
}
function ObjectInfoGet(z){
return %WeakCollectionGet(GetObservationStateJS().objectInfoMap,z,
$getHash(z));
}
function ObjectInfoGetFromNotifier(A){
return %WeakCollectionGet(GetObservationStateJS().notifierObjectInfoMap,
A,$getHash(A));
}
function ObjectInfoGetNotifier(y){
if((y.notifier===null)){
var A={__proto__:j};
y.notifier=A;
%WeakCollectionSet(GetObservationStateJS().notifierObjectInfoMap,
A,y,$getHash(A));
}
return y.notifier;
}
function ChangeObserversIsOptimized(B){
return(typeof(B)==='function')||
(typeof(B.callback)==='function');
}
function ObjectInfoNormalizeChangeObservers(y){
if(ChangeObserversIsOptimized(y.changeObservers)){
var x=y.changeObservers;
var v=ObserverGetCallback(x);
var C=CallbackInfoGet(v);
var D=CallbackInfoGetPriority(C);
y.changeObservers=nullProtoObject();
y.changeObservers[D]=x;
}
}
function ObjectInfoAddObserver(y,v,w){
var C=CallbackInfoGetOrCreate(v);
var x=ObserverCreate(v,w);
if(!y.changeObservers){
y.changeObservers=x;
return;
}
ObjectInfoNormalizeChangeObservers(y);
var D=CallbackInfoGetPriority(C);
y.changeObservers[D]=x;
}
function ObjectInfoRemoveObserver(y,v){
if(!y.changeObservers)
return;
if(ChangeObserversIsOptimized(y.changeObservers)){
if(v===ObserverGetCallback(y.changeObservers))
y.changeObservers=null;
return;
}
var C=CallbackInfoGet(v);
var D=CallbackInfoGetPriority(C);
y.changeObservers[D]=null;
}
function ObjectInfoHasActiveObservers(y){
if((y===(void 0))||!y.changeObservers)
return false;
if(ChangeObserversIsOptimized(y.changeObservers))
return ObserverIsActive(y.changeObservers,y);
for(var D in y.changeObservers){
var x=y.changeObservers[D];
if(!(x===null)&&ObserverIsActive(x,y))
return true;
}
return false;
}
function ObjectInfoAddPerformingType(y,m){
y.performing=y.performing||TypeMapCreate();
TypeMapAddType(y.performing,m);
y.performingCount++;
}
function ObjectInfoRemovePerformingType(y,m){
y.performingCount--;
TypeMapRemoveType(y.performing,m);
}
function ObjectInfoGetPerformingTypes(y){
return y.performingCount>0?y.performing:null;
}
function ConvertAcceptListToTypeMap(E){
if((E===(void 0)))
return E;
if(!(%_IsSpecObject(E)))throw MakeTypeError(72);
var F=(%_ToInteger(E.length));
if(F<0)F=0;
return TypeMapCreateFromList(E,F);
}
function CallbackInfoGet(v){
return %WeakCollectionGet(GetObservationStateJS().callbackInfoMap,v,
$getHash(v));
}
function CallbackInfoSet(v,C){
%WeakCollectionSet(GetObservationStateJS().callbackInfoMap,
v,C,$getHash(v));
}
function CallbackInfoGetOrCreate(v){
var C=CallbackInfoGet(v);
if(!(C===(void 0)))
return C;
var D=GetNextCallbackPriority();
CallbackInfoSet(v,D);
return D;
}
function CallbackInfoGetPriority(C){
if((typeof(C)==='number'))
return C;
else
return C.priority;
}
function CallbackInfoNormalize(v){
var C=CallbackInfoGet(v);
if((typeof(C)==='number')){
var D=C;
C=new e;
C.priority=D;
CallbackInfoSet(v,C);
}
return C;
}
function ObjectObserve(z,v,w){
if(!(%_IsSpecObject(z)))
throw MakeTypeError(74,"observe","observe");
if(%IsJSGlobalProxy(z))
throw MakeTypeError(70,"observe");
if(%IsAccessCheckNeeded(z))
throw MakeTypeError(71,"observe");
if(!(typeof(v)==='function'))
throw MakeTypeError(73,"observe");
if(g(v))
throw MakeTypeError(69);
var G=%GetObjectContextObjectObserve(z);
return G(z,v,w);
}
function NativeObjectObserve(z,v,w){
var y=ObjectInfoGetOrCreate(z);
var o=ConvertAcceptListToTypeMap(w);
ObjectInfoAddObserver(y,v,o);
return z;
}
function ObjectUnobserve(z,v){
if(!(%_IsSpecObject(z)))
throw MakeTypeError(74,"unobserve","unobserve");
if(%IsJSGlobalProxy(z))
throw MakeTypeError(70,"unobserve");
if(!(typeof(v)==='function'))
throw MakeTypeError(73,"unobserve");
var y=ObjectInfoGet(z);
if((y===(void 0)))
return z;
ObjectInfoRemoveObserver(y,v);
return z;
}
function ArrayObserve(z,v){
return ObjectObserve(z,v,['add',
'update',
'delete',
'splice']);
}
function ArrayUnobserve(z,v){
return ObjectUnobserve(z,v);
}
function ObserverEnqueueIfActive(x,y,H){
if(!ObserverIsActive(x,y)||
!TypeMapHasType(ObserverGetAcceptTypes(x),H.type)){
return;
}
var v=ObserverGetCallback(x);
if(!%ObserverObjectAndRecordHaveSameOrigin(v,H.object,
H)){
return;
}
var C=CallbackInfoNormalize(v);
if((GetPendingObservers()===null)){
SetPendingObservers(nullProtoObject());
if((%_DebugIsActive()!=0)){
var I=++GetObservationStateJS().lastMicrotaskId;
var J="Object.observe";
%EnqueueMicrotask(function(){
%DebugAsyncTaskEvent({type:"willHandle",id:I,name:J});
ObserveMicrotaskRunner();
%DebugAsyncTaskEvent({type:"didHandle",id:I,name:J});
});
%DebugAsyncTaskEvent({type:"enqueue",id:I,name:J});
}else{
%EnqueueMicrotask(ObserveMicrotaskRunner);
}
}
GetPendingObservers()[C.priority]=v;
C.push(H);
}
function ObjectInfoEnqueueExternalChangeRecord(y,H,m){
if(!ObjectInfoHasActiveObservers(y))
return;
var K=!(m===(void 0));
var L=K?
{object:y.object,type:m}:
{object:y.object};
for(var M in H){
if(M==='object'||(K&&M==='type'))continue;
%DefineDataPropertyUnchecked(
L,M,H[M],1+4);
}
f(L);
ObjectInfoEnqueueInternalChangeRecord(y,L);
}
function ObjectInfoEnqueueInternalChangeRecord(y,H){
if((typeof(H.name)==='symbol'))return;
if(ChangeObserversIsOptimized(y.changeObservers)){
var x=y.changeObservers;
ObserverEnqueueIfActive(x,y,H);
return;
}
for(var D in y.changeObservers){
var x=y.changeObservers[D];
if((x===null))
continue;
ObserverEnqueueIfActive(x,y,H);
}
}
function BeginPerformSplice(N){
var y=ObjectInfoGet(N);
if(!(y===(void 0)))
ObjectInfoAddPerformingType(y,'splice');
}
function EndPerformSplice(N){
var y=ObjectInfoGet(N);
if(!(y===(void 0)))
ObjectInfoRemovePerformingType(y,'splice');
}
function EnqueueSpliceRecord(N,O,P,Q){
var y=ObjectInfoGet(N);
if(!ObjectInfoHasActiveObservers(y))
return;
var H={
type:'splice',
object:N,
index:O,
removed:P,
addedCount:Q
};
f(H);
f(H.removed);
ObjectInfoEnqueueInternalChangeRecord(y,H);
}
function NotifyChange(m,z,J,R){
var y=ObjectInfoGet(z);
if(!ObjectInfoHasActiveObservers(y))
return;
var H;
if(arguments.length==2){
H={type:m,object:z};
}else if(arguments.length==3){
H={type:m,object:z,name:J};
}else{
H={
type:m,
object:z,
name:J,
oldValue:R
};
}
f(H);
ObjectInfoEnqueueInternalChangeRecord(y,H);
}
function ObjectNotifierNotify(H){
if(!(%_IsSpecObject(this)))
throw MakeTypeError(14,"notify");
var y=ObjectInfoGetFromNotifier(this);
if((y===(void 0)))
throw MakeTypeError(75);
if(!(typeof(H.type)==='string'))
throw MakeTypeError(78);
ObjectInfoEnqueueExternalChangeRecord(y,H);
}
function ObjectNotifierPerformChange(S,T){
if(!(%_IsSpecObject(this)))
throw MakeTypeError(14,"performChange");
var y=ObjectInfoGetFromNotifier(this);
if((y===(void 0)))
throw MakeTypeError(75);
if(!(typeof(S)==='string'))
throw MakeTypeError(77);
if(!(typeof(T)==='function'))
throw MakeTypeError(76);
var U=%GetObjectContextNotifierPerformChange(y);
U(y,S,T);
}
function NativeObjectNotifierPerformChange(y,S,T){
ObjectInfoAddPerformingType(y,S);
var H;
try{
H=T();
}finally{
ObjectInfoRemovePerformingType(y,S);
}
if((%_IsSpecObject(H)))
ObjectInfoEnqueueExternalChangeRecord(y,H,S);
}
function ObjectGetNotifier(z){
if(!(%_IsSpecObject(z)))
throw MakeTypeError(74,"getNotifier","getNotifier");
if(%IsJSGlobalProxy(z))
throw MakeTypeError(70,"getNotifier");
if(%IsAccessCheckNeeded(z))
throw MakeTypeError(71,"getNotifier");
if(g(z))return null;
if(!%ObjectWasCreatedInCurrentOrigin(z))return null;
var V=%GetObjectContextObjectGetNotifier(z);
return V(z);
}
function NativeObjectGetNotifier(z){
var y=ObjectInfoGetOrCreate(z);
return ObjectInfoGetNotifier(y);
}
function CallbackDeliverPending(v){
var C=CallbackInfoGet(v);
if((C===(void 0))||(typeof(C)==='number'))
return false;
var D=C.priority;
CallbackInfoSet(v,D);
var k=GetPendingObservers();
if(!(k===null))
delete k[D];
var W=[];
%MoveArrayContents(C,W);
%DeliverObservationChangeRecords(v,W);
return true;
}
function ObjectDeliverChangeRecords(v){
if(!(typeof(v)==='function'))
throw MakeTypeError(73,"deliverChangeRecords");
while(CallbackDeliverPending(v)){}
}
function ObserveMicrotaskRunner(){
var k=GetPendingObservers();
if(!(k===null)){
SetPendingObservers(null);
for(var q in k){
CallbackDeliverPending(k[q]);
}
}
}
b.InstallFunctions(j,2,[
"notify",ObjectNotifierNotify,
"performChange",ObjectNotifierPerformChange
]);
$observeObjectMethods=[
"deliverChangeRecords",ObjectDeliverChangeRecords,
"getNotifier",ObjectGetNotifier,
"observe",ObjectObserve,
"unobserve",ObjectUnobserve
];
$observeArrayMethods=[
"observe",ArrayObserve,
"unobserve",ArrayUnobserve
];
var X=function(Y,q){
if(q % 2===1)%FunctionRemovePrototype(Y);
};
$observeObjectMethods.forEach(X);
$observeArrayMethods.forEach(X);
$observeEnqueueSpliceRecord=EnqueueSpliceRecord;
$observeBeginPerformSplice=BeginPerformSplice;
$observeEndPerformSplice=EndPerformSplice;
%InstallToContext([
"native_object_get_notifier",NativeObjectGetNotifier,
"native_object_notifier_perform_change",NativeObjectNotifierPerformChange,
"native_object_observe",NativeObjectObserve,
"observers_begin_perform_splice",BeginPerformSplice,
"observers_end_perform_splice",EndPerformSplice,
"observers_enqueue_splice",EnqueueSpliceRecord,
"observers_notify_change",NotifyChange,
]);
})

(collection½ˆ
var $getHash;
var $getExistingHash;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Map;
var d=a.Object;
var e=a.Set;
var f=b.ImportNow("hash_code_symbol");
var g;
var h=b.ImportNow("to_string_tag_symbol");
b.Import(function(i){
g=i.IntRandom;
});
var j;
b.Import(function(i){
j=i.NumberIsNaN;
});
function HashToEntry(k,l,m){
var n=(l&((m)-1));
return((%_FixedArrayGet(k,(3+(n))|0)));
}
%SetForceInlineFlag(HashToEntry);
function SetFindEntry(k,m,o,l){
var p=HashToEntry(k,l,m);
if(p===-1)return p;
var q=((%_FixedArrayGet(k,((3+(m)+((p)<<1)))|0)));
if(o===q)return p;
var r=j(o);
while(true){
if(r&&j(q)){
return p;
}
p=((%_FixedArrayGet(k,((3+(m)+((p)<<1))+1)|0)));
if(p===-1)return p;
q=((%_FixedArrayGet(k,((3+(m)+((p)<<1)))|0)));
if(o===q)return p;
}
return-1;
}
%SetForceInlineFlag(SetFindEntry);
function MapFindEntry(k,m,o,l){
var p=HashToEntry(k,l,m);
if(p===-1)return p;
var q=((%_FixedArrayGet(k,((3+(m)+((p)*3)))|0)));
if(o===q)return p;
var r=j(o);
while(true){
if(r&&j(q)){
return p;
}
p=((%_FixedArrayGet(k,((3+(m)+((p)*3))+2)|0)));
if(p===-1)return p;
q=((%_FixedArrayGet(k,((3+(m)+((p)*3)))|0)));
if(o===q)return p;
}
return-1;
}
%SetForceInlineFlag(MapFindEntry);
function ComputeIntegerHash(o,s){
var l=o;
l=l^s;
l=~l+(l<<15);
l=l^(l>>>12);
l=l+(l<<2);
l=l^(l>>>4);
l=(l*2057)|0;
l=l^(l>>>16);
return l&0x3fffffff;
}
%SetForceInlineFlag(ComputeIntegerHash);
function GetExistingHash(o){
if(%_IsSmi(o)){
return ComputeIntegerHash(o,0);
}
if((typeof(o)==='string')){
var t=%_StringGetRawHashField(o);
if((t&1)===0){
return t>>>2;
}
}else if((%_IsSpecObject(o))&&!%_IsJSProxy(o)&&!(%_ClassOf(o)==='global')){
var l=(o[f]);
return l;
}
return %GenericHash(o);
}
%SetForceInlineFlag(GetExistingHash);
function GetHash(o){
var l=GetExistingHash(o);
if((l===(void 0))){
l=g()|0;
if(l===0)l=1;
(o[f]=l);
}
return l;
}
%SetForceInlineFlag(GetHash);
function SetConstructor(u){
if(!%_IsConstructCall()){
throw MakeTypeError(21,"Set");
}
%_SetInitialize(this);
if(!(u==null)){
var v=this.add;
if(!(typeof(v)==='function')){
throw MakeTypeError(82,'add',this);
}
for(var w of u){
%_Call(v,this,w);
}
}
}
function SetAdd(o){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,'Set.prototype.add',this);
}
if(o===0){
o=0;
}
var k=%_JSCollectionGetTable(this);
var m=((%_FixedArrayGet(k,(0)|0)));
var l=GetHash(o);
if(SetFindEntry(k,m,o,l)!==-1)return this;
var x=((%_FixedArrayGet(k,(1)|0)));
var y=((%_FixedArrayGet(k,(2)|0)));
var z=m<<1;
if((x+y)>=z){
%SetGrow(this);
k=%_JSCollectionGetTable(this);
m=((%_FixedArrayGet(k,(0)|0)));
x=((%_FixedArrayGet(k,(1)|0)));
y=((%_FixedArrayGet(k,(2)|0)));
}
var p=x+y;
var A=(3+(m)+((p)<<1));
var n=(l&((m)-1));
var B=((%_FixedArrayGet(k,(3+(n))|0)));
((%_FixedArraySet(k,(3+(n))|0,p)));
(((%_FixedArraySet(k,(1)|0,(x+1)|0))));
(%_FixedArraySet(k,(A)|0,o));
((%_FixedArraySet(k,(A+1)|0,(B)|0)));
return this;
}
function SetHas(o){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,'Set.prototype.has',this);
}
var k=%_JSCollectionGetTable(this);
var m=((%_FixedArrayGet(k,(0)|0)));
var l=GetExistingHash(o);
if((l===(void 0)))return false;
return SetFindEntry(k,m,o,l)!==-1;
}
function SetDelete(o){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,
'Set.prototype.delete',this);
}
var k=%_JSCollectionGetTable(this);
var m=((%_FixedArrayGet(k,(0)|0)));
var l=GetExistingHash(o);
if((l===(void 0)))return false;
var p=SetFindEntry(k,m,o,l);
if(p===-1)return false;
var x=((%_FixedArrayGet(k,(1)|0)))-1;
var y=((%_FixedArrayGet(k,(2)|0)))+1;
var A=(3+(m)+((p)<<1));
(%_FixedArraySet(k,(A)|0,%_TheHole()));
(((%_FixedArraySet(k,(1)|0,(x)|0))));
(((%_FixedArraySet(k,(2)|0,(y)|0))));
if(x<(m>>>1))%SetShrink(this);
return true;
}
function SetGetSize(){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,
'Set.prototype.size',this);
}
var k=%_JSCollectionGetTable(this);
return((%_FixedArrayGet(k,(1)|0)));
}
function SetClearJS(){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,
'Set.prototype.clear',this);
}
%_SetClear(this);
}
function SetForEach(C,D){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,
'Set.prototype.forEach',this);
}
if(!(typeof(C)==='function'))throw MakeTypeError(13,C);
var E=new SetIterator(this,2);
var o;
var F=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(C);
var G=[(void 0)];
while(%SetIteratorNext(E,G)){
if(F)%DebugPrepareStepInIfStepping(C);
o=G[0];
%_Call(C,D,o,o,this);
}
}
%SetCode(e,SetConstructor);
%FunctionSetLength(e,0);
%FunctionSetPrototype(e,new d());
%AddNamedProperty(e.prototype,"constructor",e,2);
%AddNamedProperty(e.prototype,h,"Set",
2|1);
%FunctionSetLength(SetForEach,1);
b.InstallGetter(e.prototype,"size",SetGetSize);
b.InstallFunctions(e.prototype,2,[
"add",SetAdd,
"has",SetHas,
"delete",SetDelete,
"clear",SetClearJS,
"forEach",SetForEach
]);
function MapConstructor(u){
if(!%_IsConstructCall()){
throw MakeTypeError(21,"Map");
}
%_MapInitialize(this);
if(!(u==null)){
var v=this.set;
if(!(typeof(v)==='function')){
throw MakeTypeError(82,'set',this);
}
for(var H of u){
if(!(%_IsSpecObject(H))){
throw MakeTypeError(42,H);
}
%_Call(v,this,H[0],H[1]);
}
}
}
function MapGet(o){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.get',this);
}
var k=%_JSCollectionGetTable(this);
var m=((%_FixedArrayGet(k,(0)|0)));
var l=GetExistingHash(o);
if((l===(void 0)))return(void 0);
var p=MapFindEntry(k,m,o,l);
if(p===-1)return(void 0);
return((%_FixedArrayGet(k,((3+(m)+((p)*3))+1)|0)));
}
function MapSet(o,w){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.set',this);
}
if(o===0){
o=0;
}
var k=%_JSCollectionGetTable(this);
var m=((%_FixedArrayGet(k,(0)|0)));
var l=GetHash(o);
var p=MapFindEntry(k,m,o,l);
if(p!==-1){
var I=(3+(m)+((p)*3));
(%_FixedArraySet(k,(I+1)|0,w));
return this;
}
var x=((%_FixedArrayGet(k,(1)|0)));
var y=((%_FixedArrayGet(k,(2)|0)));
var z=m<<1;
if((x+y)>=z){
%MapGrow(this);
k=%_JSCollectionGetTable(this);
m=((%_FixedArrayGet(k,(0)|0)));
x=((%_FixedArrayGet(k,(1)|0)));
y=((%_FixedArrayGet(k,(2)|0)));
}
p=x+y;
var A=(3+(m)+((p)*3));
var n=(l&((m)-1));
var B=((%_FixedArrayGet(k,(3+(n))|0)));
((%_FixedArraySet(k,(3+(n))|0,p)));
(((%_FixedArraySet(k,(1)|0,(x+1)|0))));
(%_FixedArraySet(k,(A)|0,o));
(%_FixedArraySet(k,(A+1)|0,w));
(%_FixedArraySet(k,(A+2)|0,B));
return this;
}
function MapHas(o){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.has',this);
}
var k=%_JSCollectionGetTable(this);
var m=((%_FixedArrayGet(k,(0)|0)));
var l=GetHash(o);
return MapFindEntry(k,m,o,l)!==-1;
}
function MapDelete(o){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.delete',this);
}
var k=%_JSCollectionGetTable(this);
var m=((%_FixedArrayGet(k,(0)|0)));
var l=GetHash(o);
var p=MapFindEntry(k,m,o,l);
if(p===-1)return false;
var x=((%_FixedArrayGet(k,(1)|0)))-1;
var y=((%_FixedArrayGet(k,(2)|0)))+1;
var A=(3+(m)+((p)*3));
(%_FixedArraySet(k,(A)|0,%_TheHole()));
(%_FixedArraySet(k,(A+1)|0,%_TheHole()));
(((%_FixedArraySet(k,(1)|0,(x)|0))));
(((%_FixedArraySet(k,(2)|0,(y)|0))));
if(x<(m>>>1))%MapShrink(this);
return true;
}
function MapGetSize(){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.size',this);
}
var k=%_JSCollectionGetTable(this);
return((%_FixedArrayGet(k,(1)|0)));
}
function MapClearJS(){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.clear',this);
}
%_MapClear(this);
}
function MapForEach(C,D){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.forEach',this);
}
if(!(typeof(C)==='function'))throw MakeTypeError(13,C);
var E=new MapIterator(this,3);
var F=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(C);
var G=[(void 0),(void 0)];
while(%MapIteratorNext(E,G)){
if(F)%DebugPrepareStepInIfStepping(C);
%_Call(C,D,G[1],G[0],this);
}
}
%SetCode(c,MapConstructor);
%FunctionSetLength(c,0);
%FunctionSetPrototype(c,new d());
%AddNamedProperty(c.prototype,"constructor",c,2);
%AddNamedProperty(
c.prototype,h,"Map",2|1);
%FunctionSetLength(MapForEach,1);
b.InstallGetter(c.prototype,"size",MapGetSize);
b.InstallFunctions(c.prototype,2,[
"get",MapGet,
"set",MapSet,
"has",MapHas,
"delete",MapDelete,
"clear",MapClearJS,
"forEach",MapForEach
]);
$getHash=GetHash;
$getExistingHash=GetExistingHash;
function MapFromArray(J){
var K=new c;
var L=J.length;
for(var M=0;M<L;M+=2){
var o=J[M];
var w=J[M+1];
%_Call(MapSet,K,o,w);
}
return K;
};
function SetFromArray(J){
var N=new e;
var L=J.length;
for(var M=0;M<L;++M){
%_Call(SetAdd,N,J[M]);
}
return N;
};
%InstallToContext([
"map_get",MapGet,
"map_set",MapSet,
"map_has",MapHas,
"map_delete",MapDelete,
"set_add",SetAdd,
"set_has",SetHas,
"set_delete",SetDelete,
"map_from_array",MapFromArray,
"set_from_array",SetFromArray,
]);
})

<weak-collection!0
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
var d=a.WeakMap;
var e=a.WeakSet;
var f=b.ImportNow("to_string_tag_symbol");
function WeakMapConstructor(g){
if(!%_IsConstructCall()){
throw MakeTypeError(21,"WeakMap");
}
%WeakCollectionInitialize(this);
if(!(g==null)){
var h=this.set;
if(!(typeof(h)==='function')){
throw MakeTypeError(82,'set',this);
}
for(var i of g){
if(!(%_IsSpecObject(i))){
throw MakeTypeError(42,i);
}
%_Call(h,this,i[0],i[1]);
}
}
}
function WeakMapGet(j){
if(!(%_ClassOf(this)==='WeakMap')){
throw MakeTypeError(36,
'WeakMap.prototype.get',this);
}
if(!(%_IsSpecObject(j)))return(void 0);
var k=$getExistingHash(j);
if((k===(void 0)))return(void 0);
return %WeakCollectionGet(this,j,k);
}
function WeakMapSet(j,l){
if(!(%_ClassOf(this)==='WeakMap')){
throw MakeTypeError(36,
'WeakMap.prototype.set',this);
}
if(!(%_IsSpecObject(j)))throw MakeTypeError(140);
return %WeakCollectionSet(this,j,l,$getHash(j));
}
function WeakMapHas(j){
if(!(%_ClassOf(this)==='WeakMap')){
throw MakeTypeError(36,
'WeakMap.prototype.has',this);
}
if(!(%_IsSpecObject(j)))return false;
var k=$getExistingHash(j);
if((k===(void 0)))return false;
return %WeakCollectionHas(this,j,k);
}
function WeakMapDelete(j){
if(!(%_ClassOf(this)==='WeakMap')){
throw MakeTypeError(36,
'WeakMap.prototype.delete',this);
}
if(!(%_IsSpecObject(j)))return false;
var k=$getExistingHash(j);
if((k===(void 0)))return false;
return %WeakCollectionDelete(this,j,k);
}
%SetCode(d,WeakMapConstructor);
%FunctionSetLength(d,0);
%FunctionSetPrototype(d,new c());
%AddNamedProperty(d.prototype,"constructor",d,
2);
%AddNamedProperty(d.prototype,f,"WeakMap",
2|1);
b.InstallFunctions(d.prototype,2,[
"get",WeakMapGet,
"set",WeakMapSet,
"has",WeakMapHas,
"delete",WeakMapDelete
]);
function WeakSetConstructor(g){
if(!%_IsConstructCall()){
throw MakeTypeError(21,"WeakSet");
}
%WeakCollectionInitialize(this);
if(!(g==null)){
var h=this.add;
if(!(typeof(h)==='function')){
throw MakeTypeError(82,'add',this);
}
for(var l of g){
%_Call(h,this,l);
}
}
}
function WeakSetAdd(l){
if(!(%_ClassOf(this)==='WeakSet')){
throw MakeTypeError(36,
'WeakSet.prototype.add',this);
}
if(!(%_IsSpecObject(l)))throw MakeTypeError(141);
return %WeakCollectionSet(this,l,true,$getHash(l));
}
function WeakSetHas(l){
if(!(%_ClassOf(this)==='WeakSet')){
throw MakeTypeError(36,
'WeakSet.prototype.has',this);
}
if(!(%_IsSpecObject(l)))return false;
var k=$getExistingHash(l);
if((k===(void 0)))return false;
return %WeakCollectionHas(this,l,k);
}
function WeakSetDelete(l){
if(!(%_ClassOf(this)==='WeakSet')){
throw MakeTypeError(36,
'WeakSet.prototype.delete',this);
}
if(!(%_IsSpecObject(l)))return false;
var k=$getExistingHash(l);
if((k===(void 0)))return false;
return %WeakCollectionDelete(this,l,k);
}
%SetCode(e,WeakSetConstructor);
%FunctionSetLength(e,0);
%FunctionSetPrototype(e,new c());
%AddNamedProperty(e.prototype,"constructor",e,
2);
%AddNamedProperty(e.prototype,f,"WeakSet",
2|1);
b.InstallFunctions(e.prototype,2,[
"add",WeakSetAdd,
"has",WeakSetHas,
"delete",WeakSetDelete
]);
})

Lcollection-iteratori,
var $mapEntries;
var $mapIteratorNext;
var $setIteratorNext;
var $setValues;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Map;
var d=a.Set;
var e=b.ImportNow("iterator_symbol");
var f=b.ImportNow("to_string_tag_symbol");
function SetIteratorConstructor(g,h){
%SetIteratorInitialize(this,g,h);
}
function SetIteratorNextJS(){
if(!(%_ClassOf(this)==='Set Iterator')){
throw MakeTypeError(36,
'Set Iterator.prototype.next',this);
}
var i=[(void 0),(void 0)];
var j=%_CreateIterResultObject(i,false);
switch(%SetIteratorNext(this,i)){
case 0:
j.value=(void 0);
j.done=true;
break;
case 2:
j.value=i[0];
break;
case 3:
i[1]=i[0];
break;
}
return j;
}
function SetEntries(){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,
'Set.prototype.entries',this);
}
return new SetIterator(this,3);
}
function SetValues(){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,
'Set.prototype.values',this);
}
return new SetIterator(this,2);
}
%SetCode(SetIterator,SetIteratorConstructor);
%FunctionSetPrototype(SetIterator,{__proto__:$iteratorPrototype});
%FunctionSetInstanceClassName(SetIterator,'Set Iterator');
b.InstallFunctions(SetIterator.prototype,2,[
'next',SetIteratorNextJS
]);
%AddNamedProperty(SetIterator.prototype,f,
"Set Iterator",1|2);
b.InstallFunctions(d.prototype,2,[
'entries',SetEntries,
'keys',SetValues,
'values',SetValues
]);
%AddNamedProperty(d.prototype,e,SetValues,2);
$setIteratorNext=SetIteratorNextJS;
$setValues=SetValues;
function MapIteratorConstructor(k,h){
%MapIteratorInitialize(this,k,h);
}
function MapIteratorNextJS(){
if(!(%_ClassOf(this)==='Map Iterator')){
throw MakeTypeError(36,
'Map Iterator.prototype.next',this);
}
var i=[(void 0),(void 0)];
var j=%_CreateIterResultObject(i,false);
switch(%MapIteratorNext(this,i)){
case 0:
j.value=(void 0);
j.done=true;
break;
case 1:
j.value=i[0];
break;
case 2:
j.value=i[1];
break;
}
return j;
}
function MapEntries(){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.entries',this);
}
return new MapIterator(this,3);
}
function MapKeys(){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.keys',this);
}
return new MapIterator(this,1);
}
function MapValues(){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.values',this);
}
return new MapIterator(this,2);
}
%SetCode(MapIterator,MapIteratorConstructor);
%FunctionSetPrototype(MapIterator,{__proto__:$iteratorPrototype});
%FunctionSetInstanceClassName(MapIterator,'Map Iterator');
b.InstallFunctions(MapIterator.prototype,2,[
'next',MapIteratorNextJS
]);
%AddNamedProperty(MapIterator.prototype,f,
"Map Iterator",1|2);
b.InstallFunctions(c.prototype,2,[
'entries',MapEntries,
'keys',MapKeys,
'values',MapValues
]);
%AddNamedProperty(c.prototype,e,MapEntries,2);
$mapEntries=MapEntries;
$mapIteratorNext=MapIteratorNextJS;
})

promisead
(function(a,b,c){
"use strict";
%CheckIsBootstrapping();
var d=b.InternalArray;
var e=
b.ImportNow("promise_has_handler_symbol");
var f=b.ImportNow("promise_on_reject_symbol");
var g=
b.ImportNow("promise_on_resolve_symbol");
var h=b.ImportNow("promise_raw_symbol");
var i=b.ImportNow("promise_status_symbol");
var j=b.ImportNow("promise_value_symbol");
var k=b.ImportNow("to_string_tag_symbol");
var l=0;
var m=function Promise(n){
if(n===h)return;
if(!%_IsConstructCall())throw MakeTypeError(54,this);
if(!(typeof(n)==='function'))
throw MakeTypeError(101,n);
var o=PromiseInit(this);
try{
%DebugPushPromise(o,Promise);
n(function(p){PromiseResolve(o,p)},
function(q){PromiseReject(o,q)});
}catch(e){
PromiseReject(o,e);
}finally{
%DebugPopPromise();
}
}
function PromiseSet(o,r,s,t,u){
(o[i]=r);
(o[j]=s);
(o[g]=t);
(o[f]=u);
if((%_DebugIsActive()!=0)){
%DebugPromiseEvent({promise:o,status:r,value:s});
}
return o;
}
function PromiseCreateAndSet(r,s){
var o=new m(h);
if((%_DebugIsActive()!=0))PromiseSet(o,0,(void 0));
return PromiseSet(o,r,s);
}
function PromiseInit(o){
return PromiseSet(
o,0,(void 0),new d,new d)
}
function PromiseDone(o,r,s,v){
if((o[i])===0){
var w=(o[v]);
if(w.length)PromiseEnqueue(s,w,r);
PromiseSet(o,r,s);
}
}
function PromiseCoerce(x,p){
if(!IsPromise(p)&&(%_IsSpecObject(p))){
var y;
try{
y=p.then;
}catch(q){
return %_CallFunction(x,q,PromiseRejected);
}
if((typeof(y)==='function')){
var z=%_CallFunction(x,PromiseDeferred);
try{
%_Call(y,p,z.resolve,z.reject);
}catch(q){
z.reject(q);
}
return z.promise;
}
}
return p;
}
function PromiseHandle(s,A,z){
try{
%DebugPushPromise(z.promise,PromiseHandle);
if((%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(A)))%DebugPrepareStepInIfStepping(A);
var B=A(s);
if(B===z.promise)
throw MakeTypeError(80,B);
else if(IsPromise(B))
%_CallFunction(B,z.resolve,z.reject,PromiseChain);
else
z.resolve(B);
}catch(exception){
try{z.reject(exception);}catch(e){}
}finally{
%DebugPopPromise();
}
}
function PromiseEnqueue(s,w,r){
var C,D,E=(%_DebugIsActive()!=0);
%EnqueueMicrotask(function(){
if(E){
%DebugAsyncTaskEvent({type:"willHandle",id:C,name:D});
}
for(var F=0;F<w.length;F+=2){
PromiseHandle(s,w[F],w[F+1])
}
if(E){
%DebugAsyncTaskEvent({type:"didHandle",id:C,name:D});
}
});
if(E){
C=++l;
D=r>0?"Promise.resolve":"Promise.reject";
%DebugAsyncTaskEvent({type:"enqueue",id:C,name:D});
}
}
function PromiseIdResolveHandler(p){return p}
function PromiseIdRejectHandler(q){throw q}
function PromiseNopResolver(){}
function IsPromise(p){
return(%_IsSpecObject(p))&&(!(p[i]===(void 0)));
}
function PromiseCreate(){
return new m(PromiseNopResolver)
}
function PromiseResolve(o,p){
PromiseDone(o,+1,p,g)
}
function PromiseReject(o,q){
if((o[i])==0){
var G=(%_DebugIsActive()!=0);
if(G||
!(!(o[e]===(void 0)))){
%PromiseRejectEvent(o,q,G);
}
}
PromiseDone(o,-1,q,f)
}
function PromiseDeferred(){
if(this===m){
var o=PromiseInit(new m(h));
return{
promise:o,
resolve:function(p){PromiseResolve(o,p)},
reject:function(q){PromiseReject(o,q)}
};
}else{
var B={promise:(void 0),reject:(void 0),resolve:(void 0)};
B.promise=new this(function(H,I){
B.resolve=H;
B.reject=I;
});
return B;
}
}
function PromiseResolved(p){
if(this===m){
return PromiseCreateAndSet(+1,p);
}else{
return new this(function(H,I){H(p)});
}
}
function PromiseRejected(q){
var o;
if(this===m){
o=PromiseCreateAndSet(-1,q);
%PromiseRejectEvent(o,q,false);
}else{
o=new this(function(H,I){I(q)});
}
return o;
}
function PromiseChain(t,u){
t=(t===(void 0))?PromiseIdResolveHandler:t;
u=(u===(void 0))?PromiseIdRejectHandler:u;
var z=%_CallFunction(this.constructor,PromiseDeferred);
switch((this[i])){
case(void 0):
throw MakeTypeError(54,this);
case 0:
(this[g]).push(t,z);
(this[f]).push(u,z);
break;
case+1:
PromiseEnqueue((this[j]),
[t,z],
+1);
break;
case-1:
if(!(!(this[e]===(void 0)))){
%PromiseRevokeReject(this);
}
PromiseEnqueue((this[j]),
[u,z],
-1);
break;
}
(this[e]=true);
if((%_DebugIsActive()!=0)){
%DebugPromiseEvent({promise:z.promise,parentPromise:this});
}
return z.promise;
}
function PromiseCatch(u){
return this.then((void 0),u);
}
function PromiseThen(t,u){
t=(typeof(t)==='function')?t:PromiseIdResolveHandler;
u=(typeof(u)==='function')?u:PromiseIdRejectHandler;
var J=this;
var x=this.constructor;
return %_CallFunction(
this,
function(p){
p=PromiseCoerce(x,p);
if(p===J){
if((%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(u)))%DebugPrepareStepInIfStepping(u);
return u(MakeTypeError(80,p));
}else if(IsPromise(p)){
return p.then(t,u);
}else{
if((%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(t)))%DebugPrepareStepInIfStepping(t);
return t(p);
}
},
u,
PromiseChain
);
}
function PromiseCast(p){
return IsPromise(p)?p:new this(function(H){H(p)});
}
function PromiseAll(K){
var z=%_CallFunction(this,PromiseDeferred);
var L=[];
try{
var M=0;
var F=0;
for(var s of K){
this.resolve(s).then(
(function(F){
return function(p){
L[F]=p;
if(--M===0)z.resolve(L);
}
})(F),
function(q){z.reject(q);});
++F;
++M;
}
if(M===0){
z.resolve(L);
}
}catch(e){
z.reject(e)
}
return z.promise;
}
function PromiseRace(K){
var z=%_CallFunction(this,PromiseDeferred);
try{
for(var s of K){
this.resolve(s).then(
function(p){z.resolve(p)},
function(q){z.reject(q)});
}
}catch(e){
z.reject(e)
}
return z.promise;
}
function PromiseHasUserDefinedRejectHandlerRecursive(o){
var N=(o[f]);
if((N===(void 0)))return false;
for(var F=0;F<N.length;F+=2){
if(N[F]!=PromiseIdRejectHandler)return true;
if(PromiseHasUserDefinedRejectHandlerRecursive(N[F+1].promise)){
return true;
}
}
return false;
}
function PromiseHasUserDefinedRejectHandler(){
return PromiseHasUserDefinedRejectHandlerRecursive(this);
};
%AddNamedProperty(a,'Promise',m,2);
%AddNamedProperty(m.prototype,k,"Promise",
2|1);
b.InstallFunctions(m,2,[
"defer",PromiseDeferred,
"accept",PromiseResolved,
"reject",PromiseRejected,
"all",PromiseAll,
"race",PromiseRace,
"resolve",PromiseCast
]);
b.InstallFunctions(m.prototype,2,[
"chain",PromiseChain,
"then",PromiseThen,
"catch",PromiseCatch
]);
%InstallToContext([
"promise_catch",PromiseCatch,
"promise_chain",PromiseChain,
"promise_create",PromiseCreate,
"promise_has_user_defined_reject_handler",PromiseHasUserDefinedRejectHandler,
"promise_reject",PromiseReject,
"promise_resolve",PromiseResolve,
"promise_then",PromiseThen,
]);
b.InstallFunctions(c,0,[
"createPromise",PromiseCreate,
"resolvePromise",PromiseResolve,
"rejectPromise",PromiseReject
]);
})

 messagesÁç
var $errorToString;
var MakeError;
var MakeEvalError;
var MakeRangeError;
var MakeReferenceError;
var MakeSyntaxError;
var MakeTypeError;
var MakeURIError;
(function(a,b){
%CheckIsBootstrapping();
var c;
var d;
var e;
var f;
var g=
b.ImportNow("call_site_receiver_symbol");
var h=
b.ImportNow("call_site_function_symbol");
var i=
b.ImportNow("call_site_position_symbol");
var j=
b.ImportNow("call_site_strict_symbol");
var k;
var l=
b.ImportNow("formatted_stack_trace_symbol");
var m
var n=a.Object;
var o;
var p;
var q;
var r=b.InternalArray;
var s=b.ImportNow("internal_error_symbol");
var t;
var u;
var v=b.ImportNow("stack_trace_symbol");
var w;
var x;
var y;
var z;
var A;
var B;
var C;
b.Import(function(D){
c=D.ArrayJoin;
d=D.Bool16x8ToString;
e=D.Bool32x4ToString;
f=D.Bool8x16ToString;
k=D.Float32x4ToString;
m=D.FunctionSourceString;
o=D.Int16x8ToString;
p=D.Int32x4ToString;
q=D.Int8x16ToString;
t=D.ObjectDefineProperty;
u=D.ObjectToString;
w=D.StringCharAt;
x=D.StringIndexOf;
y=D.StringSubstring;
z=D.SymbolToString;
A=D.Uint16x8ToString;
B=D.Uint32x4ToString;
C=D.Uint8x16ToString;
});
var E;
var F;
var G;
var H;
var I;
var J;
var K;
function NoSideEffectsObjectToString(){
if((this===(void 0)))return"[object Undefined]";
if((this===null))return"[object Null]";
return"[object "+%_ClassOf((%_ToObject(this)))+"]";
}
function NoSideEffectToString(L){
if((typeof(L)==='string'))return L;
if((typeof(L)==='number'))return %_NumberToString(L);
if((typeof(L)==='boolean'))return L?'true':'false';
if((L===(void 0)))return'undefined';
if((L===null))return'null';
if((%_IsFunction(L))){
var M=%_CallFunction(L,L,m);
if(M.length>128){
M=%_SubString(M,0,111)+"...<omitted>..."+
%_SubString(M,M.length-2,M.length);
}
return M;
}
if((typeof(L)==='symbol'))return %_CallFunction(L,z);
if((%_IsSimdValue(L))){
switch(typeof(L)){
case'float32x4':return %_CallFunction(L,k);
case'int32x4':return %_CallFunction(L,p);
case'int16x8':return %_CallFunction(L,o);
case'int8x16':return %_CallFunction(L,q);
case'uint32x4':return %_CallFunction(L,B);
case'uint16x8':return %_CallFunction(L,A);
case'uint8x16':return %_CallFunction(L,C);
case'bool32x4':return %_CallFunction(L,e);
case'bool16x8':return %_CallFunction(L,d);
case'bool8x16':return %_CallFunction(L,f);
}
}
if((typeof(L)==='object')
&&%GetDataProperty(L,"toString")===u){
var N=%GetDataProperty(L,"constructor");
if(typeof N=="function"){
var O=N.name;
if((typeof(O)==='string')&&O!==""){
return"#<"+O+">";
}
}
}
if(CanBeSafelyTreatedAsAnErrorObject(L)){
return %_CallFunction(L,ErrorToString);
}
return %_CallFunction(L,NoSideEffectsObjectToString);
}
function CanBeSafelyTreatedAsAnErrorObject(L){
switch(%_ClassOf(L)){
case'Error':
case'EvalError':
case'RangeError':
case'ReferenceError':
case'SyntaxError':
case'TypeError':
case'URIError':
return true;
}
var P=%GetDataProperty(L,"toString");
return L instanceof E&&P===ErrorToString;
}
function ToStringCheckErrorObject(L){
if(CanBeSafelyTreatedAsAnErrorObject(L)){
return %_CallFunction(L,ErrorToString);
}else{
return(%_ToString(L));
}
}
function ToDetailString(L){
if(L!=null&&(typeof(L)==='object')&&L.toString===u){
var N=L.constructor;
if(typeof N=="function"){
var O=N.name;
if((typeof(O)==='string')&&O!==""){
return"#<"+O+">";
}
}
}
return ToStringCheckErrorObject(L);
}
function MakeGenericError(N,Q,R,S,T){
var U=new N(FormatMessage(Q,R,S,T));
U[s]=true;
return U;
}
%FunctionSetInstanceClassName(Script,'Script');
%AddNamedProperty(Script.prototype,'constructor',Script,
2|4|1);
%SetCode(Script,function(V){
throw MakeError(6);
});
function FormatMessage(Q,R,S,T){
var R=NoSideEffectToString(R);
var S=NoSideEffectToString(S);
var T=NoSideEffectToString(T);
try{
return %FormatMessageString(Q,R,S,T);
}catch(e){
return"<error>";
}
}
function GetLineNumber(W){
var X=%MessageGetStartPosition(W);
if(X==-1)return 0;
var Y=%MessageGetScript(W);
var Z=Y.locationFromPosition(X,true);
if(Z==null)return 0;
return Z.line+1;
}
function GetColumnNumber(W){
var Y=%MessageGetScript(W);
var X=%MessageGetStartPosition(W);
var Z=Y.locationFromPosition(X,true);
if(Z==null)return-1;
return Z.column;
}
function GetSourceLine(W){
var Y=%MessageGetScript(W);
var X=%MessageGetStartPosition(W);
var Z=Y.locationFromPosition(X,true);
if(Z==null)return"";
return Z.sourceText();
}
function ScriptLineFromPosition(aa){
var ab=0;
var ac=this.lineCount()-1;
var ad=this.line_ends;
if(aa>ad[ac]){
return-1;
}
if(aa<=ad[0]){
return 0;
}
while(ac>=1){
var ae=(ab+ac)>>1;
if(aa>ad[ae]){
ab=ae+1;
}else if(aa<=ad[ae-1]){
ac=ae-1;
}else{
return ae;
}
}
return-1;
}
function ScriptLocationFromPosition(aa,
include_resource_offset){
var af=this.lineFromPosition(aa);
if(af==-1)return null;
var ad=this.line_ends;
var ag=af==0?0:ad[af-1]+1;
var ah=ad[af];
if(ah>0&&%_CallFunction(this.source,ah-1,w)=='\r'){
ah--;
}
var ai=aa-ag;
if(include_resource_offset){
af+=this.line_offset;
if(af==this.line_offset){
ai+=this.column_offset;
}
}
return new SourceLocation(this,aa,af,ai,ag,ah);
}
function ScriptLocationFromLine(aj,ak,al){
var af=0;
if(!(aj===(void 0))){
af=aj-this.line_offset;
}
var ai=ak||0;
if(af==0){
ai-=this.column_offset;
}
var am=al||0;
if(af<0||ai<0||am<0)return null;
if(af==0){
return this.locationFromPosition(am+ai,false);
}else{
var an=this.lineFromPosition(am);
if(an==-1||an+af>=this.lineCount()){
return null;
}
return this.locationFromPosition(
this.line_ends[an+af-1]+1+ai);
}
}
function ScriptSourceSlice(ao,ap){
var aq=(ao===(void 0))?this.line_offset
:ao;
var ar=(ap===(void 0))?this.line_offset+this.lineCount()
:ap;
aq-=this.line_offset;
ar-=this.line_offset;
if(aq<0)aq=0;
if(ar>this.lineCount())ar=this.lineCount();
if(aq>=this.lineCount()||
ar<0||
aq>ar){
return null;
}
var ad=this.line_ends;
var as=aq==0?0:ad[aq-1]+1;
var at=ar==0?0:ad[ar-1]+1;
return new SourceSlice(this,
aq+this.line_offset,
ar+this.line_offset,
as,at);
}
function ScriptSourceLine(aj){
var af=0;
if(!(aj===(void 0))){
af=aj-this.line_offset;
}
if(af<0||this.lineCount()<=af){
return null;
}
var ad=this.line_ends;
var ag=af==0?0:ad[af-1]+1;
var ah=ad[af];
return %_CallFunction(this.source,ag,ah,y);
}
function ScriptLineCount(){
return this.line_ends.length;
}
function ScriptLineEnd(au){
return this.line_ends[au];
}
function ScriptNameOrSourceURL(){
if(this.source_url)return this.source_url;
return this.name;
}
b.SetUpLockedPrototype(Script,[
"source",
"name",
"source_url",
"source_mapping_url",
"line_ends",
"line_offset",
"column_offset"
],[
"lineFromPosition",ScriptLineFromPosition,
"locationFromPosition",ScriptLocationFromPosition,
"locationFromLine",ScriptLocationFromLine,
"sourceSlice",ScriptSourceSlice,
"sourceLine",ScriptSourceLine,
"lineCount",ScriptLineCount,
"nameOrSourceURL",ScriptNameOrSourceURL,
"lineEnd",ScriptLineEnd
]
);
function SourceLocation(Y,aa,af,ai,ag,ah){
this.script=Y;
this.position=aa;
this.line=af;
this.column=ai;
this.start=ag;
this.end=ah;
}
function SourceLocationSourceText(){
return %_CallFunction(this.script.source,
this.start,
this.end,
y);
}
b.SetUpLockedPrototype(SourceLocation,
["script","position","line","column","start","end"],
["sourceText",SourceLocationSourceText]
);
function SourceSlice(Y,aq,ar,as,at){
this.script=Y;
this.from_line=aq;
this.to_line=ar;
this.from_position=as;
this.to_position=at;
}
function SourceSliceSourceText(){
return %_CallFunction(this.script.source,
this.from_position,
this.to_position,
y);
}
b.SetUpLockedPrototype(SourceSlice,
["script","from_line","to_line","from_position","to_position"],
["sourceText",SourceSliceSourceText]
);
function GetStackTraceLine(av,aw,ax,ay){
return new CallSite(av,aw,ax,false).toString();
}
function CallSite(az,aw,ax,aA){
(this[g]=az);
(this[h]=aw);
(this[i]=ax);
(this[j]=aA);
}
function CallSiteGetThis(){
return(this[j])
?(void 0):(this[g]);
}
function CallSiteGetFunction(){
return(this[j])
?(void 0):(this[h]);
}
function CallSiteGetPosition(){
return(this[i]);
}
function CallSiteGetTypeName(){
return GetTypeName((this[g]),false);
}
function CallSiteIsToplevel(){
return %CallSiteIsToplevelRT(this);
}
function CallSiteIsEval(){
return %CallSiteIsEvalRT(this);
}
function CallSiteGetEvalOrigin(){
var Y=%FunctionGetScript((this[h]));
return FormatEvalOrigin(Y);
}
function CallSiteGetScriptNameOrSourceURL(){
return %CallSiteGetScriptNameOrSourceUrlRT(this);
}
function CallSiteGetFunctionName(){
return %CallSiteGetFunctionNameRT(this);
}
function CallSiteGetMethodName(){
return %CallSiteGetMethodNameRT(this);
}
function CallSiteGetFileName(){
return %CallSiteGetFileNameRT(this);
}
function CallSiteGetLineNumber(){
return %CallSiteGetLineNumberRT(this);
}
function CallSiteGetColumnNumber(){
return %CallSiteGetColumnNumberRT(this);
}
function CallSiteIsNative(){
return %CallSiteIsNativeRT(this);
}
function CallSiteIsConstructor(){
return %CallSiteIsConstructorRT(this);
}
function CallSiteToString(){
var aB;
var aC="";
if(this.isNative()){
aC="native";
}else{
aB=this.getScriptNameOrSourceURL();
if(!aB&&this.isEval()){
aC=this.getEvalOrigin();
aC+=", ";
}
if(aB){
aC+=aB;
}else{
aC+="<anonymous>";
}
var aD=this.getLineNumber();
if(aD!=null){
aC+=":"+aD;
var aE=this.getColumnNumber();
if(aE){
aC+=":"+aE;
}
}
}
var af="";
var aF=this.getFunctionName();
var aG=true;
var aH=this.isConstructor();
var aI=!(this.isToplevel()||aH);
if(aI){
var aJ=GetTypeName((this[g]),true);
var aK=this.getMethodName();
if(aF){
if(aJ&&
%_CallFunction(aF,aJ,x)!=0){
af+=aJ+".";
}
af+=aF;
if(aK&&
(%_CallFunction(aF,"."+aK,x)!=
aF.length-aK.length-1)){
af+=" [as "+aK+"]";
}
}else{
af+=aJ+"."+(aK||"<anonymous>");
}
}else if(aH){
af+="new "+(aF||"<anonymous>");
}else if(aF){
af+=aF;
}else{
af+=aC;
aG=false;
}
if(aG){
af+=" ("+aC+")";
}
return af;
}
b.SetUpLockedPrototype(CallSite,["receiver","fun","pos"],[
"getThis",CallSiteGetThis,
"getTypeName",CallSiteGetTypeName,
"isToplevel",CallSiteIsToplevel,
"isEval",CallSiteIsEval,
"getEvalOrigin",CallSiteGetEvalOrigin,
"getScriptNameOrSourceURL",CallSiteGetScriptNameOrSourceURL,
"getFunction",CallSiteGetFunction,
"getFunctionName",CallSiteGetFunctionName,
"getMethodName",CallSiteGetMethodName,
"getFileName",CallSiteGetFileName,
"getLineNumber",CallSiteGetLineNumber,
"getColumnNumber",CallSiteGetColumnNumber,
"isNative",CallSiteIsNative,
"getPosition",CallSiteGetPosition,
"isConstructor",CallSiteIsConstructor,
"toString",CallSiteToString
]);
function FormatEvalOrigin(Y){
var aL=Y.nameOrSourceURL();
if(aL){
return aL;
}
var aM="eval at ";
if(Y.eval_from_function_name){
aM+=Y.eval_from_function_name;
}else{
aM+="<anonymous>";
}
var aN=Y.eval_from_script;
if(aN){
if(aN.compilation_type==1){
aM+=" ("+FormatEvalOrigin(aN)+")";
}else{
if(aN.name){
aM+=" ("+aN.name;
var Z=aN.locationFromPosition(
Y.eval_from_script_position,true);
if(Z){
aM+=":"+(Z.line+1);
aM+=":"+(Z.column+1);
}
aM+=")";
}else{
aM+=" (unknown source)";
}
}
}
return aM;
}
function FormatErrorString(U){
try{
return %_CallFunction(U,ErrorToString);
}catch(e){
try{
return"<error: "+e+">";
}catch(ee){
return"<error>";
}
}
}
function GetStackFrames(aO){
var aP=new r();
var aQ=aO[0];
for(var ae=1;ae<aO.length;ae+=4){
var av=aO[ae];
var aw=aO[ae+1];
var aR=aO[ae+2];
var aS=aO[ae+3];
var ax=%_IsSmi(aR)?aR:%FunctionGetPositionForOffset(aR,aS);
aQ--;
aP.push(new CallSite(av,aw,ax,(aQ<0)));
}
return aP;
}
var aT=false;
function FormatStackTrace(L,aO){
var aP=GetStackFrames(aO);
if((%_IsFunction(E.prepareStackTrace))&&
!aT){
var aU=[];
%MoveArrayContents(aP,aU);
aT=true;
var aV=(void 0);
try{
aV=E.prepareStackTrace(L,aU);
}catch(e){
throw e;
}finally{
aT=false;
}
return aV;
}
var aW=new r();
aW.push(FormatErrorString(L));
for(var ae=0;ae<aP.length;ae++){
var aX=aP[ae];
var af;
try{
af=aX.toString();
}catch(e){
try{
af="<error: "+e+">";
}catch(ee){
af="<error>";
}
}
aW.push("    at "+af);
}
return %_CallFunction(aW,"\n",c);
}
function GetTypeName(az,aY){
if((az==null))return null;
var N=az.constructor;
if(!N){
return aY?null:
%_CallFunction(az,NoSideEffectsObjectToString);
}
var O=N.name;
if(!O){
return aY?null:
%_CallFunction(az,NoSideEffectsObjectToString);
}
return O;
}
var aZ=function(){
var ba=(void 0);
var bb=this;
while(bb){
var ba=
(bb[l]);
if((ba===(void 0))){
var aV=(bb[v]);
if((aV===(void 0))){
bb=%_GetPrototype(bb);
continue;
}
ba=FormatStackTrace(bb,aV);
(bb[v]=(void 0));
(bb[l]=ba);
}
return ba;
}
return(void 0);
};
var bc=function(bd){
if((%HasOwnProperty(this,v))){
(this[v]=(void 0));
(this[l]=bd);
}
};
var be=function(){};
function DefineError(a,bf){
var bg=bf.name;
%AddNamedProperty(a,bg,bf,2);
if(bg=='Error'){
var bh=function(){};
%FunctionSetPrototype(bh,n.prototype);
%FunctionSetInstanceClassName(bh,'Error');
%FunctionSetPrototype(bf,new bh());
}else{
%FunctionSetPrototype(bf,new E());
%InternalSetPrototype(bf,E);
}
%FunctionSetInstanceClassName(bf,'Error');
%AddNamedProperty(bf.prototype,'constructor',bf,2);
%AddNamedProperty(bf.prototype,'name',bg,2);
%SetCode(bf,function(bi){
if(%_IsConstructCall()){
try{be(this,bf);}catch(e){}
if(!(bi===(void 0))){
%AddNamedProperty(this,'message',(%_ToString(bi)),2);
}
}else{
return new bf(bi);
}
});
%SetNativeFlag(bf);
return bf;
};
E=DefineError(a,function Error(){});
K=DefineError(a,function EvalError(){});
G=DefineError(a,function RangeError(){});
J=DefineError(a,function ReferenceError(){});
I=DefineError(a,function SyntaxError(){});
F=DefineError(a,function TypeError(){});
H=DefineError(a,function URIError(){});
%AddNamedProperty(E.prototype,'message','',2);
function ErrorToString(){
if(!(%_IsSpecObject(this))){
throw MakeTypeError(14,"Error.prototype.toString");
}
return %ErrorToStringRT(this);
}
b.InstallFunctions(E.prototype,2,
['toString',ErrorToString]);
$errorToString=ErrorToString;
MakeError=function(Q,R,S,T){
return MakeGenericError(E,Q,R,S,T);
}
MakeRangeError=function(Q,R,S,T){
return MakeGenericError(G,Q,R,S,T);
}
MakeSyntaxError=function(Q,R,S,T){
return MakeGenericError(I,Q,R,S,T);
}
MakeTypeError=function(Q,R,S,T){
return MakeGenericError(F,Q,R,S,T);
}
MakeURIError=function(){
return MakeGenericError(H,240);
}
var bj=MakeRangeError(151);
%DefineAccessorPropertyUnchecked(bj,'stack',
aZ,bc,
2);
be=function captureStackTrace(L,bk){
t(L,'stack',{get:aZ,
set:bc,
configurable:true});
%CollectStackTrace(L,bk?bk:be);
};
E.captureStackTrace=be;
%InstallToContext([
"error_function",E,
"eval_error_function",K,
"get_stack_trace_line_fun",GetStackTraceLine,
"make_error_function",MakeGenericError,
"make_range_error",MakeRangeError,
"make_type_error",MakeTypeError,
"message_get_column_number",GetColumnNumber,
"message_get_line_number",GetLineNumber,
"message_get_source_line",GetSourceLine,
"no_side_effect_to_string_fun",NoSideEffectToString,
"range_error_function",G,
"reference_error_function",J,
"stack_overflow_boilerplate",bj,
"syntax_error_function",I,
"to_detail_string_fun",ToDetailString,
"type_error_function",F,
"uri_error_function",H,
]);
});

jsonù:
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.JSON;
var d=b.InternalArray;
var e;
var f;
var g;
var h=b.ImportNow("to_string_tag_symbol");
b.Import(function(i){
e=i.MathMax;
f=i.MathMin;
g=i.ObjectHasOwnProperty;
});
function Revive(j,k,l){
var m=j[k];
if((typeof(m)==='object')){
if((%_IsArray(m))){
var n=m.length;
for(var o=0;o<n;o++){
var p=Revive(m,%_NumberToString(o),l);
m[o]=p;
}
}else{
for(var q in m){
if((%_CallFunction(m,q,g))){
var p=Revive(m,q,l);
if((p===(void 0))){
delete m[q];
}else{
m[q]=p;
}
}
}
}
}
return %_Call(l,j,k,m);
}
function JSONParse(r,l){
var s=%ParseJson(r);
if((typeof(l)==='function')){
return Revive({'':s},'',l);
}else{
return s;
}
}
function SerializeArray(t,u,v,w,x){
if(!%PushIfAbsent(v,t))throw MakeTypeError(18);
var y=w;
w+=x;
var z=new d();
var A=t.length;
for(var o=0;o<A;o++){
var B=JSONSerialize(%_NumberToString(o),t,u,v,
w,x);
if((B===(void 0))){
B="null";
}
z.push(B);
}
var C;
if(x==""){
C="["+z.join(",")+"]";
}else if(z.length>0){
var D=",\n"+w;
C="[\n"+w+z.join(D)+"\n"+
y+"]";
}else{
C="[]";
}
v.pop();
return C;
}
function SerializeObject(t,u,v,w,x){
if(!%PushIfAbsent(v,t))throw MakeTypeError(18);
var y=w;
w+=x;
var z=new d();
if((%_IsArray(u))){
var n=u.length;
for(var o=0;o<n;o++){
if((%_CallFunction(u,o,g))){
var q=u[o];
var B=JSONSerialize(q,t,u,v,w,x);
if(!(B===(void 0))){
var E=%QuoteJSONString(q)+":";
if(x!="")E+=" ";
E+=B;
z.push(E);
}
}
}
}else{
for(var q in t){
if((%_CallFunction(t,q,g))){
var B=JSONSerialize(q,t,u,v,w,x);
if(!(B===(void 0))){
var E=%QuoteJSONString(q)+":";
if(x!="")E+=" ";
E+=B;
z.push(E);
}
}
}
}
var C;
if(x==""){
C="{"+z.join(",")+"}";
}else if(z.length>0){
var D=",\n"+w;
C="{\n"+w+z.join(D)+"\n"+
y+"}";
}else{
C="{}";
}
v.pop();
return C;
}
function JSONSerialize(F,j,u,v,w,x){
var t=j[F];
if((%_IsSpecObject(t))){
var G=t.toJSON;
if((typeof(G)==='function')){
t=%_Call(G,t,F);
}
}
if((typeof(u)==='function')){
t=%_Call(u,j,F,t);
}
if((typeof(t)==='string')){
return %QuoteJSONString(t);
}else if((typeof(t)==='number')){
return((%_IsSmi(%IS_VAR(t))||t-t==0)?%_NumberToString(t):"null");
}else if((typeof(t)==='boolean')){
return t?"true":"false";
}else if((t===null)){
return"null";
}else if((%_IsSpecObject(t))&&!(typeof(t)==='function')){
if((%_IsArray(t))){
return SerializeArray(t,u,v,w,x);
}else if((%_ClassOf(t)==='Number')){
t=(%_ToNumber(t));
return((%_IsSmi(%IS_VAR(t))||t-t==0)?%_NumberToString(t):"null");
}else if((%_ClassOf(t)==='String')){
return %QuoteJSONString((%_ToString(t)));
}else if((%_ClassOf(t)==='Boolean')){
return %_ValueOf(t)?"true":"false";
}else{
return SerializeObject(t,u,v,w,x);
}
}
return(void 0);
}
function JSONStringify(t,u,H){
if(%_ArgumentsLength()==1){
return %BasicJSONStringify(t);
}
if((%_IsArray(u))){
var I=new d();
var J={__proto__:null};
var n=u.length;
for(var o=0;o<n;o++){
var K=u[o];
var L;
if((typeof(K)==='string')){
L=K;
}else if((typeof(K)==='number')){
L=%_NumberToString(K);
}else if((%_ClassOf(K)==='String')||(%_ClassOf(K)==='Number')){
L=(%_ToString(K));
}else{
continue;
}
if(!J[L]){
I.push(L);
J[L]=true;
}
}
u=I;
}
if((typeof(H)==='object')){
if((%_ClassOf(H)==='Number')){
H=(%_ToNumber(H));
}else if((%_ClassOf(H)==='String')){
H=(%_ToString(H));
}
}
var x;
if((typeof(H)==='number')){
H=e(0,f((%_ToInteger(H)),10));
x=%_SubString("          ",0,H);
}else if((typeof(H)==='string')){
if(H.length>10){
x=%_SubString(H,0,10);
}else{
x=H;
}
}else{
x="";
}
return JSONSerialize('',{'':t},u,new d(),"",x);
}
%AddNamedProperty(c,h,"JSON",1|2);
b.InstallFunctions(c,2,[
"parse",JSONParse,
"stringify",JSONStringify
]);
function JsonSerializeAdapter(F,M){
var j={};
j[F]=M;
return JSONSerialize(F,j,(void 0),new d(),"","");
}
%InstallToContext(["json_serialize_adapter",JsonSerializeAdapter]);
})

8array-iterator=
var $arrayValues;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=
b.ImportNow("array_iteration_kind_symbol");
var d=
b.ImportNow("array_iterator_next_symbol");
var e=
b.ImportNow("array_iterator_object_symbol");
var f=a.Array;
var g=b.ImportNow("iterator_symbol");
var h=b.ImportNow("to_string_tag_symbol");
var i=a.Uint8Array;

var j=a.Int8Array;

var k=a.Uint16Array;

var l=a.Int16Array;

var m=a.Uint32Array;

var n=a.Int32Array;

var o=a.Float32Array;

var p=a.Float64Array;

var q=a.Uint8ClampedArray;


function ArrayIterator(){}
function CreateArrayIterator(r,s){
var t=(%_ToObject(r));
var u=new ArrayIterator;
(u[e]=t);
(u[d]=0);
(u[c]=s);
return u;
}
function ArrayIteratorIterator(){
return this;
}
function ArrayIteratorNext(){
var u=this;
var v=(void 0);
var w=true;
if(!(%_IsSpecObject(u))||
!(!(u[d]===(void 0)))){
throw MakeTypeError(36,
'Array Iterator.prototype.next',this);
}
var r=(u[e]);
if(!(r===(void 0))){
var x=(u[d]);
var y=(u[c]);
var z=(r.length>>>0);
if(x>=z){
(u[e]=(void 0));
}else{
(u[d]=x+1);
if(y==2){
v=r[x];
}else if(y==3){
v=[x,r[x]];
}else{
v=x;
}
w=false;
}
}
return %_CreateIterResultObject(v,w);
}
function ArrayEntries(){
return CreateArrayIterator(this,3);
}
function ArrayValues(){
return CreateArrayIterator(this,2);
}
function ArrayKeys(){
return CreateArrayIterator(this,1);
}
%FunctionSetPrototype(ArrayIterator,{__proto__:$iteratorPrototype});
%FunctionSetInstanceClassName(ArrayIterator,'Array Iterator');
b.InstallFunctions(ArrayIterator.prototype,2,[
'next',ArrayIteratorNext
]);
b.SetFunctionName(ArrayIteratorIterator,g);
%AddNamedProperty(ArrayIterator.prototype,g,
ArrayIteratorIterator,2);
%AddNamedProperty(ArrayIterator.prototype,h,
"Array Iterator",1|2);
b.InstallFunctions(f.prototype,2,[
'entries',ArrayEntries,
'keys',ArrayKeys
]);
b.SetFunctionName(ArrayValues,'values');
%AddNamedProperty(f.prototype,g,ArrayValues,
2);
%AddNamedProperty(i.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(i.prototype,'values',ArrayValues,2);
%AddNamedProperty(i.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(i.prototype,g,ArrayValues,
2);

%AddNamedProperty(j.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(j.prototype,'values',ArrayValues,2);
%AddNamedProperty(j.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(j.prototype,g,ArrayValues,
2);

%AddNamedProperty(k.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(k.prototype,'values',ArrayValues,2);
%AddNamedProperty(k.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(k.prototype,g,ArrayValues,
2);

%AddNamedProperty(l.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(l.prototype,'values',ArrayValues,2);
%AddNamedProperty(l.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(l.prototype,g,ArrayValues,
2);

%AddNamedProperty(m.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(m.prototype,'values',ArrayValues,2);
%AddNamedProperty(m.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(m.prototype,g,ArrayValues,
2);

%AddNamedProperty(n.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(n.prototype,'values',ArrayValues,2);
%AddNamedProperty(n.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(n.prototype,g,ArrayValues,
2);

%AddNamedProperty(o.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(o.prototype,'values',ArrayValues,2);
%AddNamedProperty(o.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(o.prototype,g,ArrayValues,
2);

%AddNamedProperty(p.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(p.prototype,'values',ArrayValues,2);
%AddNamedProperty(p.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(p.prototype,g,ArrayValues,
2);

%AddNamedProperty(q.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(q.prototype,'values',ArrayValues,2);
%AddNamedProperty(q.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(q.prototype,g,ArrayValues,
2);


$arrayValues=ArrayValues;
%InstallToContext(["array_values_iterator",ArrayValues]);
})

<string-iterator1
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.String;
var d=b.ImportNow("iterator_symbol");
var e=
b.ImportNow("string_iterator_iterated_string_symbol");
var f=
b.ImportNow("string_iterator_next_index_symbol");
var g=b.ImportNow("to_string_tag_symbol");
function StringIterator(){}
function CreateStringIterator(h){
var i=(%_ToString(h));
var j=new StringIterator;
(j[e]=i);
(j[f]=0);
return j;
}
function StringIteratorNext(){
var j=this;
var k=(void 0);
var l=true;
if(!(%_IsSpecObject(j))||
!(!(j[f]===(void 0)))){
throw MakeTypeError(36,
'String Iterator.prototype.next');
}
var i=(j[e]);
if(!(i===(void 0))){
var m=(j[f]);
var n=(i.length>>>0);
if(m>=n){
(j[e]=(void 0));
}else{
var o=%_StringCharCodeAt(i,m);
k=%_StringCharFromCode(o);
l=false;
m++;
if(o>=0xD800&&o<=0xDBFF&&m<n){
var p=%_StringCharCodeAt(i,m);
if(p>=0xDC00&&p<=0xDFFF){
k+=%_StringCharFromCode(p);
m++;
}
}
(j[f]=m);
}
}
return %_CreateIterResultObject(k,l);
}
function StringPrototypeIterator(){
return CreateStringIterator(this);
}
%FunctionSetPrototype(StringIterator,{__proto__:$iteratorPrototype});
%FunctionSetInstanceClassName(StringIterator,'String Iterator');
b.InstallFunctions(StringIterator.prototype,2,[
'next',StringIteratorNext
]);
%AddNamedProperty(StringIterator.prototype,g,
"String Iterator",1|2);
b.SetFunctionName(StringPrototypeIterator,d);
%AddNamedProperty(c.prototype,d,
StringPrototypeIterator,2);
})

$templatesi
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Map;
var d=b.InternalArray;
var e=new c;
var f=c.prototype.get;
var g=c.prototype.set;
function SameCallSiteElements(h,i){
var j=h.length;
var i=i.raw;
if(j!==i.length)return false;
for(var k=0;k<j;++k){
if(h[k]!==i[k])return false;
}
return true;
}
function GetCachedCallSite(l,m){
var n=%_CallFunction(e,m,f);
if((n===(void 0)))return;
var j=n.length;
for(var k=0;k<j;++k){
if(SameCallSiteElements(l,n[k]))return n[k];
}
}
function SetCachedCallSite(l,m){
var n=%_CallFunction(e,m,f);
var o;
if((n===(void 0))){
o=new d(1);
o[0]=l;
%_CallFunction(e,m,o,g);
}else{
n.push(l);
}
return l;
}
function GetTemplateCallSite(l,h,m){
var p=GetCachedCallSite(h,m);
if(!(p===(void 0)))return p;
%AddNamedProperty(l,"raw",%ObjectFreeze(h),
1|2|4);
return SetCachedCallSite(%ObjectFreeze(l),m);
}
%InstallToContext(["get_template_call_site",GetTemplateCallSite]);
})

4harmony-arrayý;
(function(a,b){
'use strict';
%CheckIsBootstrapping();
var c;
var d;
var e=a.Array;
var f=b.ImportNow("iterator_symbol");
var g;
var h;
var i;
var j;
b.Import(function(k){
c=k.GetIterator;
d=k.GetMethod;
g=k.MathMax;
h=k.MathMin;
i=k.ObjectIsFrozen;
j=k.ObjectDefineProperty;
});
function InnerArrayCopyWithin(l,m,n,o,p){
l=(%_ToInteger(l));
var q;
if(l<0){
q=g(p+l,0);
}else{
q=h(l,p);
}
m=(%_ToInteger(m));
var k;
if(m<0){
k=g(p+m,0);
}else{
k=h(m,p);
}
n=(n===(void 0))?p:(%_ToInteger(n));
var r;
if(n<0){
r=g(p+n,0);
}else{
r=h(n,p);
}
var s=h(r-k,p-q);
var t=1;
if(k<q&&q<(k+s)){
t=-1;
k=k+s-1;
q=q+s-1;
}
while(s>0){
if(k in o){
o[q]=o[k];
}else{
delete o[q];
}
k=k+t;
q=q+t;
s--;
}
return o;
}
function ArrayCopyWithin(l,m,n){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.copyWithin");
var o=(%_ToObject(this));
var p=(%ToLength(o.length));
return InnerArrayCopyWithin(l,m,n,o,p);
}
function InnerArrayFind(u,v,o,p){
if(!(typeof(u)==='function')){
throw MakeTypeError(13,u);
}
for(var w=0;w<p;w++){
var x=o[w];
if(%_Call(u,v,x,w,o)){
return x;
}
}
return;
}
function ArrayFind(u,v){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.find");
var o=(%_ToObject(this));
var p=(%_ToInteger(o.length));
return InnerArrayFind(u,v,o,p);
}
function InnerArrayFindIndex(u,v,o,p){
if(!(typeof(u)==='function')){
throw MakeTypeError(13,u);
}
for(var w=0;w<p;w++){
var x=o[w];
if(%_Call(u,v,x,w,o)){
return w;
}
}
return-1;
}
function ArrayFindIndex(u,v){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.findIndex");
var o=(%_ToObject(this));
var p=(%_ToInteger(o.length));
return InnerArrayFindIndex(u,v,o,p);
}
function InnerArrayFill(y,m,n,o,p){
var w=(m===(void 0))?0:(%_ToInteger(m));
var n=(n===(void 0))?p:(%_ToInteger(n));
if(w<0){
w+=p;
if(w<0)w=0;
}else{
if(w>p)w=p;
}
if(n<0){
n+=p;
if(n<0)n=0;
}else{
if(n>p)n=p;
}
if((n-w)>0&&i(o)){
throw MakeTypeError(10);
}
for(;w<n;w++)
o[w]=y;
return o;
}
function ArrayFill(y,m,n){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.fill");
var o=(%_ToObject(this));
var p=(harmony_tolength?(%ToLength(o.length)):(o.length>>>0));
return InnerArrayFill(y,m,n,o,p);
}
function AddArrayElement(z,o,w,y){
if(z===e){
%AddElement(o,w,y);
}else{
j(o,w,{
value:y,writable:true,configurable:true,enumerable:true
});
}
}
function ArrayFrom(A,B,C){
var D=(%_ToObject(A));
var E=!(B===(void 0));
if(E){
if(!(typeof(B)==='function')){
throw MakeTypeError(13,B);
}
}
var F=d(D,f);
var G;
var H;
var I;
var J;
if(!(F===(void 0))){
H=%IsConstructor(this)?new this():[];
var K=c(D,F);
G=0;
while(true){
var L=K.next();
if(!(typeof(L)==='object')){
throw MakeTypeError(41,L);
}
if(L.done){
H.length=G;
return H;
}
J=L.value;
if(E){
I=%_Call(B,C,J,G);
}else{
I=J;
}
AddArrayElement(this,H,G,I);
G++;
}
}else{
var M=(%ToLength(D.length));
H=%IsConstructor(this)?new this(M):new e(M);
for(G=0;G<M;++G){
J=D[G];
if(E){
I=%_Call(B,C,J,G);
}else{
I=J;
}
AddArrayElement(this,H,G,I);
}
H.length=G;
return H;
}
}
function ArrayOf(){
var p=%_ArgumentsLength();
var z=this;
var o=%IsConstructor(z)?new z(p):[];
for(var w=0;w<p;w++){
AddArrayElement(z,o,w,%_Arguments(w));
}
o.length=p;
return o;
}
%FunctionSetLength(ArrayCopyWithin,2);
%FunctionSetLength(ArrayFrom,1);
%FunctionSetLength(ArrayFill,1);
%FunctionSetLength(ArrayFind,1);
%FunctionSetLength(ArrayFindIndex,1);
b.InstallFunctions(e,2,[
"from",ArrayFrom,
"of",ArrayOf
]);
b.InstallFunctions(e.prototype,2,[
"copyWithin",ArrayCopyWithin,
"find",ArrayFind,
"findIndex",ArrayFindIndex,
"fill",ArrayFill
]);
b.Export(function(q){
q.ArrayFrom=ArrayFrom;
q.InnerArrayCopyWithin=InnerArrayCopyWithin;
q.InnerArrayFill=InnerArrayFill;
q.InnerArrayFind=InnerArrayFind;
q.InnerArrayFindIndex=InnerArrayFindIndex;
});
})

Hharmony-typedarrayý¯
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Uint8Array;

var d=a.Int8Array;

var e=a.Uint16Array;

var f=a.Int16Array;

var g=a.Uint32Array;

var h=a.Int32Array;

var i=a.Float32Array;

var j=a.Float64Array;

var k=a.Uint8ClampedArray;


var l=a.Array;

var m;
var n;
var o;
var p;
var q;
var r;
var s;
var t;
var u;
var v;
var w;
var x;
var y;
var z;
var A;
var B;
var C;
var D;
var E;
var F;
b.Import(function(G){
m=G.ArrayFrom;
n=G.ArrayToString;
o=G.InnerArrayCopyWithin;
p=G.InnerArrayEvery;
q=G.InnerArrayFill;
r=G.InnerArrayFilter;
s=G.InnerArrayFind;
t=G.InnerArrayFindIndex;
u=G.InnerArrayForEach;
v=G.InnerArrayIndexOf;
w=G.InnerArrayJoin;
x=G.InnerArrayLastIndexOf;
y=G.InnerArrayMap;
InnerArrayReduce=G.InnerArrayReduce;
InnerArrayReduceRight=G.InnerArrayReduceRight;
z=G.InnerArraySome;
A=G.InnerArraySort;
B=G.InnerArrayToLocaleString;
C=G.IsNaN;
D=G.MathMax;
E=G.MathMin;
F=G.PackedArrayReverse;
});
function ConstructTypedArray(H,I){
if(!%IsConstructor(H)||(H.prototype===(void 0))||
!%HasOwnProperty(H.prototype,"BYTES_PER_ELEMENT")){
throw MakeTypeError(60);
}
return new H(I);
}
function ConstructTypedArrayLike(J,I){
return ConstructTypedArray(J.constructor,I);
}
function TypedArrayCopyWithin(K,L,M){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
return o(K,L,M,this,N);
}
%FunctionSetLength(TypedArrayCopyWithin,2);
function TypedArrayEvery(O,P){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
return p(O,P,this,N);
}
%FunctionSetLength(TypedArrayEvery,1);
function TypedArrayForEach(O,P){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
u(O,P,this,N);
}
%FunctionSetLength(TypedArrayForEach,1);
function TypedArrayFill(Q,L,M){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
return q(Q,L,M,this,N);
}
%FunctionSetLength(TypedArrayFill,1);
function TypedArrayFilter(R,S){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
var T=r(R,S,this,N);
return ConstructTypedArrayLike(this,T);
}
%FunctionSetLength(TypedArrayFilter,1);
function TypedArrayFind(R,S){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
return s(R,S,this,N);
}
%FunctionSetLength(TypedArrayFind,1);
function TypedArrayFindIndex(R,S){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
return t(R,S,this,N);
}
%FunctionSetLength(TypedArrayFindIndex,1);
function TypedArrayReverse(){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
return F(this,N);
}
function TypedArrayComparefn(U,V){
if(C(U)&&C(V)){
return C(V)?0:1;
}
if(C(U)){
return 1;
}
if(U===0&&U===V){
if(%_IsMinusZero(U)){
if(!%_IsMinusZero(V)){
return-1;
}
}else if(%_IsMinusZero(V)){
return 1;
}
}
return U-V;
}
function TypedArraySort(W){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
if((W===(void 0))){
W=TypedArrayComparefn;
}
return A(this,N,W);
}
function TypedArrayIndexOf(X,Y){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
return v(this,X,Y,N);
}
%FunctionSetLength(TypedArrayIndexOf,1);
function TypedArrayLastIndexOf(X,Y){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
return x(this,X,Y,N,
%_ArgumentsLength());
}
%FunctionSetLength(TypedArrayLastIndexOf,1);
function TypedArrayMap(R,S){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
var T=y(R,S,this,N);
return ConstructTypedArrayLike(this,T);
}
%FunctionSetLength(TypedArrayMap,1);
function TypedArraySome(O,P){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
return z(O,P,this,N);
}
%FunctionSetLength(TypedArraySome,1);
function TypedArrayToLocaleString(){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
return B(this,N);
}
function TypedArrayToString(){
return %_Call(n,this);
}
function TypedArrayJoin(Z){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
return w(Z,this,N);
}
function TypedArrayReduce(aa,ab){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
return InnerArrayReduce(aa,ab,this,N,
%_ArgumentsLength());
}
%FunctionSetLength(TypedArrayReduce,1);
function TypedArrayReduceRight(aa,ab){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var N=%_TypedArrayGetLength(this);
return InnerArrayReduceRight(aa,ab,this,N,
%_ArgumentsLength());
}
%FunctionSetLength(TypedArrayReduceRight,1);
function TypedArraySlice(L,M){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var ac=%_TypedArrayGetLength(this);
var ad=(%_ToInteger(L));
var ae;
if(ad<0){
ae=D(ac+ad,0);
}else{
ae=E(ad,ac);
}
var af;
if((M===(void 0))){
af=ac;
}else{
af=(%_ToInteger(M));
}
var ag;
if(af<0){
ag=D(ac+af,0);
}else{
ag=E(af,ac);
}
var ah=D(ag-ae,0);
var T=ConstructTypedArrayLike(this,ah);
var ai=0;
while(ae<ag){
var aj=this[ae];
T[ai]=aj;
ae++;
ai++;
}
return T;
}
function TypedArrayOf(){
var N=%_ArgumentsLength();
var T=new this(N);
for(var ak=0;ak<N;ak++){
T[ak]=%_Arguments(ak);
}
return T;
}
function TypedArrayFrom(al,am,S){
var T=%_Call(m,l,al,am,S);
return ConstructTypedArray(this,T);
}
%FunctionSetLength(TypedArrayFrom,1);
b.InstallFunctions(c,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(c.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(d,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(d.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(e,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(e.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(f,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(f.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(g,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(g.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(h,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(h.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(i,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(i.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(j,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(j.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(k,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(k.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);


})

i18nBä
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c;
var d;
var e;
var f;
var g;
var h=a.Boolean;
var i=a.Date;
var j=a.Number;
var k=a.RegExp;
var l=a.String;
var m;
var n=b.ImportNow("ObjectDefineProperties");
var o=b.ImportNow("ObjectDefineProperty");
var p;
var q;
var r;
var s;
var t;
var u;
var v;
var w;
b.Import(function(x){
c=x.ArrayIndexOf;
d=x.ArrayJoin;
e=x.ArrayPush;
f=x.IsFinite;
g=x.IsNaN;
m=x.MathFloor;
p=x.RegExpTest;
q=x.StringIndexOf;
r=x.StringLastIndexOf;
s=x.StringMatch;
t=x.StringReplace;
u=x.StringSplit;
v=x.StringSubstr;
w=x.StringSubstring;
});
var y={};
%AddNamedProperty(a,"Intl",y,2);
var z={
'collator':(void 0),
'numberformat':(void 0),
'dateformat':(void 0),
'breakiterator':(void 0)
};
var A=(void 0);
var B=(void 0);
function GetUnicodeExtensionRE(){
if(((void 0)===(void 0))){
B=new k('-u(-[a-z0-9]{2,8})+','g');
}
return B;
}
var C=(void 0);
function GetAnyExtensionRE(){
if((C===(void 0))){
C=new k('-[a-z0-9]{1}-.*','g');
}
return C;
}
var D=(void 0);
function GetQuotedStringRE(){
if((D===(void 0))){
D=new k("'[^']+'",'g');
}
return D;
}
var E=(void 0);
function GetServiceRE(){
if((E===(void 0))){
E=
new k('^(collator|numberformat|dateformat|breakiterator)$');
}
return E;
}
var F=(void 0);
function GetLanguageTagRE(){
if((F===(void 0))){
BuildLanguageTagREs();
}
return F;
}
var G=(void 0);
function GetLanguageVariantRE(){
if((G===(void 0))){
BuildLanguageTagREs();
}
return G;
}
var H=(void 0);
function GetLanguageSingletonRE(){
if((H===(void 0))){
BuildLanguageTagREs();
}
return H;
}
var I=(void 0);
function GetTimezoneNameCheckRE(){
if((I===(void 0))){
I=
new k('^([A-Za-z]+)/([A-Za-z]+)(?:_([A-Za-z]+))*$');
}
return I;
}
function addBoundMethod(J,K,L,M){
%CheckIsBootstrapping();
function getter(){
if(!%IsInitializedIntlObject(this)){
throw MakeTypeError(44,K);
}
var N='__bound'+K+'__';
if((this[N]===(void 0))){
var O=this;
var P;
if((M===(void 0))||M===2){
P=function(Q,R){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
return L(O,Q,R);
}
}else if(M===1){
P=function(Q){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
return L(O,Q);
}
}else{
P=function(){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
if(%_ArgumentsLength()>0){
return L(O,%_Arguments(0));
}else{
return L(O);
}
}
}
%FunctionSetName(P,N);
%FunctionRemovePrototype(P);
%SetNativeFlag(P);
this[N]=P;
}
return this[N];
}
%FunctionSetName(getter,K);
%FunctionRemovePrototype(getter);
%SetNativeFlag(getter);
o(J.prototype,K,{
get:getter,
enumerable:false,
configurable:true
});
}
function supportedLocalesOf(S,T,U){
if((%_CallFunction(S,GetServiceRE(),s)===null)){
throw MakeError(7,S);
}
if((U===(void 0))){
U={};
}else{
U=(%_ToObject(U));
}
var V=U.localeMatcher;
if(!(V===(void 0))){
V=l(V);
if(V!=='lookup'&&V!=='best fit'){
throw MakeRangeError(147,V);
}
}else{
V='best fit';
}
var W=initializeLocaleList(T);
if((z[S]===(void 0))){
z[S]=getAvailableLocalesOf(S);
}
if(V==='best fit'){
return initializeLocaleList(bestFitSupportedLocalesOf(
W,z[S]));
}
return initializeLocaleList(lookupSupportedLocalesOf(
W,z[S]));
}
function lookupSupportedLocalesOf(W,X){
var Y=[];
for(var Z=0;Z<W.length;++Z){
var aa=%_CallFunction(W[Z],GetUnicodeExtensionRE(),
'',t);
do{
if(!(X[aa]===(void 0))){
%_CallFunction(Y,W[Z],e);
break;
}
var ab=%_CallFunction(aa,'-',r);
if(ab===-1){
break;
}
aa=%_CallFunction(aa,0,ab,w);
}while(true);
}
return Y;
}
function bestFitSupportedLocalesOf(W,X){
return lookupSupportedLocalesOf(W,X);
}
function getGetOption(U,ac){
if((U===(void 0)))throw MakeError(4,ac);
var ad=function getOption(ae,af,ag,ah){
if(!(U[ae]===(void 0))){
var ai=U[ae];
switch(af){
case'boolean':
ai=h(ai);
break;
case'string':
ai=l(ai);
break;
case'number':
ai=j(ai);
break;
default:
throw MakeError(8);
}
if(!(ag===(void 0))&&
%_CallFunction(ag,ai,c)===-1){
throw MakeRangeError(157,ai,ac,ae);
}
return ai;
}
return ah;
}
return ad;
}
function resolveLocale(S,W,U){
W=initializeLocaleList(W);
var ad=getGetOption(U,S);
var V=ad('localeMatcher','string',
['lookup','best fit'],'best fit');
var aj;
if(V==='lookup'){
aj=lookupMatcher(S,W);
}else{
aj=bestFitMatcher(S,W);
}
return aj;
}
function lookupMatcher(S,W){
if((%_CallFunction(S,GetServiceRE(),s)===null)){
throw MakeError(7,S);
}
if((z[S]===(void 0))){
z[S]=getAvailableLocalesOf(S);
}
for(var Z=0;Z<W.length;++Z){
var aa=%_CallFunction(W[Z],GetAnyExtensionRE(),'',
t);
do{
if(!(z[S][aa]===(void 0))){
var ak=
%_CallFunction(W[Z],GetUnicodeExtensionRE(),
s);
var al=(ak===null)?'':ak[0];
return{'locale':aa,'extension':al,'position':Z};
}
var ab=%_CallFunction(aa,'-',r);
if(ab===-1){
break;
}
aa=%_CallFunction(aa,0,ab,w);
}while(true);
}
if((A===(void 0))){
A=%GetDefaultICULocale();
}
return{'locale':A,'extension':'','position':-1};
}
function bestFitMatcher(S,W){
return lookupMatcher(S,W);
}
function parseExtension(al){
var am=%_CallFunction(al,'-',u);
if(am.length<=2||
(am[0]!==''&&am[1]!=='u')){
return{};
}
var an={};
var ao=(void 0);
for(var Z=2;Z<am.length;++Z){
var M=am[Z].length;
var ap=am[Z];
if(M===2){
an[ap]=(void 0);
ao=ap;
}else if(M>=3&&M<=8&&!(ao===(void 0))){
an[ao]=ap;
ao=(void 0);
}else{
return{};
}
}
return an;
}
function setOptions(aq,an,ar,ad,as){
var al='';
var at=function updateExtension(au,ai){
return'-'+au+'-'+l(ai);
}
var av=function updateProperty(ae,af,ai){
if(af==='boolean'&&(typeof ai==='string')){
ai=(ai==='true')?true:false;
}
if(!(ae===(void 0))){
defineWEProperty(as,ae,ai);
}
}
for(var au in ar){
if(%HasOwnProperty(ar,au)){
var ai=(void 0);
var aw=ar[au];
if(!(aw.property===(void 0))){
ai=ad(aw.property,aw.type,aw.values);
}
if(!(ai===(void 0))){
av(aw.property,aw.type,ai);
al+=at(au,ai);
continue;
}
if(%HasOwnProperty(an,au)){
ai=an[au];
if(!(ai===(void 0))){
av(aw.property,aw.type,ai);
al+=at(au,ai);
}else if(aw.type==='boolean'){
av(aw.property,aw.type,true);
al+=at(au,true);
}
}
}
}
return al===''?'':'-u'+al;
}
function freezeArray(ax){
var ay=ax.length;
for(var Z=0;Z<ay;Z++){
if(Z in ax){
o(ax,Z,{value:ax[Z],
configurable:false,
writable:false,
enumerable:true});
}
}
o(ax,'length',{value:ay,writable:false});
return ax;
}
function getOptimalLanguageTag(az,aj){
if(az===aj){
return az;
}
var T=%GetLanguageTagVariants([az,aj]);
if(T[0].maximized!==T[1].maximized){
return aj;
}
var aA=new k('^'+T[1].base);
return %_CallFunction(aj,aA,T[0].base,t);
}
function getAvailableLocalesOf(S){
var aB=%AvailableLocalesOf(S);
for(var Z in aB){
if(%HasOwnProperty(aB,Z)){
var aC=%_CallFunction(Z,/^([a-z]{2,3})-([A-Z][a-z]{3})-([A-Z]{2})$/,
s);
if(aC!==null){
aB[aC[1]+'-'+aC[3]]=null;
}
}
}
return aB;
}
function defineWEProperty(aD,ae,ai){
o(aD,ae,
{value:ai,writable:true,enumerable:true});
}
function addWEPropertyIfDefined(aD,ae,ai){
if(!(ai===(void 0))){
defineWEProperty(aD,ae,ai);
}
}
function defineWECProperty(aD,ae,ai){
o(aD,ae,{value:ai,
writable:true,
enumerable:true,
configurable:true});
}
function addWECPropertyIfDefined(aD,ae,ai){
if(!(ai===(void 0))){
defineWECProperty(aD,ae,ai);
}
}
function toTitleCaseWord(aE){
return %StringToUpperCase(%_CallFunction(aE,0,1,v))+
%StringToLowerCase(%_CallFunction(aE,1,v));
}
function canonicalizeLanguageTag(aF){
if(typeof aF!=='string'&&typeof aF!=='object'||
(aF===null)){
throw MakeTypeError(43);
}
var aG=l(aF);
if(isValidLanguageTag(aG)===false){
throw MakeRangeError(139,aG);
}
var aH=%CanonicalizeLanguageTag(aG);
if(aH==='invalid-tag'){
throw MakeRangeError(139,aG);
}
return aH;
}
function initializeLocaleList(T){
var aI=[];
if((T===(void 0))){
aI=[];
}else{
if(typeof T==='string'){
%_CallFunction(aI,canonicalizeLanguageTag(T),e);
return freezeArray(aI);
}
var aJ=(%_ToObject(T));
var aK=(aJ.length>>>0);
for(var aL=0;aL<aK;aL++){
if(aL in aJ){
var ai=aJ[aL];
var aH=canonicalizeLanguageTag(ai);
if(%_CallFunction(aI,aH,c)===-1){
%_CallFunction(aI,aH,e);
}
}
}
}
return freezeArray(aI);
}
function isValidLanguageTag(aa){
if(!%_CallFunction(GetLanguageTagRE(),aa,p)){
return false;
}
if(%_CallFunction(aa,'x-',q)===0){
return true;
}
aa=%_CallFunction(aa,/-x-/,u)[0];
var aM=[];
var aN=[];
var aC=%_CallFunction(aa,/-/,u);
for(var Z=1;Z<aC.length;Z++){
var ai=aC[Z];
if(%_CallFunction(GetLanguageVariantRE(),ai,p)&&
aN.length===0){
if(%_CallFunction(aM,ai,c)===-1){
%_CallFunction(aM,ai,e);
}else{
return false;
}
}
if(%_CallFunction(GetLanguageSingletonRE(),ai,p)){
if(%_CallFunction(aN,ai,c)===-1){
%_CallFunction(aN,ai,e);
}else{
return false;
}
}
}
return true;
}
function BuildLanguageTagREs(){
var aO='[a-zA-Z]';
var aP='[0-9]';
var aQ='('+aO+'|'+aP+')';
var aR='(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|'+
'zh-min|zh-min-nan|zh-xiang)';
var aS='(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|'+
'i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|'+
'i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)';
var aT='('+aS+'|'+aR+')';
var aU='(x(-'+aQ+'{1,8})+)';
var aV='('+aP+'|[A-WY-Za-wy-z])';
H=new k('^'+aV+'$','i');
var al='('+aV+'(-'+aQ+'{2,8})+)';
var aW='('+aQ+'{5,8}|('+aP+aQ+'{3}))';
G=new k('^'+aW+'$','i');
var aX='('+aO+'{2}|'+aP+'{3})';
var aY='('+aO+'{4})';
var aZ='('+aO+'{3}(-'+aO+'{3}){0,2})';
var ba='('+aO+'{2,3}(-'+aZ+')?|'+aO+'{4}|'+
aO+'{5,8})';
var bb=ba+'(-'+aY+')?(-'+aX+')?(-'+
aW+')*(-'+al+')*(-'+aU+')?';
var bc=
'^('+bb+'|'+aU+'|'+aT+')$';
F=new k(bc,'i');
}
function initializeCollator(bd,T,U){
if(%IsInitializedIntlObject(bd)){
throw MakeTypeError(99,"Collator");
}
if((U===(void 0))){
U={};
}
var ad=getGetOption(U,'collator');
var be={};
defineWEProperty(be,'usage',ad(
'usage','string',['sort','search'],'sort'));
var bf=ad('sensitivity','string',
['base','accent','case','variant']);
if((bf===(void 0))&&be.usage==='sort'){
bf='variant';
}
defineWEProperty(be,'sensitivity',bf);
defineWEProperty(be,'ignorePunctuation',ad(
'ignorePunctuation','boolean',(void 0),false));
var aa=resolveLocale('collator',T,U);
var an=parseExtension(aa.extension);
var bg={
'kn':{'property':'numeric','type':'boolean'},
'kf':{'property':'caseFirst','type':'string',
'values':['false','lower','upper']}
};
setOptions(
U,an,bg,ad,be);
var bh='default';
var al='';
if(%HasOwnProperty(an,'co')&&be.usage==='sort'){
var bi=[
'big5han','dict','direct','ducet','gb2312','phonebk','phonetic',
'pinyin','reformed','searchjl','stroke','trad','unihan','zhuyin'
];
if(%_CallFunction(bi,an.co,c)!==
-1){
al='-u-co-'+an.co;
bh=an.co;
}
}else if(be.usage==='search'){
al='-u-co-search';
}
defineWEProperty(be,'collation',bh);
var bj=aa.locale+al;
var aj=n({},{
caseFirst:{writable:true},
collation:{value:be.collation,writable:true},
ignorePunctuation:{writable:true},
locale:{writable:true},
numeric:{writable:true},
requestedLocale:{value:bj,writable:true},
sensitivity:{writable:true},
strength:{writable:true},
usage:{value:be.usage,writable:true}
});
var bk=%CreateCollator(bj,
be,
aj);
%MarkAsInitializedIntlObjectOfType(bd,'collator',bk);
o(bd,'resolved',{value:aj});
return bd;
}
%AddNamedProperty(y,'Collator',function(){
var T=%_Arguments(0);
var U=%_Arguments(1);
if(!this||this===y){
return new y.Collator(T,U);
}
return initializeCollator((%_ToObject(this)),T,U);
},
2
);
%AddNamedProperty(y.Collator.prototype,'resolvedOptions',function(){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
if(!%IsInitializedIntlObjectOfType(this,'collator')){
throw MakeTypeError(100,"Collator");
}
var bl=this;
var aa=getOptimalLanguageTag(bl.resolved.requestedLocale,
bl.resolved.locale);
return{
locale:aa,
usage:bl.resolved.usage,
sensitivity:bl.resolved.sensitivity,
ignorePunctuation:bl.resolved.ignorePunctuation,
numeric:bl.resolved.numeric,
caseFirst:bl.resolved.caseFirst,
collation:bl.resolved.collation
};
},
2
);
%FunctionSetName(y.Collator.prototype.resolvedOptions,'resolvedOptions');
%FunctionRemovePrototype(y.Collator.prototype.resolvedOptions);
%SetNativeFlag(y.Collator.prototype.resolvedOptions);
%AddNamedProperty(y.Collator,'supportedLocalesOf',function(T){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
return supportedLocalesOf('collator',T,%_Arguments(1));
},
2
);
%FunctionSetName(y.Collator.supportedLocalesOf,'supportedLocalesOf');
%FunctionRemovePrototype(y.Collator.supportedLocalesOf);
%SetNativeFlag(y.Collator.supportedLocalesOf);
function compare(bd,Q,R){
return %InternalCompare(%GetImplFromInitializedIntlObject(bd),
l(Q),l(R));
};
addBoundMethod(y.Collator,'compare',compare,2);
function isWellFormedCurrencyCode(bm){
return typeof bm=="string"&&
bm.length==3&&
%_CallFunction(bm,/[^A-Za-z]/,s)==null;
}
function getNumberOption(U,ae,bn,bo,bp){
var ai=U[ae];
if(!(ai===(void 0))){
ai=j(ai);
if(g(ai)||ai<bn||ai>bo){
throw MakeRangeError(150,ae);
}
return m(ai);
}
return bp;
}
function initializeNumberFormat(bq,T,U){
if(%IsInitializedIntlObject(bq)){
throw MakeTypeError(99,"NumberFormat");
}
if((U===(void 0))){
U={};
}
var ad=getGetOption(U,'numberformat');
var aa=resolveLocale('numberformat',T,U);
var be={};
defineWEProperty(be,'style',ad(
'style','string',['decimal','percent','currency'],'decimal'));
var bm=ad('currency','string');
if(!(bm===(void 0))&&!isWellFormedCurrencyCode(bm)){
throw MakeRangeError(134,bm);
}
if(be.style==='currency'&&(bm===(void 0))){
throw MakeTypeError(22);
}
var br=ad(
'currencyDisplay','string',['code','symbol','name'],'symbol');
if(be.style==='currency'){
defineWEProperty(be,'currency',%StringToUpperCase(bm));
defineWEProperty(be,'currencyDisplay',br);
}
var bs=getNumberOption(U,'minimumIntegerDigits',1,21,1);
defineWEProperty(be,'minimumIntegerDigits',bs);
var bt=U['minimumFractionDigits'];
var bu=U['maximumFractionDigits'];
if(!(bt===(void 0))||!be.style==='currency'){
bt=getNumberOption(U,'minimumFractionDigits',0,20,0);
defineWEProperty(be,'minimumFractionDigits',bt);
}
if(!(bu===(void 0))||!be.style==='currency'){
bt=(bt===(void 0))?0:bt;
fallback_limit=(bt>3)?bt:3;
bu=getNumberOption(U,'maximumFractionDigits',bt,20,fallback_limit);
defineWEProperty(be,'maximumFractionDigits',bu);
}
var bv=U['minimumSignificantDigits'];
var bw=U['maximumSignificantDigits'];
if(!(bv===(void 0))||!(bw===(void 0))){
bv=getNumberOption(U,'minimumSignificantDigits',1,21,0);
defineWEProperty(be,'minimumSignificantDigits',bv);
bw=getNumberOption(U,'maximumSignificantDigits',bv,21,21);
defineWEProperty(be,'maximumSignificantDigits',bw);
}
defineWEProperty(be,'useGrouping',ad(
'useGrouping','boolean',(void 0),true));
var an=parseExtension(aa.extension);
var bx={
'nu':{'property':(void 0),'type':'string'}
};
var al=setOptions(U,an,bx,
ad,be);
var bj=aa.locale+al;
var aj=n({},{
currency:{writable:true},
currencyDisplay:{writable:true},
locale:{writable:true},
maximumFractionDigits:{writable:true},
minimumFractionDigits:{writable:true},
minimumIntegerDigits:{writable:true},
numberingSystem:{writable:true},
requestedLocale:{value:bj,writable:true},
style:{value:be.style,writable:true},
useGrouping:{writable:true}
});
if(%HasOwnProperty(be,'minimumSignificantDigits')){
defineWEProperty(aj,'minimumSignificantDigits',(void 0));
}
if(%HasOwnProperty(be,'maximumSignificantDigits')){
defineWEProperty(aj,'maximumSignificantDigits',(void 0));
}
var by=%CreateNumberFormat(bj,
be,
aj);
if(be.style==='currency'){
o(aj,'currencyDisplay',{value:br,
writable:true});
}
%MarkAsInitializedIntlObjectOfType(bq,'numberformat',by);
o(bq,'resolved',{value:aj});
return bq;
}
%AddNamedProperty(y,'NumberFormat',function(){
var T=%_Arguments(0);
var U=%_Arguments(1);
if(!this||this===y){
return new y.NumberFormat(T,U);
}
return initializeNumberFormat((%_ToObject(this)),T,U);
},
2
);
%AddNamedProperty(y.NumberFormat.prototype,'resolvedOptions',function(){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
if(!%IsInitializedIntlObjectOfType(this,'numberformat')){
throw MakeTypeError(100,"NumberFormat");
}
var bz=this;
var aa=getOptimalLanguageTag(bz.resolved.requestedLocale,
bz.resolved.locale);
var bA={
locale:aa,
numberingSystem:bz.resolved.numberingSystem,
style:bz.resolved.style,
useGrouping:bz.resolved.useGrouping,
minimumIntegerDigits:bz.resolved.minimumIntegerDigits,
minimumFractionDigits:bz.resolved.minimumFractionDigits,
maximumFractionDigits:bz.resolved.maximumFractionDigits,
};
if(bA.style==='currency'){
defineWECProperty(bA,'currency',bz.resolved.currency);
defineWECProperty(bA,'currencyDisplay',
bz.resolved.currencyDisplay);
}
if(%HasOwnProperty(bz.resolved,'minimumSignificantDigits')){
defineWECProperty(bA,'minimumSignificantDigits',
bz.resolved.minimumSignificantDigits);
}
if(%HasOwnProperty(bz.resolved,'maximumSignificantDigits')){
defineWECProperty(bA,'maximumSignificantDigits',
bz.resolved.maximumSignificantDigits);
}
return bA;
},
2
);
%FunctionSetName(y.NumberFormat.prototype.resolvedOptions,
'resolvedOptions');
%FunctionRemovePrototype(y.NumberFormat.prototype.resolvedOptions);
%SetNativeFlag(y.NumberFormat.prototype.resolvedOptions);
%AddNamedProperty(y.NumberFormat,'supportedLocalesOf',function(T){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
return supportedLocalesOf('numberformat',T,%_Arguments(1));
},
2
);
%FunctionSetName(y.NumberFormat.supportedLocalesOf,'supportedLocalesOf');
%FunctionRemovePrototype(y.NumberFormat.supportedLocalesOf);
%SetNativeFlag(y.NumberFormat.supportedLocalesOf);
function formatNumber(by,ai){
var bB=(%_ToNumber(ai))+0;
return %InternalNumberFormat(%GetImplFromInitializedIntlObject(by),
bB);
}
function parseNumber(by,ai){
return %InternalNumberParse(%GetImplFromInitializedIntlObject(by),
l(ai));
}
addBoundMethod(y.NumberFormat,'format',formatNumber,1);
addBoundMethod(y.NumberFormat,'v8Parse',parseNumber,1);
function toLDMLString(U){
var ad=getGetOption(U,'dateformat');
var bC='';
var bD=ad('weekday','string',['narrow','short','long']);
bC+=appendToLDMLString(
bD,{narrow:'EEEEE',short:'EEE',long:'EEEE'});
bD=ad('era','string',['narrow','short','long']);
bC+=appendToLDMLString(
bD,{narrow:'GGGGG',short:'GGG',long:'GGGG'});
bD=ad('year','string',['2-digit','numeric']);
bC+=appendToLDMLString(bD,{'2-digit':'yy','numeric':'y'});
bD=ad('month','string',
['2-digit','numeric','narrow','short','long']);
bC+=appendToLDMLString(bD,{'2-digit':'MM','numeric':'M',
'narrow':'MMMMM','short':'MMM','long':'MMMM'});
bD=ad('day','string',['2-digit','numeric']);
bC+=appendToLDMLString(
bD,{'2-digit':'dd','numeric':'d'});
var bE=ad('hour12','boolean');
bD=ad('hour','string',['2-digit','numeric']);
if((bE===(void 0))){
bC+=appendToLDMLString(bD,{'2-digit':'jj','numeric':'j'});
}else if(bE===true){
bC+=appendToLDMLString(bD,{'2-digit':'hh','numeric':'h'});
}else{
bC+=appendToLDMLString(bD,{'2-digit':'HH','numeric':'H'});
}
bD=ad('minute','string',['2-digit','numeric']);
bC+=appendToLDMLString(bD,{'2-digit':'mm','numeric':'m'});
bD=ad('second','string',['2-digit','numeric']);
bC+=appendToLDMLString(bD,{'2-digit':'ss','numeric':'s'});
bD=ad('timeZoneName','string',['short','long']);
bC+=appendToLDMLString(bD,{short:'z',long:'zzzz'});
return bC;
}
function appendToLDMLString(bD,bF){
if(!(bD===(void 0))){
return bF[bD];
}else{
return'';
}
}
function fromLDMLString(bC){
bC=%_CallFunction(bC,GetQuotedStringRE(),'',
t);
var U={};
var bG=%_CallFunction(bC,/E{3,5}/g,s);
U=appendToDateTimeObject(
U,'weekday',bG,{EEEEE:'narrow',EEE:'short',EEEE:'long'});
bG=%_CallFunction(bC,/G{3,5}/g,s);
U=appendToDateTimeObject(
U,'era',bG,{GGGGG:'narrow',GGG:'short',GGGG:'long'});
bG=%_CallFunction(bC,/y{1,2}/g,s);
U=appendToDateTimeObject(
U,'year',bG,{y:'numeric',yy:'2-digit'});
bG=%_CallFunction(bC,/M{1,5}/g,s);
U=appendToDateTimeObject(U,'month',bG,{MM:'2-digit',
M:'numeric',MMMMM:'narrow',MMM:'short',MMMM:'long'});
bG=%_CallFunction(bC,/L{1,5}/g,s);
U=appendToDateTimeObject(U,'month',bG,{LL:'2-digit',
L:'numeric',LLLLL:'narrow',LLL:'short',LLLL:'long'});
bG=%_CallFunction(bC,/d{1,2}/g,s);
U=appendToDateTimeObject(
U,'day',bG,{d:'numeric',dd:'2-digit'});
bG=%_CallFunction(bC,/h{1,2}/g,s);
if(bG!==null){
U['hour12']=true;
}
U=appendToDateTimeObject(
U,'hour',bG,{h:'numeric',hh:'2-digit'});
bG=%_CallFunction(bC,/H{1,2}/g,s);
if(bG!==null){
U['hour12']=false;
}
U=appendToDateTimeObject(
U,'hour',bG,{H:'numeric',HH:'2-digit'});
bG=%_CallFunction(bC,/m{1,2}/g,s);
U=appendToDateTimeObject(
U,'minute',bG,{m:'numeric',mm:'2-digit'});
bG=%_CallFunction(bC,/s{1,2}/g,s);
U=appendToDateTimeObject(
U,'second',bG,{s:'numeric',ss:'2-digit'});
bG=%_CallFunction(bC,/z|zzzz/g,s);
U=appendToDateTimeObject(
U,'timeZoneName',bG,{z:'short',zzzz:'long'});
return U;
}
function appendToDateTimeObject(U,bD,bG,bF){
if((bG===null)){
if(!%HasOwnProperty(U,bD)){
defineWEProperty(U,bD,(void 0));
}
return U;
}
var ae=bG[0];
defineWEProperty(U,bD,bF[ae]);
return U;
}
function toDateTimeOptions(U,bH,bI){
if((U===(void 0))){
U={};
}else{
U=(%_ToObject(U));
}
var bJ=true;
if((bH==='date'||bH==='any')&&
(!(U.weekday===(void 0))||!(U.year===(void 0))||
!(U.month===(void 0))||!(U.day===(void 0)))){
bJ=false;
}
if((bH==='time'||bH==='any')&&
(!(U.hour===(void 0))||!(U.minute===(void 0))||
!(U.second===(void 0)))){
bJ=false;
}
if(bJ&&(bI==='date'||bI==='all')){
o(U,'year',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
o(U,'month',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
o(U,'day',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
}
if(bJ&&(bI==='time'||bI==='all')){
o(U,'hour',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
o(U,'minute',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
o(U,'second',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
}
return U;
}
function initializeDateTimeFormat(bK,T,U){
if(%IsInitializedIntlObject(bK)){
throw MakeTypeError(99,"DateTimeFormat");
}
if((U===(void 0))){
U={};
}
var aa=resolveLocale('dateformat',T,U);
U=toDateTimeOptions(U,'any','date');
var ad=getGetOption(U,'dateformat');
var V=ad('formatMatcher','string',
['basic','best fit'],'best fit');
var bC=toLDMLString(U);
var bL=canonicalizeTimeZoneID(U.timeZone);
var be={};
var an=parseExtension(aa.extension);
var bM={
'ca':{'property':(void 0),'type':'string'},
'nu':{'property':(void 0),'type':'string'}
};
var al=setOptions(U,an,bM,
ad,be);
var bj=aa.locale+al;
var aj=n({},{
calendar:{writable:true},
day:{writable:true},
era:{writable:true},
hour12:{writable:true},
hour:{writable:true},
locale:{writable:true},
minute:{writable:true},
month:{writable:true},
numberingSystem:{writable:true},
pattern:{writable:true},
requestedLocale:{value:bj,writable:true},
second:{writable:true},
timeZone:{writable:true},
timeZoneName:{writable:true},
tz:{value:bL,writable:true},
weekday:{writable:true},
year:{writable:true}
});
var by=%CreateDateTimeFormat(
bj,{skeleton:bC,timeZone:bL},aj);
if(!(bL===(void 0))&&bL!==aj.timeZone){
throw MakeRangeError(156,bL);
}
%MarkAsInitializedIntlObjectOfType(bK,'dateformat',by);
o(bK,'resolved',{value:aj});
return bK;
}
%AddNamedProperty(y,'DateTimeFormat',function(){
var T=%_Arguments(0);
var U=%_Arguments(1);
if(!this||this===y){
return new y.DateTimeFormat(T,U);
}
return initializeDateTimeFormat((%_ToObject(this)),T,U);
},
2
);
%AddNamedProperty(y.DateTimeFormat.prototype,'resolvedOptions',function(){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
if(!%IsInitializedIntlObjectOfType(this,'dateformat')){
throw MakeTypeError(100,"DateTimeFormat");
}
var bN={
'gregorian':'gregory',
'japanese':'japanese',
'buddhist':'buddhist',
'roc':'roc',
'persian':'persian',
'islamic-civil':'islamicc',
'islamic':'islamic',
'hebrew':'hebrew',
'chinese':'chinese',
'indian':'indian',
'coptic':'coptic',
'ethiopic':'ethiopic',
'ethiopic-amete-alem':'ethioaa'
};
var bz=this;
var bO=fromLDMLString(bz.resolved.pattern);
var bP=bN[bz.resolved.calendar];
if((bP===(void 0))){
bP=bz.resolved.calendar;
}
var aa=getOptimalLanguageTag(bz.resolved.requestedLocale,
bz.resolved.locale);
var bA={
locale:aa,
numberingSystem:bz.resolved.numberingSystem,
calendar:bP,
timeZone:bz.resolved.timeZone
};
addWECPropertyIfDefined(bA,'timeZoneName',bO.timeZoneName);
addWECPropertyIfDefined(bA,'era',bO.era);
addWECPropertyIfDefined(bA,'year',bO.year);
addWECPropertyIfDefined(bA,'month',bO.month);
addWECPropertyIfDefined(bA,'day',bO.day);
addWECPropertyIfDefined(bA,'weekday',bO.weekday);
addWECPropertyIfDefined(bA,'hour12',bO.hour12);
addWECPropertyIfDefined(bA,'hour',bO.hour);
addWECPropertyIfDefined(bA,'minute',bO.minute);
addWECPropertyIfDefined(bA,'second',bO.second);
return bA;
},
2
);
%FunctionSetName(y.DateTimeFormat.prototype.resolvedOptions,
'resolvedOptions');
%FunctionRemovePrototype(y.DateTimeFormat.prototype.resolvedOptions);
%SetNativeFlag(y.DateTimeFormat.prototype.resolvedOptions);
%AddNamedProperty(y.DateTimeFormat,'supportedLocalesOf',function(T){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
return supportedLocalesOf('dateformat',T,%_Arguments(1));
},
2
);
%FunctionSetName(y.DateTimeFormat.supportedLocalesOf,'supportedLocalesOf');
%FunctionRemovePrototype(y.DateTimeFormat.supportedLocalesOf);
%SetNativeFlag(y.DateTimeFormat.supportedLocalesOf);
function formatDate(by,bQ){
var bR;
if((bQ===(void 0))){
bR=%DateCurrentTime();
}else{
bR=(%_ToNumber(bQ));
}
if(!f(bR))throw MakeRangeError(128);
return %InternalDateFormat(%GetImplFromInitializedIntlObject(by),
new i(bR));
}
function parseDate(by,ai){
return %InternalDateParse(%GetImplFromInitializedIntlObject(by),
l(ai));
}
addBoundMethod(y.DateTimeFormat,'format',formatDate,0);
addBoundMethod(y.DateTimeFormat,'v8Parse',parseDate,1);
function canonicalizeTimeZoneID(bS){
if((bS===(void 0))){
return bS;
}
var bT=%StringToUpperCase(bS);
if(bT==='UTC'||bT==='GMT'||
bT==='ETC/UTC'||bT==='ETC/GMT'){
return'UTC';
}
var bG=%_CallFunction(bS,GetTimezoneNameCheckRE(),s);
if((bG===null))throw MakeRangeError(129,bS);
var bA=toTitleCaseWord(bG[1])+'/'+toTitleCaseWord(bG[2]);
var Z=3;
while(!(bG[Z]===(void 0))&&Z<bG.length){
bA=bA+'_'+toTitleCaseWord(bG[Z]);
Z++;
}
return bA;
}
function initializeBreakIterator(bU,T,U){
if(%IsInitializedIntlObject(bU)){
throw MakeTypeError(99,"v8BreakIterator");
}
if((U===(void 0))){
U={};
}
var ad=getGetOption(U,'breakiterator');
var be={};
defineWEProperty(be,'type',ad(
'type','string',['character','word','sentence','line'],'word'));
var aa=resolveLocale('breakiterator',T,U);
var aj=n({},{
requestedLocale:{value:aa.locale,writable:true},
type:{value:be.type,writable:true},
locale:{writable:true}
});
var bV=%CreateBreakIterator(aa.locale,
be,
aj);
%MarkAsInitializedIntlObjectOfType(bU,'breakiterator',
bV);
o(bU,'resolved',{value:aj});
return bU;
}
%AddNamedProperty(y,'v8BreakIterator',function(){
var T=%_Arguments(0);
var U=%_Arguments(1);
if(!this||this===y){
return new y.v8BreakIterator(T,U);
}
return initializeBreakIterator((%_ToObject(this)),T,U);
},
2
);
%AddNamedProperty(y.v8BreakIterator.prototype,'resolvedOptions',
function(){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
if(!%IsInitializedIntlObjectOfType(this,'breakiterator')){
throw MakeTypeError(100,"v8BreakIterator");
}
var bW=this;
var aa=getOptimalLanguageTag(bW.resolved.requestedLocale,
bW.resolved.locale);
return{
locale:aa,
type:bW.resolved.type
};
},
2
);
%FunctionSetName(y.v8BreakIterator.prototype.resolvedOptions,
'resolvedOptions');
%FunctionRemovePrototype(y.v8BreakIterator.prototype.resolvedOptions);
%SetNativeFlag(y.v8BreakIterator.prototype.resolvedOptions);
%AddNamedProperty(y.v8BreakIterator,'supportedLocalesOf',
function(T){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
return supportedLocalesOf('breakiterator',T,%_Arguments(1));
},
2
);
%FunctionSetName(y.v8BreakIterator.supportedLocalesOf,'supportedLocalesOf');
%FunctionRemovePrototype(y.v8BreakIterator.supportedLocalesOf);
%SetNativeFlag(y.v8BreakIterator.supportedLocalesOf);
function adoptText(bU,bX){
%BreakIteratorAdoptText(%GetImplFromInitializedIntlObject(bU),
l(bX));
}
function first(bU){
return %BreakIteratorFirst(%GetImplFromInitializedIntlObject(bU));
}
function next(bU){
return %BreakIteratorNext(%GetImplFromInitializedIntlObject(bU));
}
function current(bU){
return %BreakIteratorCurrent(%GetImplFromInitializedIntlObject(bU));
}
function breakType(bU){
return %BreakIteratorBreakType(%GetImplFromInitializedIntlObject(bU));
}
addBoundMethod(y.v8BreakIterator,'adoptText',adoptText,1);
addBoundMethod(y.v8BreakIterator,'first',first,0);
addBoundMethod(y.v8BreakIterator,'next',next,0);
addBoundMethod(y.v8BreakIterator,'current',current,0);
addBoundMethod(y.v8BreakIterator,'breakType',breakType,0);
var bY={
'collator':y.Collator,
'numberformat':y.NumberFormat,
'dateformatall':y.DateTimeFormat,
'dateformatdate':y.DateTimeFormat,
'dateformattime':y.DateTimeFormat
};
var bZ={
'collator':(void 0),
'numberformat':(void 0),
'dateformatall':(void 0),
'dateformatdate':(void 0),
'dateformattime':(void 0),
};
function cachedOrNewService(S,T,U,bI){
var ca=((bI===(void 0)))?U:bI;
if((T===(void 0))&&(U===(void 0))){
if((bZ[S]===(void 0))){
bZ[S]=new bY[S](T,ca);
}
return bZ[S];
}
return new bY[S](T,ca);
}
function OverrideFunction(aD,cb,cc){
%CheckIsBootstrapping();
o(aD,cb,{value:cc,
writeable:true,
configurable:true,
enumerable:false});
%FunctionSetName(cc,cb);
%FunctionRemovePrototype(cc);
%SetNativeFlag(cc);
}
OverrideFunction(l.prototype,'localeCompare',function(O){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
if((this==null)){
throw MakeTypeError(45);
}
var T=%_Arguments(1);
var U=%_Arguments(2);
var bd=cachedOrNewService('collator',T,U);
return compare(bd,this,O);
}
);
OverrideFunction(l.prototype,'normalize',function(){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.normalize");
var cd=(%_ToString(this));
var ce=%_Arguments(0);
var cf=(ce===(void 0))?'NFC':(%_ToString(ce));
var cg=['NFC','NFD','NFKC','NFKD'];
var ch=
%_CallFunction(cg,cf,c);
if(ch===-1){
throw MakeRangeError(148,
%_CallFunction(cg,', ',d));
}
return %StringNormalize(cd,ch);
}
);
OverrideFunction(j.prototype,'toLocaleString',function(){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
if(!(this instanceof j)&&typeof(this)!=='number'){
throw MakeTypeError(46,"Number");
}
var T=%_Arguments(0);
var U=%_Arguments(1);
var bq=cachedOrNewService('numberformat',T,U);
return formatNumber(bq,this);
}
);
function toLocaleDateTime(ci,T,U,bH,bI,S){
if(!(ci instanceof i)){
throw MakeTypeError(46,"Date");
}
if(g(ci))return'Invalid Date';
var be=toDateTimeOptions(U,bH,bI);
var bK=
cachedOrNewService(S,T,U,be);
return formatDate(bK,ci);
}
OverrideFunction(i.prototype,'toLocaleString',function(){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
var T=%_Arguments(0);
var U=%_Arguments(1);
return toLocaleDateTime(
this,T,U,'any','all','dateformatall');
}
);
OverrideFunction(i.prototype,'toLocaleDateString',function(){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
var T=%_Arguments(0);
var U=%_Arguments(1);
return toLocaleDateTime(
this,T,U,'date','date','dateformatdate');
}
);
OverrideFunction(i.prototype,'toLocaleTimeString',function(){
if(%_IsConstructCall()){
throw MakeTypeError(79);
}
var T=%_Arguments(0);
var U=%_Arguments(1);
return toLocaleDateTime(
this,T,U,'time','time','dateformattime');
}
);
})

 (code-stubsi
(function(a,b){
"use strict";
b.StringLengthTFStub=function StringLengthTFStub(c,d){
var e=function(f,g,h,i){
return %_StringGetLength(%_JSValueGetValue(f));
}
return e;
}
b.StringAddTFStub=function StringAddTFStub(c,d){
var e=function(j,k){
return %StringAdd(j,k);
}
return e;
}
const kTurboFanICCallModeMask=1;
const kTurboFanICCallForUnptimizedCode=0;
const kTurboFanICCallForOptimizedCode=1;
b.MathFloorStub=function MathFloorStub(c,d){
var l=function(m,h,n,f,i){
"use strict";
if(m!==%_FixedArrayGet(n,h|0)){
return %_CallFunction(f,i,m);
}
var o=%_MathFloor(+i);
if(%_IsMinusZero(o)){
%_FixedArraySet(n,((h|0)+1)|0,1);
return-0;
}
var p=o|0;
if(p===o){
return p;
}
return o;
}
var q=(d&kTurboFanICCallModeMask);
if(q==kTurboFanICCallForOptimizedCode){
return l;
}else{
%SetForceInlineFlag(l);
var r=function(m,h,f,i){
var n=%_GetTypeFeedbackVector(%_GetCallerJSFunction());
return l(m,h,n,f,i);
}
return r;
}
}
})

 0proxy…3
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Function;
var d=a.Object;
var e;
b.Import(function(f){
e=f.ToNameArray;
});
function ProxyCreate(g,h){
if(!(%_IsSpecObject(g)))
throw MakeTypeError(86,"create")
if((h===(void 0)))
h=null
else if(!((%_IsSpecObject(h))||(h===null)))
throw MakeTypeError(91)
return %CreateJSProxy(g,h)
}
function ProxyCreateFunction(g,i,j){
if(!(%_IsSpecObject(g)))
throw MakeTypeError(86,"createFunction")
if(!(typeof(i)==='function'))
throw MakeTypeError(94,"call")
if((j===(void 0))){
j=DerivedConstructTrap(i)
}else if((typeof(j)==='function')){
var k=j
j=function(){
return %Apply(k,(void 0),arguments,0,%_ArgumentsLength());
}
}else{
throw MakeTypeError(94,"construct")
}
return %CreateJSFunctionProxy(
g,i,j,c.prototype)
}
function DerivedConstructTrap(i){
return function(){
var h=this.prototype
if(!(%_IsSpecObject(h)))h=d.prototype
var l={__proto__:h};
var m=%Apply(i,l,arguments,0,%_ArgumentsLength());
return(%_IsSpecObject(m))?m:l
}
}
function DelegateCallAndConstruct(i,j){
return function(){
return %Apply(%_IsConstructCall()?j:i,
this,arguments,0,%_ArgumentsLength())
}
}
function DerivedGetTrap(n,o){
var p=this.getPropertyDescriptor(o)
if((p===(void 0))){return p}
if('value'in p){
return p.value
}else{
if((p.get===(void 0))){return p.get}
return %_CallFunction(n,p.get)
}
}
function DerivedSetTrap(n,o,q){
var p=this.getOwnPropertyDescriptor(o)
if(p){
if('writable'in p){
if(p.writable){
p.value=q
this.defineProperty(o,p)
return true
}else{
return false
}
}else{
if(p.set){
%_CallFunction(n,q,p.set)
return true
}else{
return false
}
}
}
p=this.getPropertyDescriptor(o)
if(p){
if('writable'in p){
if(p.writable){
}else{
return false
}
}else{
if(p.set){
%_CallFunction(n,q,p.set)
return true
}else{
return false
}
}
}
this.defineProperty(o,{
value:q,
writable:true,
enumerable:true,
configurable:true});
return true;
}
function DerivedHasTrap(o){
return!!this.getPropertyDescriptor(o)
}
function DerivedHasOwnTrap(o){
return!!this.getOwnPropertyDescriptor(o)
}
function DerivedKeysTrap(){
var r=this.getOwnPropertyNames()
var s=[]
for(var t=0,count=0;t<r.length;++t){
var o=r[t]
if((typeof(o)==='symbol'))continue
var p=this.getOwnPropertyDescriptor((%_ToString(o)))
if(!(p===(void 0))&&p.enumerable){
s[count++]=r[t]
}
}
return s
}
function DerivedEnumerateTrap(){
var r=this.getPropertyNames()
var s=[]
for(var t=0,count=0;t<r.length;++t){
var o=r[t]
if((typeof(o)==='symbol'))continue
var p=this.getPropertyDescriptor((%_ToString(o)))
if(!(p===(void 0))){
if(!p.configurable){
throw MakeTypeError(92,
this,o,"getPropertyDescriptor")
}
if(p.enumerable)s[count++]=r[t]
}
}
return s
}
function ProxyEnumerate(u){
var g=%GetHandler(u)
if((g.enumerate===(void 0))){
return %Apply(DerivedEnumerateTrap,g,[],0,0)
}else{
return e(g.enumerate(),"enumerate",false)
}
}
var v=new d();
%AddNamedProperty(a,"Proxy",v,2);
b.InstallFunctions(v,2,[
"create",ProxyCreate,
"createFunction",ProxyCreateFunction
])
b.Export(function(w){
w.ProxyDelegateCallAndConstruct=DelegateCallAndConstruct;
w.ProxyDerivedHasOwnTrap=DerivedHasOwnTrap;
w.ProxyDerivedKeysTrap=DerivedKeysTrap;
});
%InstallToContext([
"derived_get_trap",DerivedGetTrap,
"derived_has_trap",DerivedHasTrap,
"derived_set_trap",DerivedSetTrap,
"proxy_enumerate",ProxyEnumerate,
]);
})

$generator
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Function;
var d;
var e=b.ImportNow("to_string_tag_symbol");
b.Import(function(f){
d=f.NewFunctionString;
});
function GeneratorObjectNext(g){
if(!(%_ClassOf(this)==='Generator')){
throw MakeTypeError(36,
'[Generator].prototype.next',this);
}
var h=%GeneratorGetContinuation(this);
if(h>0){
if((%_DebugIsActive()!=0))%DebugPrepareStepInIfStepping(this);
try{
return %_GeneratorNext(this,g);
}catch(e){
%GeneratorClose(this);
throw e;
}
}else if(h==0){
return{value:void 0,done:true};
}else{
throw MakeTypeError(34);
}
}
function GeneratorObjectThrow(i){
if(!(%_ClassOf(this)==='Generator')){
throw MakeTypeError(36,
'[Generator].prototype.throw',this);
}
var h=%GeneratorGetContinuation(this);
if(h>0){
try{
return %_GeneratorThrow(this,i);
}catch(e){
%GeneratorClose(this);
throw e;
}
}else if(h==0){
throw i;
}else{
throw MakeTypeError(34);
}
}
function GeneratorFunctionConstructor(j){
var k=d(arguments,'function*');
var l=%GlobalProxy(GeneratorFunctionConstructor);
var m=%_CallFunction(l,%CompileString(k,true));
%FunctionMarkNameShouldPrintAsAnonymous(m);
return m;
}
%NeverOptimizeFunction(GeneratorObjectNext);
%NeverOptimizeFunction(GeneratorObjectThrow);
var n=GeneratorFunctionPrototype.prototype;
b.InstallFunctions(n,
2,
["next",GeneratorObjectNext,
"throw",GeneratorObjectThrow]);
%AddNamedProperty(n,"constructor",
GeneratorFunctionPrototype,2|1);
%AddNamedProperty(n,
e,"Generator",2|1);
%InternalSetPrototype(GeneratorFunctionPrototype,c.prototype);
%AddNamedProperty(GeneratorFunctionPrototype,
e,"GeneratorFunction",2|1);
%AddNamedProperty(GeneratorFunctionPrototype,"constructor",
GeneratorFunction,2|1);
%InternalSetPrototype(GeneratorFunction,c);
%SetCode(GeneratorFunction,GeneratorFunctionConstructor);
})

<harmony-atomics!:
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
var d;
var e=b.ImportNow("to_string_tag_symbol");
b.Import(function(f){
d=f.MathMax;
});
function CheckSharedIntegerTypedArray(g){
if(!%IsSharedIntegerTypedArray(g)){
throw MakeTypeError(62,g);
}
}
function CheckSharedInteger32TypedArray(g){
CheckSharedIntegerTypedArray(g);
if(%_ClassOf(g)!=='Int32Array'){
throw MakeTypeError(63,g);
}
}
function AtomicsCompareExchangeJS(h,i,j,k){
CheckSharedIntegerTypedArray(h);
i=(%_ToInteger(i));
if(i<0||i>=%_TypedArrayGetLength(h)){
return(void 0);
}
j=(%_ToNumber(j));
k=(%_ToNumber(k));
return %_AtomicsCompareExchange(h,i,j,k);
}
function AtomicsLoadJS(h,i){
CheckSharedIntegerTypedArray(h);
i=(%_ToInteger(i));
if(i<0||i>=%_TypedArrayGetLength(h)){
return(void 0);
}
return %_AtomicsLoad(h,i);
}
function AtomicsStoreJS(h,i,l){
CheckSharedIntegerTypedArray(h);
i=(%_ToInteger(i));
if(i<0||i>=%_TypedArrayGetLength(h)){
return(void 0);
}
l=(%_ToNumber(l));
return %_AtomicsStore(h,i,l);
}
function AtomicsAddJS(g,i,l){
CheckSharedIntegerTypedArray(g);
i=(%_ToInteger(i));
if(i<0||i>=%_TypedArrayGetLength(g)){
return(void 0);
}
l=(%_ToNumber(l));
return %_AtomicsAdd(g,i,l);
}
function AtomicsSubJS(g,i,l){
CheckSharedIntegerTypedArray(g);
i=(%_ToInteger(i));
if(i<0||i>=%_TypedArrayGetLength(g)){
return(void 0);
}
l=(%_ToNumber(l));
return %_AtomicsSub(g,i,l);
}
function AtomicsAndJS(g,i,l){
CheckSharedIntegerTypedArray(g);
i=(%_ToInteger(i));
if(i<0||i>=%_TypedArrayGetLength(g)){
return(void 0);
}
l=(%_ToNumber(l));
return %_AtomicsAnd(g,i,l);
}
function AtomicsOrJS(g,i,l){
CheckSharedIntegerTypedArray(g);
i=(%_ToInteger(i));
if(i<0||i>=%_TypedArrayGetLength(g)){
return(void 0);
}
l=(%_ToNumber(l));
return %_AtomicsOr(g,i,l);
}
function AtomicsXorJS(g,i,l){
CheckSharedIntegerTypedArray(g);
i=(%_ToInteger(i));
if(i<0||i>=%_TypedArrayGetLength(g)){
return(void 0);
}
l=(%_ToNumber(l));
return %_AtomicsXor(g,i,l);
}
function AtomicsExchangeJS(g,i,l){
CheckSharedIntegerTypedArray(g);
i=(%_ToInteger(i));
if(i<0||i>=%_TypedArrayGetLength(g)){
return(void 0);
}
l=(%_ToNumber(l));
return %_AtomicsExchange(g,i,l);
}
function AtomicsIsLockFreeJS(m){
return %_AtomicsIsLockFree(m);
}
function AtomicsFutexWaitJS(g,i,l,n){
CheckSharedInteger32TypedArray(g);
i=(%_ToInteger(i));
if(i<0||i>=%_TypedArrayGetLength(g)){
return(void 0);
}
if((n===(void 0))){
n=(1/0);
}else{
n=(%_ToNumber(n));
if((!%_IsSmi(%IS_VAR(n))&&!(n==n))){
n=(1/0);
}else{
n=d(0,n);
}
}
return %AtomicsFutexWait(g,i,l,n);
}
function AtomicsFutexWakeJS(g,i,o){
CheckSharedInteger32TypedArray(g);
i=(%_ToInteger(i));
if(i<0||i>=%_TypedArrayGetLength(g)){
return(void 0);
}
o=d(0,(%_ToInteger(o)));
return %AtomicsFutexWake(g,i,o);
}
function AtomicsFutexWakeOrRequeueJS(g,p,o,l,q){
CheckSharedInteger32TypedArray(g);
p=(%_ToInteger(p));
o=d(0,(%_ToInteger(o)));
l=(l|0);
q=(%_ToInteger(q));
if(p<0||p>=%_TypedArrayGetLength(g)||
q<0||q>=%_TypedArrayGetLength(g)){
return(void 0);
}
return %AtomicsFutexWakeOrRequeue(g,p,o,l,q);
}
function AtomicsConstructor(){}
var r=new AtomicsConstructor();
%InternalSetPrototype(r,c.prototype);
%AddNamedProperty(a,"Atomics",r,2);
%FunctionSetInstanceClassName(AtomicsConstructor,'Atomics');
%AddNamedProperty(r,e,"Atomics",1|2);
b.InstallConstants(r,[
"OK",0,
"NOTEQUAL",-1,
"TIMEDOUT",-2,
]);
b.InstallFunctions(r,2,[
"compareExchange",AtomicsCompareExchangeJS,
"load",AtomicsLoadJS,
"store",AtomicsStoreJS,
"add",AtomicsAddJS,
"sub",AtomicsSubJS,
"and",AtomicsAndJS,
"or",AtomicsOrJS,
"xor",AtomicsXorJS,
"exchange",AtomicsExchangeJS,
"isLockFree",AtomicsIsLockFreeJS,
"futexWait",AtomicsFutexWaitJS,
"futexWake",AtomicsFutexWakeJS,
"futexWakeOrRequeue",AtomicsFutexWakeOrRequeueJS,
]);
})

Xharmony-array-includesñ
(function(a,b){
'use strict';
%CheckIsBootstrapping();
var c=a.Array;
function InnerArrayIncludes(d,e,f,g){
if(g===0){
return false;
}
var h=(%_ToInteger(e));
var i;
if(h>=0){
i=h;
}else{
i=g+h;
if(i<0){
i=0;
}
}
while(i<g){
var j=f[i];
if($sameValueZero(d,j)){
return true;
}
++i;
}
return false;
}
function ArrayIncludes(d,e){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.includes");
var f=(%_ToObject(this));
var g=(%ToLength(f.length));
return InnerArrayIncludes(d,e,f,g);
}
function TypedArrayIncludes(d,e){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var g=%_TypedArrayGetLength(this);
return InnerArrayIncludes(d,e,this,g);
}
%FunctionSetLength(ArrayIncludes,1);
%FunctionSetLength(TypedArrayIncludes,1);
b.InstallFunctions(c.prototype,2,[
"includes",ArrayIncludes
]);
var k=a.Uint8Array;

var l=a.Int8Array;

var m=a.Uint16Array;

var n=a.Int16Array;

var o=a.Uint32Array;

var p=a.Int32Array;

var q=a.Float32Array;

var r=a.Float64Array;

var s=a.Uint8ClampedArray;


b.InstallFunctions(k.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(l.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(m.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(n.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(o.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(p.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(q.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(r.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(s.prototype,2,[
"includes",TypedArrayIncludes
]);


})

dharmony-concat-spreadable¡
(function(a,b){
'use strict';
%CheckIsBootstrapping();
var c=
b.ImportNow("is_concat_spreadable_symbol");
b.InstallConstants(a.Symbol,[
"isConcatSpreadable",c
]);
})

@harmony-tostring‰
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Symbol;
var d=b.ImportNow("to_string_tag_symbol");
b.InstallConstants(c,[
"toStringTag",d
]);
})

8harmony-regexpÅ
(function(a,b){
'use strict';
%CheckIsBootstrapping();
var c=a.RegExp;
function RegExpGetFlags(){
if(!(%_IsSpecObject(this))){
throw MakeTypeError(32,(%_ToString(this)));
}
var d='';
if(this.global)d+='g';
if(this.ignoreCase)d+='i';
if(this.multiline)d+='m';
if(this.unicode)d+='u';
if(this.sticky)d+='y';
return d;
}
%DefineAccessorPropertyUnchecked(c.prototype,'flags',
RegExpGetFlags,null,2);
%SetNativeFlag(RegExpGetFlags);
})

<harmony-reflect=
(function(a,b){
'use strict';
%CheckIsBootstrapping();
var c=a.Reflect;
var d=b.ImportNow("reflect_apply");
var e=b.ImportNow("reflect_construct");
b.InstallFunctions(c,2,[
"apply",d,
"construct",e
]);
})

8harmony-spread=
(function(a,b){
'use strict';
var c=b.InternalArray;
function SpreadArguments(){
var d=%_ArgumentsLength();
var e=new c();
for(var f=0;f<d;++f){
var g=%_Arguments(f);
var h=g.length;
for(var i=0;i<h;++i){
e.push(g[i]);
}
}
return e;
}
function SpreadIterable(j){
if((j==null)){
throw MakeTypeError(59,j);
}
var e=new c();
for(var k of j){
e.push(k);
}
return e;
}
%InstallToContext([
"spread_arguments",SpreadArguments,
"spread_iterable",SpreadIterable,
]);
})

Xharmony-object-observe™
(function(a,b){
"use strict";
%CheckIsBootstrapping();
b.InstallFunctions(a.Object,2,$observeObjectMethods);
b.InstallFunctions(a.Array,2,$observeArrayMethods);
})

dharmony-sharedarraybuffer
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.SharedArrayBuffer;
var d=a.Object;
var e=b.ImportNow("to_string_tag_symbol");
function SharedArrayBufferConstructor(f){
if(%_IsConstructCall()){
var g=$toPositiveInteger(f,130);
%ArrayBufferInitialize(this,g,true);
}else{
throw MakeTypeError(21,"SharedArrayBuffer");
}
}
function SharedArrayBufferGetByteLen(){
if(!(%_ClassOf(this)==='SharedArrayBuffer')){
throw MakeTypeError(36,
'SharedArrayBuffer.prototype.byteLength',this);
}
return %_ArrayBufferGetByteLength(this);
}
function SharedArrayBufferIsViewJS(h){
return %ArrayBufferIsView(h);
}
%SetCode(c,SharedArrayBufferConstructor);
%FunctionSetPrototype(c,new d());
%AddNamedProperty(c.prototype,"constructor",
c,2);
%AddNamedProperty(c.prototype,
e,"SharedArrayBuffer",2|1);
b.InstallGetter(c.prototype,"byteLength",
SharedArrayBufferGetByteLen);
b.InstallFunctions(c,2,[
"isView",SharedArrayBufferIsViewJS
]);
})

0harmony-simdÖÅ
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.SIMD;
var d=b.ImportNow("to_string_tag_symbol");
var e=c.Float32x4;


var f=c.Int32x4;

var g=c.Int16x8;

var h=c.Int8x16;


var i=c.Uint32x4;

var j=c.Uint16x8;

var k=c.Uint8x16;


var l=c.Bool32x4;

var m=c.Bool16x8;

var n=c.Bool8x16;



function Float32x4CheckJS(o){
return %Float32x4Check(o);
}
function Float32x4ToString(){
if(typeof(this)!=='float32x4'&&%_ClassOf(this)!=='Float32x4'){
throw MakeTypeError(36,
"Float32x4.prototype.toString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Float32x4(";
q+=%Float32x4ExtractLane(p,0);
for(var r=1;r<4;r++){
q+=", "+%Float32x4ExtractLane(p,r);
}
return q+")";
}
function Float32x4ToLocaleString(){
if(typeof(this)!=='float32x4'&&%_ClassOf(this)!=='Float32x4'){
throw MakeTypeError(36,
"Float32x4.prototype.toLocaleString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Float32x4(";
q+=%Float32x4ExtractLane(p,0).toLocaleString();
for(var r=1;r<4;r++){
q+=", "+%Float32x4ExtractLane(p,r).toLocaleString();
}
return q+")";
}
function Float32x4ValueOf(){
if(typeof(this)!=='float32x4'&&%_ClassOf(this)!=='Float32x4'){
throw MakeTypeError(36,
"Float32x4.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Float32x4ExtractLaneJS(s,t){
return %Float32x4ExtractLane(s,t);
}


function Int32x4CheckJS(o){
return %Int32x4Check(o);
}
function Int32x4ToString(){
if(typeof(this)!=='int32x4'&&%_ClassOf(this)!=='Int32x4'){
throw MakeTypeError(36,
"Int32x4.prototype.toString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Int32x4(";
q+=%Int32x4ExtractLane(p,0);
for(var r=1;r<4;r++){
q+=", "+%Int32x4ExtractLane(p,r);
}
return q+")";
}
function Int32x4ToLocaleString(){
if(typeof(this)!=='int32x4'&&%_ClassOf(this)!=='Int32x4'){
throw MakeTypeError(36,
"Int32x4.prototype.toLocaleString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Int32x4(";
q+=%Int32x4ExtractLane(p,0).toLocaleString();
for(var r=1;r<4;r++){
q+=", "+%Int32x4ExtractLane(p,r).toLocaleString();
}
return q+")";
}
function Int32x4ValueOf(){
if(typeof(this)!=='int32x4'&&%_ClassOf(this)!=='Int32x4'){
throw MakeTypeError(36,
"Int32x4.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Int32x4ExtractLaneJS(s,t){
return %Int32x4ExtractLane(s,t);
}

function Int16x8CheckJS(o){
return %Int16x8Check(o);
}
function Int16x8ToString(){
if(typeof(this)!=='int16x8'&&%_ClassOf(this)!=='Int16x8'){
throw MakeTypeError(36,
"Int16x8.prototype.toString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Int16x8(";
q+=%Int16x8ExtractLane(p,0);
for(var r=1;r<8;r++){
q+=", "+%Int16x8ExtractLane(p,r);
}
return q+")";
}
function Int16x8ToLocaleString(){
if(typeof(this)!=='int16x8'&&%_ClassOf(this)!=='Int16x8'){
throw MakeTypeError(36,
"Int16x8.prototype.toLocaleString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Int16x8(";
q+=%Int16x8ExtractLane(p,0).toLocaleString();
for(var r=1;r<8;r++){
q+=", "+%Int16x8ExtractLane(p,r).toLocaleString();
}
return q+")";
}
function Int16x8ValueOf(){
if(typeof(this)!=='int16x8'&&%_ClassOf(this)!=='Int16x8'){
throw MakeTypeError(36,
"Int16x8.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Int16x8ExtractLaneJS(s,t){
return %Int16x8ExtractLane(s,t);
}

function Int8x16CheckJS(o){
return %Int8x16Check(o);
}
function Int8x16ToString(){
if(typeof(this)!=='int8x16'&&%_ClassOf(this)!=='Int8x16'){
throw MakeTypeError(36,
"Int8x16.prototype.toString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Int8x16(";
q+=%Int8x16ExtractLane(p,0);
for(var r=1;r<16;r++){
q+=", "+%Int8x16ExtractLane(p,r);
}
return q+")";
}
function Int8x16ToLocaleString(){
if(typeof(this)!=='int8x16'&&%_ClassOf(this)!=='Int8x16'){
throw MakeTypeError(36,
"Int8x16.prototype.toLocaleString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Int8x16(";
q+=%Int8x16ExtractLane(p,0).toLocaleString();
for(var r=1;r<16;r++){
q+=", "+%Int8x16ExtractLane(p,r).toLocaleString();
}
return q+")";
}
function Int8x16ValueOf(){
if(typeof(this)!=='int8x16'&&%_ClassOf(this)!=='Int8x16'){
throw MakeTypeError(36,
"Int8x16.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Int8x16ExtractLaneJS(s,t){
return %Int8x16ExtractLane(s,t);
}


function Uint32x4CheckJS(o){
return %Uint32x4Check(o);
}
function Uint32x4ToString(){
if(typeof(this)!=='uint32x4'&&%_ClassOf(this)!=='Uint32x4'){
throw MakeTypeError(36,
"Uint32x4.prototype.toString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Uint32x4(";
q+=%Uint32x4ExtractLane(p,0);
for(var r=1;r<4;r++){
q+=", "+%Uint32x4ExtractLane(p,r);
}
return q+")";
}
function Uint32x4ToLocaleString(){
if(typeof(this)!=='uint32x4'&&%_ClassOf(this)!=='Uint32x4'){
throw MakeTypeError(36,
"Uint32x4.prototype.toLocaleString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Uint32x4(";
q+=%Uint32x4ExtractLane(p,0).toLocaleString();
for(var r=1;r<4;r++){
q+=", "+%Uint32x4ExtractLane(p,r).toLocaleString();
}
return q+")";
}
function Uint32x4ValueOf(){
if(typeof(this)!=='uint32x4'&&%_ClassOf(this)!=='Uint32x4'){
throw MakeTypeError(36,
"Uint32x4.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Uint32x4ExtractLaneJS(s,t){
return %Uint32x4ExtractLane(s,t);
}

function Uint16x8CheckJS(o){
return %Uint16x8Check(o);
}
function Uint16x8ToString(){
if(typeof(this)!=='uint16x8'&&%_ClassOf(this)!=='Uint16x8'){
throw MakeTypeError(36,
"Uint16x8.prototype.toString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Uint16x8(";
q+=%Uint16x8ExtractLane(p,0);
for(var r=1;r<8;r++){
q+=", "+%Uint16x8ExtractLane(p,r);
}
return q+")";
}
function Uint16x8ToLocaleString(){
if(typeof(this)!=='uint16x8'&&%_ClassOf(this)!=='Uint16x8'){
throw MakeTypeError(36,
"Uint16x8.prototype.toLocaleString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Uint16x8(";
q+=%Uint16x8ExtractLane(p,0).toLocaleString();
for(var r=1;r<8;r++){
q+=", "+%Uint16x8ExtractLane(p,r).toLocaleString();
}
return q+")";
}
function Uint16x8ValueOf(){
if(typeof(this)!=='uint16x8'&&%_ClassOf(this)!=='Uint16x8'){
throw MakeTypeError(36,
"Uint16x8.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Uint16x8ExtractLaneJS(s,t){
return %Uint16x8ExtractLane(s,t);
}

function Uint8x16CheckJS(o){
return %Uint8x16Check(o);
}
function Uint8x16ToString(){
if(typeof(this)!=='uint8x16'&&%_ClassOf(this)!=='Uint8x16'){
throw MakeTypeError(36,
"Uint8x16.prototype.toString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Uint8x16(";
q+=%Uint8x16ExtractLane(p,0);
for(var r=1;r<16;r++){
q+=", "+%Uint8x16ExtractLane(p,r);
}
return q+")";
}
function Uint8x16ToLocaleString(){
if(typeof(this)!=='uint8x16'&&%_ClassOf(this)!=='Uint8x16'){
throw MakeTypeError(36,
"Uint8x16.prototype.toLocaleString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Uint8x16(";
q+=%Uint8x16ExtractLane(p,0).toLocaleString();
for(var r=1;r<16;r++){
q+=", "+%Uint8x16ExtractLane(p,r).toLocaleString();
}
return q+")";
}
function Uint8x16ValueOf(){
if(typeof(this)!=='uint8x16'&&%_ClassOf(this)!=='Uint8x16'){
throw MakeTypeError(36,
"Uint8x16.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Uint8x16ExtractLaneJS(s,t){
return %Uint8x16ExtractLane(s,t);
}


function Bool32x4CheckJS(o){
return %Bool32x4Check(o);
}
function Bool32x4ToString(){
if(typeof(this)!=='bool32x4'&&%_ClassOf(this)!=='Bool32x4'){
throw MakeTypeError(36,
"Bool32x4.prototype.toString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Bool32x4(";
q+=%Bool32x4ExtractLane(p,0);
for(var r=1;r<4;r++){
q+=", "+%Bool32x4ExtractLane(p,r);
}
return q+")";
}
function Bool32x4ToLocaleString(){
if(typeof(this)!=='bool32x4'&&%_ClassOf(this)!=='Bool32x4'){
throw MakeTypeError(36,
"Bool32x4.prototype.toLocaleString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Bool32x4(";
q+=%Bool32x4ExtractLane(p,0).toLocaleString();
for(var r=1;r<4;r++){
q+=", "+%Bool32x4ExtractLane(p,r).toLocaleString();
}
return q+")";
}
function Bool32x4ValueOf(){
if(typeof(this)!=='bool32x4'&&%_ClassOf(this)!=='Bool32x4'){
throw MakeTypeError(36,
"Bool32x4.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Bool32x4ExtractLaneJS(s,t){
return %Bool32x4ExtractLane(s,t);
}

function Bool16x8CheckJS(o){
return %Bool16x8Check(o);
}
function Bool16x8ToString(){
if(typeof(this)!=='bool16x8'&&%_ClassOf(this)!=='Bool16x8'){
throw MakeTypeError(36,
"Bool16x8.prototype.toString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Bool16x8(";
q+=%Bool16x8ExtractLane(p,0);
for(var r=1;r<8;r++){
q+=", "+%Bool16x8ExtractLane(p,r);
}
return q+")";
}
function Bool16x8ToLocaleString(){
if(typeof(this)!=='bool16x8'&&%_ClassOf(this)!=='Bool16x8'){
throw MakeTypeError(36,
"Bool16x8.prototype.toLocaleString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Bool16x8(";
q+=%Bool16x8ExtractLane(p,0).toLocaleString();
for(var r=1;r<8;r++){
q+=", "+%Bool16x8ExtractLane(p,r).toLocaleString();
}
return q+")";
}
function Bool16x8ValueOf(){
if(typeof(this)!=='bool16x8'&&%_ClassOf(this)!=='Bool16x8'){
throw MakeTypeError(36,
"Bool16x8.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Bool16x8ExtractLaneJS(s,t){
return %Bool16x8ExtractLane(s,t);
}

function Bool8x16CheckJS(o){
return %Bool8x16Check(o);
}
function Bool8x16ToString(){
if(typeof(this)!=='bool8x16'&&%_ClassOf(this)!=='Bool8x16'){
throw MakeTypeError(36,
"Bool8x16.prototype.toString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Bool8x16(";
q+=%Bool8x16ExtractLane(p,0);
for(var r=1;r<16;r++){
q+=", "+%Bool8x16ExtractLane(p,r);
}
return q+")";
}
function Bool8x16ToLocaleString(){
if(typeof(this)!=='bool8x16'&&%_ClassOf(this)!=='Bool8x16'){
throw MakeTypeError(36,
"Bool8x16.prototype.toLocaleString",this);
}
var p=%_ValueOf(this);
var q="SIMD.Bool8x16(";
q+=%Bool8x16ExtractLane(p,0).toLocaleString();
for(var r=1;r<16;r++){
q+=", "+%Bool8x16ExtractLane(p,r).toLocaleString();
}
return q+")";
}
function Bool8x16ValueOf(){
if(typeof(this)!=='bool8x16'&&%_ClassOf(this)!=='Bool8x16'){
throw MakeTypeError(36,
"Bool8x16.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Bool8x16ExtractLaneJS(s,t){
return %Bool8x16ExtractLane(s,t);
}



function Int32x4ShiftLeftByScalarJS(s,u){
return %Int32x4ShiftLeftByScalar(s,u);
}
function Int32x4ShiftRightByScalarJS(s,u){
return %Int32x4ShiftRightByScalar(s,u);
}

function Int16x8ShiftLeftByScalarJS(s,u){
return %Int16x8ShiftLeftByScalar(s,u);
}
function Int16x8ShiftRightByScalarJS(s,u){
return %Int16x8ShiftRightByScalar(s,u);
}

function Int8x16ShiftLeftByScalarJS(s,u){
return %Int8x16ShiftLeftByScalar(s,u);
}
function Int8x16ShiftRightByScalarJS(s,u){
return %Int8x16ShiftRightByScalar(s,u);
}


function Uint32x4ShiftLeftByScalarJS(s,u){
return %Uint32x4ShiftLeftByScalar(s,u);
}
function Uint32x4ShiftRightByScalarJS(s,u){
return %Uint32x4ShiftRightByScalar(s,u);
}

function Uint16x8ShiftLeftByScalarJS(s,u){
return %Uint16x8ShiftLeftByScalar(s,u);
}
function Uint16x8ShiftRightByScalarJS(s,u){
return %Uint16x8ShiftRightByScalar(s,u);
}

function Uint8x16ShiftLeftByScalarJS(s,u){
return %Uint8x16ShiftLeftByScalar(s,u);
}
function Uint8x16ShiftRightByScalarJS(s,u){
return %Uint8x16ShiftRightByScalar(s,u);
}


function Int16x8AddSaturateJS(o,v){
return %Int16x8AddSaturate(o,v);
}
function Int16x8SubSaturateJS(o,v){
return %Int16x8SubSaturate(o,v);
}

function Int8x16AddSaturateJS(o,v){
return %Int8x16AddSaturate(o,v);
}
function Int8x16SubSaturateJS(o,v){
return %Int8x16SubSaturate(o,v);
}

function Uint8x16AddSaturateJS(o,v){
return %Uint8x16AddSaturate(o,v);
}
function Uint8x16SubSaturateJS(o,v){
return %Uint8x16SubSaturate(o,v);
}

function Uint16x8AddSaturateJS(o,v){
return %Uint16x8AddSaturate(o,v);
}
function Uint16x8SubSaturateJS(o,v){
return %Uint16x8SubSaturate(o,v);
}


function Float32x4NegJS(o){
return %Float32x4Neg(o);
}


function Int32x4NegJS(o){
return %Int32x4Neg(o);
}

function Int16x8NegJS(o){
return %Int16x8Neg(o);
}

function Int8x16NegJS(o){
return %Int8x16Neg(o);
}


function Bool32x4ReplaceLaneJS(s,t,p){
return %Bool32x4ReplaceLane(s,t,p);
}
function Bool32x4AnyTrueJS(w){
return %Bool32x4AnyTrue(w);
}
function Bool32x4AllTrueJS(w){
return %Bool32x4AllTrue(w);
}

function Bool16x8ReplaceLaneJS(s,t,p){
return %Bool16x8ReplaceLane(s,t,p);
}
function Bool16x8AnyTrueJS(w){
return %Bool16x8AnyTrue(w);
}
function Bool16x8AllTrueJS(w){
return %Bool16x8AllTrue(w);
}

function Bool8x16ReplaceLaneJS(s,t,p){
return %Bool8x16ReplaceLane(s,t,p);
}
function Bool8x16AnyTrueJS(w){
return %Bool8x16AnyTrue(w);
}
function Bool8x16AllTrueJS(w){
return %Bool8x16AllTrue(w);
}


function Float32x4ReplaceLaneJS(s,t,p){
return %Float32x4ReplaceLane(s,t,(%_ToNumber(p)));
}
function Float32x4SelectJS(x,o,v){
return %Float32x4Select(x,o,v);
}
function Float32x4AddJS(o,v){
return %Float32x4Add(o,v);
}
function Float32x4SubJS(o,v){
return %Float32x4Sub(o,v);
}
function Float32x4MulJS(o,v){
return %Float32x4Mul(o,v);
}
function Float32x4MinJS(o,v){
return %Float32x4Min(o,v);
}
function Float32x4MaxJS(o,v){
return %Float32x4Max(o,v);
}
function Float32x4EqualJS(o,v){
return %Float32x4Equal(o,v);
}
function Float32x4NotEqualJS(o,v){
return %Float32x4NotEqual(o,v);
}
function Float32x4LessThanJS(o,v){
return %Float32x4LessThan(o,v);
}
function Float32x4LessThanOrEqualJS(o,v){
return %Float32x4LessThanOrEqual(o,v);
}
function Float32x4GreaterThanJS(o,v){
return %Float32x4GreaterThan(o,v);
}
function Float32x4GreaterThanOrEqualJS(o,v){
return %Float32x4GreaterThanOrEqual(o,v);
}
function Float32x4LoadJS(y,z){
return %Float32x4Load(y,z);
}
function Float32x4StoreJS(y,z,o){
return %Float32x4Store(y,z,o);
}


function Int32x4ReplaceLaneJS(s,t,p){
return %Int32x4ReplaceLane(s,t,(%_ToNumber(p)));
}
function Int32x4SelectJS(x,o,v){
return %Int32x4Select(x,o,v);
}
function Int32x4AddJS(o,v){
return %Int32x4Add(o,v);
}
function Int32x4SubJS(o,v){
return %Int32x4Sub(o,v);
}
function Int32x4MulJS(o,v){
return %Int32x4Mul(o,v);
}
function Int32x4MinJS(o,v){
return %Int32x4Min(o,v);
}
function Int32x4MaxJS(o,v){
return %Int32x4Max(o,v);
}
function Int32x4EqualJS(o,v){
return %Int32x4Equal(o,v);
}
function Int32x4NotEqualJS(o,v){
return %Int32x4NotEqual(o,v);
}
function Int32x4LessThanJS(o,v){
return %Int32x4LessThan(o,v);
}
function Int32x4LessThanOrEqualJS(o,v){
return %Int32x4LessThanOrEqual(o,v);
}
function Int32x4GreaterThanJS(o,v){
return %Int32x4GreaterThan(o,v);
}
function Int32x4GreaterThanOrEqualJS(o,v){
return %Int32x4GreaterThanOrEqual(o,v);
}
function Int32x4LoadJS(y,z){
return %Int32x4Load(y,z);
}
function Int32x4StoreJS(y,z,o){
return %Int32x4Store(y,z,o);
}

function Int16x8ReplaceLaneJS(s,t,p){
return %Int16x8ReplaceLane(s,t,(%_ToNumber(p)));
}
function Int16x8SelectJS(x,o,v){
return %Int16x8Select(x,o,v);
}
function Int16x8AddJS(o,v){
return %Int16x8Add(o,v);
}
function Int16x8SubJS(o,v){
return %Int16x8Sub(o,v);
}
function Int16x8MulJS(o,v){
return %Int16x8Mul(o,v);
}
function Int16x8MinJS(o,v){
return %Int16x8Min(o,v);
}
function Int16x8MaxJS(o,v){
return %Int16x8Max(o,v);
}
function Int16x8EqualJS(o,v){
return %Int16x8Equal(o,v);
}
function Int16x8NotEqualJS(o,v){
return %Int16x8NotEqual(o,v);
}
function Int16x8LessThanJS(o,v){
return %Int16x8LessThan(o,v);
}
function Int16x8LessThanOrEqualJS(o,v){
return %Int16x8LessThanOrEqual(o,v);
}
function Int16x8GreaterThanJS(o,v){
return %Int16x8GreaterThan(o,v);
}
function Int16x8GreaterThanOrEqualJS(o,v){
return %Int16x8GreaterThanOrEqual(o,v);
}
function Int16x8LoadJS(y,z){
return %Int16x8Load(y,z);
}
function Int16x8StoreJS(y,z,o){
return %Int16x8Store(y,z,o);
}

function Int8x16ReplaceLaneJS(s,t,p){
return %Int8x16ReplaceLane(s,t,(%_ToNumber(p)));
}
function Int8x16SelectJS(x,o,v){
return %Int8x16Select(x,o,v);
}
function Int8x16AddJS(o,v){
return %Int8x16Add(o,v);
}
function Int8x16SubJS(o,v){
return %Int8x16Sub(o,v);
}
function Int8x16MulJS(o,v){
return %Int8x16Mul(o,v);
}
function Int8x16MinJS(o,v){
return %Int8x16Min(o,v);
}
function Int8x16MaxJS(o,v){
return %Int8x16Max(o,v);
}
function Int8x16EqualJS(o,v){
return %Int8x16Equal(o,v);
}
function Int8x16NotEqualJS(o,v){
return %Int8x16NotEqual(o,v);
}
function Int8x16LessThanJS(o,v){
return %Int8x16LessThan(o,v);
}
function Int8x16LessThanOrEqualJS(o,v){
return %Int8x16LessThanOrEqual(o,v);
}
function Int8x16GreaterThanJS(o,v){
return %Int8x16GreaterThan(o,v);
}
function Int8x16GreaterThanOrEqualJS(o,v){
return %Int8x16GreaterThanOrEqual(o,v);
}
function Int8x16LoadJS(y,z){
return %Int8x16Load(y,z);
}
function Int8x16StoreJS(y,z,o){
return %Int8x16Store(y,z,o);
}


function Uint32x4ReplaceLaneJS(s,t,p){
return %Uint32x4ReplaceLane(s,t,(%_ToNumber(p)));
}
function Uint32x4SelectJS(x,o,v){
return %Uint32x4Select(x,o,v);
}
function Uint32x4AddJS(o,v){
return %Uint32x4Add(o,v);
}
function Uint32x4SubJS(o,v){
return %Uint32x4Sub(o,v);
}
function Uint32x4MulJS(o,v){
return %Uint32x4Mul(o,v);
}
function Uint32x4MinJS(o,v){
return %Uint32x4Min(o,v);
}
function Uint32x4MaxJS(o,v){
return %Uint32x4Max(o,v);
}
function Uint32x4EqualJS(o,v){
return %Uint32x4Equal(o,v);
}
function Uint32x4NotEqualJS(o,v){
return %Uint32x4NotEqual(o,v);
}
function Uint32x4LessThanJS(o,v){
return %Uint32x4LessThan(o,v);
}
function Uint32x4LessThanOrEqualJS(o,v){
return %Uint32x4LessThanOrEqual(o,v);
}
function Uint32x4GreaterThanJS(o,v){
return %Uint32x4GreaterThan(o,v);
}
function Uint32x4GreaterThanOrEqualJS(o,v){
return %Uint32x4GreaterThanOrEqual(o,v);
}
function Uint32x4LoadJS(y,z){
return %Uint32x4Load(y,z);
}
function Uint32x4StoreJS(y,z,o){
return %Uint32x4Store(y,z,o);
}

function Uint16x8ReplaceLaneJS(s,t,p){
return %Uint16x8ReplaceLane(s,t,(%_ToNumber(p)));
}
function Uint16x8SelectJS(x,o,v){
return %Uint16x8Select(x,o,v);
}
function Uint16x8AddJS(o,v){
return %Uint16x8Add(o,v);
}
function Uint16x8SubJS(o,v){
return %Uint16x8Sub(o,v);
}
function Uint16x8MulJS(o,v){
return %Uint16x8Mul(o,v);
}
function Uint16x8MinJS(o,v){
return %Uint16x8Min(o,v);
}
function Uint16x8MaxJS(o,v){
return %Uint16x8Max(o,v);
}
function Uint16x8EqualJS(o,v){
return %Uint16x8Equal(o,v);
}
function Uint16x8NotEqualJS(o,v){
return %Uint16x8NotEqual(o,v);
}
function Uint16x8LessThanJS(o,v){
return %Uint16x8LessThan(o,v);
}
function Uint16x8LessThanOrEqualJS(o,v){
return %Uint16x8LessThanOrEqual(o,v);
}
function Uint16x8GreaterThanJS(o,v){
return %Uint16x8GreaterThan(o,v);
}
function Uint16x8GreaterThanOrEqualJS(o,v){
return %Uint16x8GreaterThanOrEqual(o,v);
}
function Uint16x8LoadJS(y,z){
return %Uint16x8Load(y,z);
}
function Uint16x8StoreJS(y,z,o){
return %Uint16x8Store(y,z,o);
}

function Uint8x16ReplaceLaneJS(s,t,p){
return %Uint8x16ReplaceLane(s,t,(%_ToNumber(p)));
}
function Uint8x16SelectJS(x,o,v){
return %Uint8x16Select(x,o,v);
}
function Uint8x16AddJS(o,v){
return %Uint8x16Add(o,v);
}
function Uint8x16SubJS(o,v){
return %Uint8x16Sub(o,v);
}
function Uint8x16MulJS(o,v){
return %Uint8x16Mul(o,v);
}
function Uint8x16MinJS(o,v){
return %Uint8x16Min(o,v);
}
function Uint8x16MaxJS(o,v){
return %Uint8x16Max(o,v);
}
function Uint8x16EqualJS(o,v){
return %Uint8x16Equal(o,v);
}
function Uint8x16NotEqualJS(o,v){
return %Uint8x16NotEqual(o,v);
}
function Uint8x16LessThanJS(o,v){
return %Uint8x16LessThan(o,v);
}
function Uint8x16LessThanOrEqualJS(o,v){
return %Uint8x16LessThanOrEqual(o,v);
}
function Uint8x16GreaterThanJS(o,v){
return %Uint8x16GreaterThan(o,v);
}
function Uint8x16GreaterThanOrEqualJS(o,v){
return %Uint8x16GreaterThanOrEqual(o,v);
}
function Uint8x16LoadJS(y,z){
return %Uint8x16Load(y,z);
}
function Uint8x16StoreJS(y,z,o){
return %Uint8x16Store(y,z,o);
}



function Int32x4AndJS(o,v){
return %Int32x4And(o,v);
}
function Int32x4OrJS(o,v){
return %Int32x4Or(o,v);
}
function Int32x4XorJS(o,v){
return %Int32x4Xor(o,v);
}
function Int32x4NotJS(o){
return %Int32x4Not(o);
}

function Int16x8AndJS(o,v){
return %Int16x8And(o,v);
}
function Int16x8OrJS(o,v){
return %Int16x8Or(o,v);
}
function Int16x8XorJS(o,v){
return %Int16x8Xor(o,v);
}
function Int16x8NotJS(o){
return %Int16x8Not(o);
}

function Int8x16AndJS(o,v){
return %Int8x16And(o,v);
}
function Int8x16OrJS(o,v){
return %Int8x16Or(o,v);
}
function Int8x16XorJS(o,v){
return %Int8x16Xor(o,v);
}
function Int8x16NotJS(o){
return %Int8x16Not(o);
}


function Uint32x4AndJS(o,v){
return %Uint32x4And(o,v);
}
function Uint32x4OrJS(o,v){
return %Uint32x4Or(o,v);
}
function Uint32x4XorJS(o,v){
return %Uint32x4Xor(o,v);
}
function Uint32x4NotJS(o){
return %Uint32x4Not(o);
}

function Uint16x8AndJS(o,v){
return %Uint16x8And(o,v);
}
function Uint16x8OrJS(o,v){
return %Uint16x8Or(o,v);
}
function Uint16x8XorJS(o,v){
return %Uint16x8Xor(o,v);
}
function Uint16x8NotJS(o){
return %Uint16x8Not(o);
}

function Uint8x16AndJS(o,v){
return %Uint8x16And(o,v);
}
function Uint8x16OrJS(o,v){
return %Uint8x16Or(o,v);
}
function Uint8x16XorJS(o,v){
return %Uint8x16Xor(o,v);
}
function Uint8x16NotJS(o){
return %Uint8x16Not(o);
}


function Bool32x4AndJS(o,v){
return %Bool32x4And(o,v);
}
function Bool32x4OrJS(o,v){
return %Bool32x4Or(o,v);
}
function Bool32x4XorJS(o,v){
return %Bool32x4Xor(o,v);
}
function Bool32x4NotJS(o){
return %Bool32x4Not(o);
}

function Bool16x8AndJS(o,v){
return %Bool16x8And(o,v);
}
function Bool16x8OrJS(o,v){
return %Bool16x8Or(o,v);
}
function Bool16x8XorJS(o,v){
return %Bool16x8Xor(o,v);
}
function Bool16x8NotJS(o){
return %Bool16x8Not(o);
}

function Bool8x16AndJS(o,v){
return %Bool8x16And(o,v);
}
function Bool8x16OrJS(o,v){
return %Bool8x16Or(o,v);
}
function Bool8x16XorJS(o,v){
return %Bool8x16Xor(o,v);
}
function Bool8x16NotJS(o){
return %Bool8x16Not(o);
}



function Float32x4FromInt32x4JS(o){
return %Float32x4FromInt32x4(o);
}

function Float32x4FromUint32x4JS(o){
return %Float32x4FromUint32x4(o);
}

function Int32x4FromFloat32x4JS(o){
return %Int32x4FromFloat32x4(o);
}

function Int32x4FromUint32x4JS(o){
return %Int32x4FromUint32x4(o);
}

function Uint32x4FromFloat32x4JS(o){
return %Uint32x4FromFloat32x4(o);
}

function Uint32x4FromInt32x4JS(o){
return %Uint32x4FromInt32x4(o);
}

function Int16x8FromUint16x8JS(o){
return %Int16x8FromUint16x8(o);
}

function Uint16x8FromInt16x8JS(o){
return %Uint16x8FromInt16x8(o);
}

function Int8x16FromUint8x16JS(o){
return %Int8x16FromUint8x16(o);
}

function Uint8x16FromInt8x16JS(o){
return %Uint8x16FromInt8x16(o);
}


function Float32x4FromInt32x4BitsJS(o){
return %Float32x4FromInt32x4Bits(o);
}

function Float32x4FromUint32x4BitsJS(o){
return %Float32x4FromUint32x4Bits(o);
}

function Float32x4FromInt16x8BitsJS(o){
return %Float32x4FromInt16x8Bits(o);
}

function Float32x4FromUint16x8BitsJS(o){
return %Float32x4FromUint16x8Bits(o);
}

function Float32x4FromInt8x16BitsJS(o){
return %Float32x4FromInt8x16Bits(o);
}

function Float32x4FromUint8x16BitsJS(o){
return %Float32x4FromUint8x16Bits(o);
}

function Int32x4FromFloat32x4BitsJS(o){
return %Int32x4FromFloat32x4Bits(o);
}

function Int32x4FromUint32x4BitsJS(o){
return %Int32x4FromUint32x4Bits(o);
}

function Int32x4FromInt16x8BitsJS(o){
return %Int32x4FromInt16x8Bits(o);
}

function Int32x4FromUint16x8BitsJS(o){
return %Int32x4FromUint16x8Bits(o);
}

function Int32x4FromInt8x16BitsJS(o){
return %Int32x4FromInt8x16Bits(o);
}

function Int32x4FromUint8x16BitsJS(o){
return %Int32x4FromUint8x16Bits(o);
}

function Uint32x4FromFloat32x4BitsJS(o){
return %Uint32x4FromFloat32x4Bits(o);
}

function Uint32x4FromInt32x4BitsJS(o){
return %Uint32x4FromInt32x4Bits(o);
}

function Uint32x4FromInt16x8BitsJS(o){
return %Uint32x4FromInt16x8Bits(o);
}

function Uint32x4FromUint16x8BitsJS(o){
return %Uint32x4FromUint16x8Bits(o);
}

function Uint32x4FromInt8x16BitsJS(o){
return %Uint32x4FromInt8x16Bits(o);
}

function Uint32x4FromUint8x16BitsJS(o){
return %Uint32x4FromUint8x16Bits(o);
}

function Int16x8FromFloat32x4BitsJS(o){
return %Int16x8FromFloat32x4Bits(o);
}

function Int16x8FromInt32x4BitsJS(o){
return %Int16x8FromInt32x4Bits(o);
}

function Int16x8FromUint32x4BitsJS(o){
return %Int16x8FromUint32x4Bits(o);
}

function Int16x8FromUint16x8BitsJS(o){
return %Int16x8FromUint16x8Bits(o);
}

function Int16x8FromInt8x16BitsJS(o){
return %Int16x8FromInt8x16Bits(o);
}

function Int16x8FromUint8x16BitsJS(o){
return %Int16x8FromUint8x16Bits(o);
}

function Uint16x8FromFloat32x4BitsJS(o){
return %Uint16x8FromFloat32x4Bits(o);
}

function Uint16x8FromInt32x4BitsJS(o){
return %Uint16x8FromInt32x4Bits(o);
}

function Uint16x8FromUint32x4BitsJS(o){
return %Uint16x8FromUint32x4Bits(o);
}

function Uint16x8FromInt16x8BitsJS(o){
return %Uint16x8FromInt16x8Bits(o);
}

function Uint16x8FromInt8x16BitsJS(o){
return %Uint16x8FromInt8x16Bits(o);
}

function Uint16x8FromUint8x16BitsJS(o){
return %Uint16x8FromUint8x16Bits(o);
}

function Int8x16FromFloat32x4BitsJS(o){
return %Int8x16FromFloat32x4Bits(o);
}

function Int8x16FromInt32x4BitsJS(o){
return %Int8x16FromInt32x4Bits(o);
}

function Int8x16FromUint32x4BitsJS(o){
return %Int8x16FromUint32x4Bits(o);
}

function Int8x16FromInt16x8BitsJS(o){
return %Int8x16FromInt16x8Bits(o);
}

function Int8x16FromUint16x8BitsJS(o){
return %Int8x16FromUint16x8Bits(o);
}

function Int8x16FromUint8x16BitsJS(o){
return %Int8x16FromUint8x16Bits(o);
}

function Uint8x16FromFloat32x4BitsJS(o){
return %Uint8x16FromFloat32x4Bits(o);
}

function Uint8x16FromInt32x4BitsJS(o){
return %Uint8x16FromInt32x4Bits(o);
}

function Uint8x16FromUint32x4BitsJS(o){
return %Uint8x16FromUint32x4Bits(o);
}

function Uint8x16FromInt16x8BitsJS(o){
return %Uint8x16FromInt16x8Bits(o);
}

function Uint8x16FromUint16x8BitsJS(o){
return %Uint8x16FromUint16x8Bits(o);
}

function Uint8x16FromInt8x16BitsJS(o){
return %Uint8x16FromInt8x16Bits(o);
}


function Float32x4Load1JS(y,z){
return %Float32x4Load1(y,z);
}
function Float32x4Store1JS(y,z,o){
return %Float32x4Store1(y,z,o);
}

function Float32x4Load2JS(y,z){
return %Float32x4Load2(y,z);
}
function Float32x4Store2JS(y,z,o){
return %Float32x4Store2(y,z,o);
}

function Float32x4Load3JS(y,z){
return %Float32x4Load3(y,z);
}
function Float32x4Store3JS(y,z,o){
return %Float32x4Store3(y,z,o);
}

function Int32x4Load1JS(y,z){
return %Int32x4Load1(y,z);
}
function Int32x4Store1JS(y,z,o){
return %Int32x4Store1(y,z,o);
}

function Int32x4Load2JS(y,z){
return %Int32x4Load2(y,z);
}
function Int32x4Store2JS(y,z,o){
return %Int32x4Store2(y,z,o);
}

function Int32x4Load3JS(y,z){
return %Int32x4Load3(y,z);
}
function Int32x4Store3JS(y,z,o){
return %Int32x4Store3(y,z,o);
}

function Uint32x4Load1JS(y,z){
return %Uint32x4Load1(y,z);
}
function Uint32x4Store1JS(y,z,o){
return %Uint32x4Store1(y,z,o);
}

function Uint32x4Load2JS(y,z){
return %Uint32x4Load2(y,z);
}
function Uint32x4Store2JS(y,z,o){
return %Uint32x4Store2(y,z,o);
}

function Uint32x4Load3JS(y,z){
return %Uint32x4Load3(y,z);
}
function Uint32x4Store3JS(y,z,o){
return %Uint32x4Store3(y,z,o);
}


function Float32x4Splat(w){
return %CreateFloat32x4(w,w,w,w);
}
function Float32x4SwizzleJS(o,A,B,C,D){
return %Float32x4Swizzle(o,A,B,C,D);
}
function Float32x4ShuffleJS(o,v,A,B,C,D){
return %Float32x4Shuffle(o,v,A,B,C,D);
}

function Int32x4Splat(w){
return %CreateInt32x4(w,w,w,w);
}
function Int32x4SwizzleJS(o,A,B,C,D){
return %Int32x4Swizzle(o,A,B,C,D);
}
function Int32x4ShuffleJS(o,v,A,B,C,D){
return %Int32x4Shuffle(o,v,A,B,C,D);
}

function Uint32x4Splat(w){
return %CreateUint32x4(w,w,w,w);
}
function Uint32x4SwizzleJS(o,A,B,C,D){
return %Uint32x4Swizzle(o,A,B,C,D);
}
function Uint32x4ShuffleJS(o,v,A,B,C,D){
return %Uint32x4Shuffle(o,v,A,B,C,D);
}

function Bool32x4Splat(w){
return %CreateBool32x4(w,w,w,w);
}
function Bool32x4SwizzleJS(o,A,B,C,D){
return %Bool32x4Swizzle(o,A,B,C,D);
}
function Bool32x4ShuffleJS(o,v,A,B,C,D){
return %Bool32x4Shuffle(o,v,A,B,C,D);
}


function Int16x8Splat(w){
return %CreateInt16x8(w,w,w,w,w,w,w,w);
}
function Int16x8SwizzleJS(o,A,B,C,D,E,F,G,H){
return %Int16x8Swizzle(o,A,B,C,D,E,F,G,H);
}
function Int16x8ShuffleJS(o,v,A,B,C,D,E,F,G,H){
return %Int16x8Shuffle(o,v,A,B,C,D,E,F,G,H);
}

function Uint16x8Splat(w){
return %CreateUint16x8(w,w,w,w,w,w,w,w);
}
function Uint16x8SwizzleJS(o,A,B,C,D,E,F,G,H){
return %Uint16x8Swizzle(o,A,B,C,D,E,F,G,H);
}
function Uint16x8ShuffleJS(o,v,A,B,C,D,E,F,G,H){
return %Uint16x8Shuffle(o,v,A,B,C,D,E,F,G,H);
}

function Bool16x8Splat(w){
return %CreateBool16x8(w,w,w,w,w,w,w,w);
}
function Bool16x8SwizzleJS(o,A,B,C,D,E,F,G,H){
return %Bool16x8Swizzle(o,A,B,C,D,E,F,G,H);
}
function Bool16x8ShuffleJS(o,v,A,B,C,D,E,F,G,H){
return %Bool16x8Shuffle(o,v,A,B,C,D,E,F,G,H);
}


function Int8x16Splat(w){
return %CreateInt8x16(w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w);
}
function Int8x16SwizzleJS(o,A,B,C,D,E,F,G,H,c8,c9,c10,c11,
c12,c13,c14,c15){
return %Int8x16Swizzle(o,A,B,C,D,E,F,G,H,c8,c9,c10,c11,
c12,c13,c14,c15);
}
function Int8x16ShuffleJS(o,v,A,B,C,D,E,F,G,H,c8,c9,c10,
c11,c12,c13,c14,c15){
return %Int8x16Shuffle(o,v,A,B,C,D,E,F,G,H,c8,c9,c10,
c11,c12,c13,c14,c15);
}

function Uint8x16Splat(w){
return %CreateUint8x16(w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w);
}
function Uint8x16SwizzleJS(o,A,B,C,D,E,F,G,H,c8,c9,c10,c11,
c12,c13,c14,c15){
return %Uint8x16Swizzle(o,A,B,C,D,E,F,G,H,c8,c9,c10,c11,
c12,c13,c14,c15);
}
function Uint8x16ShuffleJS(o,v,A,B,C,D,E,F,G,H,c8,c9,c10,
c11,c12,c13,c14,c15){
return %Uint8x16Shuffle(o,v,A,B,C,D,E,F,G,H,c8,c9,c10,
c11,c12,c13,c14,c15);
}

function Bool8x16Splat(w){
return %CreateBool8x16(w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w);
}
function Bool8x16SwizzleJS(o,A,B,C,D,E,F,G,H,c8,c9,c10,c11,
c12,c13,c14,c15){
return %Bool8x16Swizzle(o,A,B,C,D,E,F,G,H,c8,c9,c10,c11,
c12,c13,c14,c15);
}
function Bool8x16ShuffleJS(o,v,A,B,C,D,E,F,G,H,c8,c9,c10,
c11,c12,c13,c14,c15){
return %Bool8x16Shuffle(o,v,A,B,C,D,E,F,G,H,c8,c9,c10,
c11,c12,c13,c14,c15);
}


function Float32x4Constructor(A,B,C,D){
if(%_IsConstructCall())throw MakeTypeError(55,"Float32x4");
return %CreateFloat32x4((%_ToNumber(A)),(%_ToNumber(B)),
(%_ToNumber(C)),(%_ToNumber(D)));
}
function Int32x4Constructor(A,B,C,D){
if(%_IsConstructCall())throw MakeTypeError(55,"Int32x4");
return %CreateInt32x4((%_ToNumber(A)),(%_ToNumber(B)),
(%_ToNumber(C)),(%_ToNumber(D)));
}
function Uint32x4Constructor(A,B,C,D){
if(%_IsConstructCall())throw MakeTypeError(55,"Uint32x4");
return %CreateUint32x4((%_ToNumber(A)),(%_ToNumber(B)),
(%_ToNumber(C)),(%_ToNumber(D)));
}
function Bool32x4Constructor(A,B,C,D){
if(%_IsConstructCall())throw MakeTypeError(55,"Bool32x4");
return %CreateBool32x4(A,B,C,D);
}
function Int16x8Constructor(A,B,C,D,E,F,G,H){
if(%_IsConstructCall())throw MakeTypeError(55,"Int16x8");
return %CreateInt16x8((%_ToNumber(A)),(%_ToNumber(B)),
(%_ToNumber(C)),(%_ToNumber(D)),
(%_ToNumber(E)),(%_ToNumber(F)),
(%_ToNumber(G)),(%_ToNumber(H)));
}
function Uint16x8Constructor(A,B,C,D,E,F,G,H){
if(%_IsConstructCall())throw MakeTypeError(55,"Uint16x8");
return %CreateUint16x8((%_ToNumber(A)),(%_ToNumber(B)),
(%_ToNumber(C)),(%_ToNumber(D)),
(%_ToNumber(E)),(%_ToNumber(F)),
(%_ToNumber(G)),(%_ToNumber(H)));
}
function Bool16x8Constructor(A,B,C,D,E,F,G,H){
if(%_IsConstructCall())throw MakeTypeError(55,"Bool16x8");
return %CreateBool16x8(A,B,C,D,E,F,G,H);
}
function Int8x16Constructor(A,B,C,D,E,F,G,H,c8,c9,c10,c11,
c12,c13,c14,c15){
if(%_IsConstructCall())throw MakeTypeError(55,"Int8x16");
return %CreateInt8x16((%_ToNumber(A)),(%_ToNumber(B)),
(%_ToNumber(C)),(%_ToNumber(D)),
(%_ToNumber(E)),(%_ToNumber(F)),
(%_ToNumber(G)),(%_ToNumber(H)),
(%_ToNumber(c8)),(%_ToNumber(c9)),
(%_ToNumber(c10)),(%_ToNumber(c11)),
(%_ToNumber(c12)),(%_ToNumber(c13)),
(%_ToNumber(c14)),(%_ToNumber(c15)));
}
function Uint8x16Constructor(A,B,C,D,E,F,G,H,c8,c9,c10,c11,
c12,c13,c14,c15){
if(%_IsConstructCall())throw MakeTypeError(55,"Uint8x16");
return %CreateUint8x16((%_ToNumber(A)),(%_ToNumber(B)),
(%_ToNumber(C)),(%_ToNumber(D)),
(%_ToNumber(E)),(%_ToNumber(F)),
(%_ToNumber(G)),(%_ToNumber(H)),
(%_ToNumber(c8)),(%_ToNumber(c9)),
(%_ToNumber(c10)),(%_ToNumber(c11)),
(%_ToNumber(c12)),(%_ToNumber(c13)),
(%_ToNumber(c14)),(%_ToNumber(c15)));
}
function Bool8x16Constructor(A,B,C,D,E,F,G,H,c8,c9,c10,c11,
c12,c13,c14,c15){
if(%_IsConstructCall())throw MakeTypeError(55,"Bool8x16");
return %CreateBool8x16(A,B,C,D,E,F,G,H,c8,c9,c10,c11,c12,
c13,c14,c15);
}
function Float32x4AbsJS(o){
return %Float32x4Abs(o);
}
function Float32x4SqrtJS(o){
return %Float32x4Sqrt(o);
}
function Float32x4RecipApproxJS(o){
return %Float32x4RecipApprox(o);
}
function Float32x4RecipSqrtApproxJS(o){
return %Float32x4RecipSqrtApprox(o);
}
function Float32x4DivJS(o,v){
return %Float32x4Div(o,v);
}
function Float32x4MinNumJS(o,v){
return %Float32x4MinNum(o,v);
}
function Float32x4MaxNumJS(o,v){
return %Float32x4MaxNum(o,v);
}
%AddNamedProperty(c,d,'SIMD',1|2);
%SetCode(e,Float32x4Constructor);
%FunctionSetPrototype(e,{});
%AddNamedProperty(e.prototype,'constructor',e,
2);
%AddNamedProperty(e.prototype,d,'Float32x4',
2|1);
b.InstallFunctions(e.prototype,2,[
'toLocaleString',Float32x4ToLocaleString,
'toString',Float32x4ToString,
'valueOf',Float32x4ValueOf,
]);


%SetCode(f,Int32x4Constructor);
%FunctionSetPrototype(f,{});
%AddNamedProperty(f.prototype,'constructor',f,
2);
%AddNamedProperty(f.prototype,d,'Int32x4',
2|1);
b.InstallFunctions(f.prototype,2,[
'toLocaleString',Int32x4ToLocaleString,
'toString',Int32x4ToString,
'valueOf',Int32x4ValueOf,
]);

%SetCode(g,Int16x8Constructor);
%FunctionSetPrototype(g,{});
%AddNamedProperty(g.prototype,'constructor',g,
2);
%AddNamedProperty(g.prototype,d,'Int16x8',
2|1);
b.InstallFunctions(g.prototype,2,[
'toLocaleString',Int16x8ToLocaleString,
'toString',Int16x8ToString,
'valueOf',Int16x8ValueOf,
]);

%SetCode(h,Int8x16Constructor);
%FunctionSetPrototype(h,{});
%AddNamedProperty(h.prototype,'constructor',h,
2);
%AddNamedProperty(h.prototype,d,'Int8x16',
2|1);
b.InstallFunctions(h.prototype,2,[
'toLocaleString',Int8x16ToLocaleString,
'toString',Int8x16ToString,
'valueOf',Int8x16ValueOf,
]);


%SetCode(i,Uint32x4Constructor);
%FunctionSetPrototype(i,{});
%AddNamedProperty(i.prototype,'constructor',i,
2);
%AddNamedProperty(i.prototype,d,'Uint32x4',
2|1);
b.InstallFunctions(i.prototype,2,[
'toLocaleString',Uint32x4ToLocaleString,
'toString',Uint32x4ToString,
'valueOf',Uint32x4ValueOf,
]);

%SetCode(j,Uint16x8Constructor);
%FunctionSetPrototype(j,{});
%AddNamedProperty(j.prototype,'constructor',j,
2);
%AddNamedProperty(j.prototype,d,'Uint16x8',
2|1);
b.InstallFunctions(j.prototype,2,[
'toLocaleString',Uint16x8ToLocaleString,
'toString',Uint16x8ToString,
'valueOf',Uint16x8ValueOf,
]);

%SetCode(k,Uint8x16Constructor);
%FunctionSetPrototype(k,{});
%AddNamedProperty(k.prototype,'constructor',k,
2);
%AddNamedProperty(k.prototype,d,'Uint8x16',
2|1);
b.InstallFunctions(k.prototype,2,[
'toLocaleString',Uint8x16ToLocaleString,
'toString',Uint8x16ToString,
'valueOf',Uint8x16ValueOf,
]);


%SetCode(l,Bool32x4Constructor);
%FunctionSetPrototype(l,{});
%AddNamedProperty(l.prototype,'constructor',l,
2);
%AddNamedProperty(l.prototype,d,'Bool32x4',
2|1);
b.InstallFunctions(l.prototype,2,[
'toLocaleString',Bool32x4ToLocaleString,
'toString',Bool32x4ToString,
'valueOf',Bool32x4ValueOf,
]);

%SetCode(m,Bool16x8Constructor);
%FunctionSetPrototype(m,{});
%AddNamedProperty(m.prototype,'constructor',m,
2);
%AddNamedProperty(m.prototype,d,'Bool16x8',
2|1);
b.InstallFunctions(m.prototype,2,[
'toLocaleString',Bool16x8ToLocaleString,
'toString',Bool16x8ToString,
'valueOf',Bool16x8ValueOf,
]);

%SetCode(n,Bool8x16Constructor);
%FunctionSetPrototype(n,{});
%AddNamedProperty(n.prototype,'constructor',n,
2);
%AddNamedProperty(n.prototype,d,'Bool8x16',
2|1);
b.InstallFunctions(n.prototype,2,[
'toLocaleString',Bool8x16ToLocaleString,
'toString',Bool8x16ToString,
'valueOf',Bool8x16ValueOf,
]);



b.InstallFunctions(e,2,[
'splat',Float32x4Splat,
'check',Float32x4CheckJS,
'extractLane',Float32x4ExtractLaneJS,
'replaceLane',Float32x4ReplaceLaneJS,
'neg',Float32x4NegJS,
'abs',Float32x4AbsJS,
'sqrt',Float32x4SqrtJS,
'reciprocalApproximation',Float32x4RecipApproxJS,
'reciprocalSqrtApproximation',Float32x4RecipSqrtApproxJS,
'add',Float32x4AddJS,
'sub',Float32x4SubJS,
'mul',Float32x4MulJS,
'div',Float32x4DivJS,
'min',Float32x4MinJS,
'max',Float32x4MaxJS,
'minNum',Float32x4MinNumJS,
'maxNum',Float32x4MaxNumJS,
'lessThan',Float32x4LessThanJS,
'lessThanOrEqual',Float32x4LessThanOrEqualJS,
'greaterThan',Float32x4GreaterThanJS,
'greaterThanOrEqual',Float32x4GreaterThanOrEqualJS,
'equal',Float32x4EqualJS,
'notEqual',Float32x4NotEqualJS,
'select',Float32x4SelectJS,
'swizzle',Float32x4SwizzleJS,
'shuffle',Float32x4ShuffleJS,
'fromInt32x4',Float32x4FromInt32x4JS,
'fromUint32x4',Float32x4FromUint32x4JS,
'fromInt32x4Bits',Float32x4FromInt32x4BitsJS,
'fromUint32x4Bits',Float32x4FromUint32x4BitsJS,
'fromInt16x8Bits',Float32x4FromInt16x8BitsJS,
'fromUint16x8Bits',Float32x4FromUint16x8BitsJS,
'fromInt8x16Bits',Float32x4FromInt8x16BitsJS,
'fromUint8x16Bits',Float32x4FromUint8x16BitsJS,
'load',Float32x4LoadJS,
'load1',Float32x4Load1JS,
'load2',Float32x4Load2JS,
'load3',Float32x4Load3JS,
'store',Float32x4StoreJS,
'store1',Float32x4Store1JS,
'store2',Float32x4Store2JS,
'store3',Float32x4Store3JS,
]);
b.InstallFunctions(f,2,[
'splat',Int32x4Splat,
'check',Int32x4CheckJS,
'extractLane',Int32x4ExtractLaneJS,
'replaceLane',Int32x4ReplaceLaneJS,
'neg',Int32x4NegJS,
'add',Int32x4AddJS,
'sub',Int32x4SubJS,
'mul',Int32x4MulJS,
'min',Int32x4MinJS,
'max',Int32x4MaxJS,
'and',Int32x4AndJS,
'or',Int32x4OrJS,
'xor',Int32x4XorJS,
'not',Int32x4NotJS,
'shiftLeftByScalar',Int32x4ShiftLeftByScalarJS,
'shiftRightByScalar',Int32x4ShiftRightByScalarJS,
'lessThan',Int32x4LessThanJS,
'lessThanOrEqual',Int32x4LessThanOrEqualJS,
'greaterThan',Int32x4GreaterThanJS,
'greaterThanOrEqual',Int32x4GreaterThanOrEqualJS,
'equal',Int32x4EqualJS,
'notEqual',Int32x4NotEqualJS,
'select',Int32x4SelectJS,
'swizzle',Int32x4SwizzleJS,
'shuffle',Int32x4ShuffleJS,
'fromFloat32x4',Int32x4FromFloat32x4JS,
'fromUint32x4',Int32x4FromUint32x4JS,
'fromFloat32x4Bits',Int32x4FromFloat32x4BitsJS,
'fromUint32x4Bits',Int32x4FromUint32x4BitsJS,
'fromInt16x8Bits',Int32x4FromInt16x8BitsJS,
'fromUint16x8Bits',Int32x4FromUint16x8BitsJS,
'fromInt8x16Bits',Int32x4FromInt8x16BitsJS,
'fromUint8x16Bits',Int32x4FromUint8x16BitsJS,
'load',Int32x4LoadJS,
'load1',Int32x4Load1JS,
'load2',Int32x4Load2JS,
'load3',Int32x4Load3JS,
'store',Int32x4StoreJS,
'store1',Int32x4Store1JS,
'store2',Int32x4Store2JS,
'store3',Int32x4Store3JS,
]);
b.InstallFunctions(i,2,[
'splat',Uint32x4Splat,
'check',Uint32x4CheckJS,
'extractLane',Uint32x4ExtractLaneJS,
'replaceLane',Uint32x4ReplaceLaneJS,
'add',Uint32x4AddJS,
'sub',Uint32x4SubJS,
'mul',Uint32x4MulJS,
'min',Uint32x4MinJS,
'max',Uint32x4MaxJS,
'and',Uint32x4AndJS,
'or',Uint32x4OrJS,
'xor',Uint32x4XorJS,
'not',Uint32x4NotJS,
'shiftLeftByScalar',Uint32x4ShiftLeftByScalarJS,
'shiftRightByScalar',Uint32x4ShiftRightByScalarJS,
'lessThan',Uint32x4LessThanJS,
'lessThanOrEqual',Uint32x4LessThanOrEqualJS,
'greaterThan',Uint32x4GreaterThanJS,
'greaterThanOrEqual',Uint32x4GreaterThanOrEqualJS,
'equal',Uint32x4EqualJS,
'notEqual',Uint32x4NotEqualJS,
'select',Uint32x4SelectJS,
'swizzle',Uint32x4SwizzleJS,
'shuffle',Uint32x4ShuffleJS,
'fromFloat32x4',Uint32x4FromFloat32x4JS,
'fromInt32x4',Uint32x4FromInt32x4JS,
'fromFloat32x4Bits',Uint32x4FromFloat32x4BitsJS,
'fromInt32x4Bits',Uint32x4FromInt32x4BitsJS,
'fromInt16x8Bits',Uint32x4FromInt16x8BitsJS,
'fromUint16x8Bits',Uint32x4FromUint16x8BitsJS,
'fromInt8x16Bits',Uint32x4FromInt8x16BitsJS,
'fromUint8x16Bits',Uint32x4FromUint8x16BitsJS,
'load',Uint32x4LoadJS,
'load1',Uint32x4Load1JS,
'load2',Uint32x4Load2JS,
'load3',Uint32x4Load3JS,
'store',Uint32x4StoreJS,
'store1',Uint32x4Store1JS,
'store2',Uint32x4Store2JS,
'store3',Uint32x4Store3JS,
]);
b.InstallFunctions(l,2,[
'splat',Bool32x4Splat,
'check',Bool32x4CheckJS,
'extractLane',Bool32x4ExtractLaneJS,
'replaceLane',Bool32x4ReplaceLaneJS,
'and',Bool32x4AndJS,
'or',Bool32x4OrJS,
'xor',Bool32x4XorJS,
'not',Bool32x4NotJS,
'anyTrue',Bool32x4AnyTrueJS,
'allTrue',Bool32x4AllTrueJS,
'swizzle',Bool32x4SwizzleJS,
'shuffle',Bool32x4ShuffleJS,
]);
b.InstallFunctions(g,2,[
'splat',Int16x8Splat,
'check',Int16x8CheckJS,
'extractLane',Int16x8ExtractLaneJS,
'replaceLane',Int16x8ReplaceLaneJS,
'neg',Int16x8NegJS,
'add',Int16x8AddJS,
'sub',Int16x8SubJS,
'addSaturate',Int16x8AddSaturateJS,
'subSaturate',Int16x8SubSaturateJS,
'mul',Int16x8MulJS,
'min',Int16x8MinJS,
'max',Int16x8MaxJS,
'and',Int16x8AndJS,
'or',Int16x8OrJS,
'xor',Int16x8XorJS,
'not',Int16x8NotJS,
'shiftLeftByScalar',Int16x8ShiftLeftByScalarJS,
'shiftRightByScalar',Int16x8ShiftRightByScalarJS,
'lessThan',Int16x8LessThanJS,
'lessThanOrEqual',Int16x8LessThanOrEqualJS,
'greaterThan',Int16x8GreaterThanJS,
'greaterThanOrEqual',Int16x8GreaterThanOrEqualJS,
'equal',Int16x8EqualJS,
'notEqual',Int16x8NotEqualJS,
'select',Int16x8SelectJS,
'swizzle',Int16x8SwizzleJS,
'shuffle',Int16x8ShuffleJS,
'fromUint16x8',Int16x8FromUint16x8JS,
'fromFloat32x4Bits',Int16x8FromFloat32x4BitsJS,
'fromInt32x4Bits',Int16x8FromInt32x4BitsJS,
'fromUint32x4Bits',Int16x8FromUint32x4BitsJS,
'fromUint16x8Bits',Int16x8FromUint16x8BitsJS,
'fromInt8x16Bits',Int16x8FromInt8x16BitsJS,
'fromUint8x16Bits',Int16x8FromUint8x16BitsJS,
'load',Int16x8LoadJS,
'store',Int16x8StoreJS,
]);
b.InstallFunctions(j,2,[
'splat',Uint16x8Splat,
'check',Uint16x8CheckJS,
'extractLane',Uint16x8ExtractLaneJS,
'replaceLane',Uint16x8ReplaceLaneJS,
'add',Uint16x8AddJS,
'sub',Uint16x8SubJS,
'addSaturate',Uint16x8AddSaturateJS,
'subSaturate',Uint16x8SubSaturateJS,
'mul',Uint16x8MulJS,
'min',Uint16x8MinJS,
'max',Uint16x8MaxJS,
'and',Uint16x8AndJS,
'or',Uint16x8OrJS,
'xor',Uint16x8XorJS,
'not',Uint16x8NotJS,
'shiftLeftByScalar',Uint16x8ShiftLeftByScalarJS,
'shiftRightByScalar',Uint16x8ShiftRightByScalarJS,
'lessThan',Uint16x8LessThanJS,
'lessThanOrEqual',Uint16x8LessThanOrEqualJS,
'greaterThan',Uint16x8GreaterThanJS,
'greaterThanOrEqual',Uint16x8GreaterThanOrEqualJS,
'equal',Uint16x8EqualJS,
'notEqual',Uint16x8NotEqualJS,
'select',Uint16x8SelectJS,
'swizzle',Uint16x8SwizzleJS,
'shuffle',Uint16x8ShuffleJS,
'fromInt16x8',Uint16x8FromInt16x8JS,
'fromFloat32x4Bits',Uint16x8FromFloat32x4BitsJS,
'fromInt32x4Bits',Uint16x8FromInt32x4BitsJS,
'fromUint32x4Bits',Uint16x8FromUint32x4BitsJS,
'fromInt16x8Bits',Uint16x8FromInt16x8BitsJS,
'fromInt8x16Bits',Uint16x8FromInt8x16BitsJS,
'fromUint8x16Bits',Uint16x8FromUint8x16BitsJS,
'load',Uint16x8LoadJS,
'store',Uint16x8StoreJS,
]);
b.InstallFunctions(m,2,[
'splat',Bool16x8Splat,
'check',Bool16x8CheckJS,
'extractLane',Bool16x8ExtractLaneJS,
'replaceLane',Bool16x8ReplaceLaneJS,
'and',Bool16x8AndJS,
'or',Bool16x8OrJS,
'xor',Bool16x8XorJS,
'not',Bool16x8NotJS,
'anyTrue',Bool16x8AnyTrueJS,
'allTrue',Bool16x8AllTrueJS,
'swizzle',Bool16x8SwizzleJS,
'shuffle',Bool16x8ShuffleJS,
]);
b.InstallFunctions(h,2,[
'splat',Int8x16Splat,
'check',Int8x16CheckJS,
'extractLane',Int8x16ExtractLaneJS,
'replaceLane',Int8x16ReplaceLaneJS,
'neg',Int8x16NegJS,
'add',Int8x16AddJS,
'sub',Int8x16SubJS,
'addSaturate',Int8x16AddSaturateJS,
'subSaturate',Int8x16SubSaturateJS,
'mul',Int8x16MulJS,
'min',Int8x16MinJS,
'max',Int8x16MaxJS,
'and',Int8x16AndJS,
'or',Int8x16OrJS,
'xor',Int8x16XorJS,
'not',Int8x16NotJS,
'shiftLeftByScalar',Int8x16ShiftLeftByScalarJS,
'shiftRightByScalar',Int8x16ShiftRightByScalarJS,
'lessThan',Int8x16LessThanJS,
'lessThanOrEqual',Int8x16LessThanOrEqualJS,
'greaterThan',Int8x16GreaterThanJS,
'greaterThanOrEqual',Int8x16GreaterThanOrEqualJS,
'equal',Int8x16EqualJS,
'notEqual',Int8x16NotEqualJS,
'select',Int8x16SelectJS,
'swizzle',Int8x16SwizzleJS,
'shuffle',Int8x16ShuffleJS,
'fromUint8x16',Int8x16FromUint8x16JS,
'fromFloat32x4Bits',Int8x16FromFloat32x4BitsJS,
'fromInt32x4Bits',Int8x16FromInt32x4BitsJS,
'fromUint32x4Bits',Int8x16FromUint32x4BitsJS,
'fromInt16x8Bits',Int8x16FromInt16x8BitsJS,
'fromUint16x8Bits',Int8x16FromUint16x8BitsJS,
'fromUint8x16Bits',Int8x16FromUint8x16BitsJS,
'load',Int8x16LoadJS,
'store',Int8x16StoreJS,
]);
b.InstallFunctions(k,2,[
'splat',Uint8x16Splat,
'check',Uint8x16CheckJS,
'extractLane',Uint8x16ExtractLaneJS,
'replaceLane',Uint8x16ReplaceLaneJS,
'add',Uint8x16AddJS,
'sub',Uint8x16SubJS,
'addSaturate',Uint8x16AddSaturateJS,
'subSaturate',Uint8x16SubSaturateJS,
'mul',Uint8x16MulJS,
'min',Uint8x16MinJS,
'max',Uint8x16MaxJS,
'and',Uint8x16AndJS,
'or',Uint8x16OrJS,
'xor',Uint8x16XorJS,
'not',Uint8x16NotJS,
'shiftLeftByScalar',Uint8x16ShiftLeftByScalarJS,
'shiftRightByScalar',Uint8x16ShiftRightByScalarJS,
'lessThan',Uint8x16LessThanJS,
'lessThanOrEqual',Uint8x16LessThanOrEqualJS,
'greaterThan',Uint8x16GreaterThanJS,
'greaterThanOrEqual',Uint8x16GreaterThanOrEqualJS,
'equal',Uint8x16EqualJS,
'notEqual',Uint8x16NotEqualJS,
'select',Uint8x16SelectJS,
'swizzle',Uint8x16SwizzleJS,
'shuffle',Uint8x16ShuffleJS,
'fromInt8x16',Uint8x16FromInt8x16JS,
'fromFloat32x4Bits',Uint8x16FromFloat32x4BitsJS,
'fromInt32x4Bits',Uint8x16FromInt32x4BitsJS,
'fromUint32x4Bits',Uint8x16FromUint32x4BitsJS,
'fromInt16x8Bits',Uint8x16FromInt16x8BitsJS,
'fromUint16x8Bits',Uint8x16FromUint16x8BitsJS,
'fromInt8x16Bits',Uint8x16FromInt8x16BitsJS,
'load',Uint8x16LoadJS,
'store',Uint8x16StoreJS,
]);
b.InstallFunctions(n,2,[
'splat',Bool8x16Splat,
'check',Bool8x16CheckJS,
'extractLane',Bool8x16ExtractLaneJS,
'replaceLane',Bool8x16ReplaceLaneJS,
'and',Bool8x16AndJS,
'or',Bool8x16OrJS,
'xor',Bool8x16XorJS,
'not',Bool8x16NotJS,
'anyTrue',Bool8x16AnyTrueJS,
'allTrue',Bool8x16AllTrueJS,
'swizzle',Bool8x16SwizzleJS,
'shuffle',Bool8x16ShuffleJS,
]);
b.Export(function(I){
I.Float32x4ToString=Float32x4ToString;
I.Int32x4ToString=Int32x4ToString;
I.Uint32x4ToString=Uint32x4ToString;
I.Bool32x4ToString=Bool32x4ToString;
I.Int16x8ToString=Int16x8ToString;
I.Uint16x8ToString=Uint16x8ToString;
I.Bool16x8ToString=Bool16x8ToString;
I.Int8x16ToString=Int8x16ToString;
I.Uint8x16ToString=Uint8x16ToString;
I.Bool8x16ToString=Bool8x16ToString;
});
})

 (test-extraY
(function (global, binding, v8) {
  'use strict';
  binding.testExtraShouldReturnFive = function() {
    return 5;
  };
  binding.testExtraShouldCallToRuntime = function() {
    return binding.runtime(3);
  };
  const Object = global.Object;
  const hasOwn = v8.uncurryThis(Object.prototype.hasOwnProperty);
  const Function = global.Function;
  const call = v8.uncurryThis(Function.prototype.call);
  const apply = v8.uncurryThis(Function.prototype.apply);
  const Promise = global.Promise;
  const Promise_resolve = v8.simpleBind(Promise.resolve, Promise);
  binding.testExtraCanUseUtils = function() {
    const fulfilledPromise = v8.createPromise();
    v8.resolvePromise(
      fulfilledPromise,
      hasOwn({ test: 'test' }, 'test') ? 1 : -1
    );
    const fulfilledPromise2 = Promise_resolve(call(function (arg1) {
      return (this.prop === arg1 && arg1 === 'value') ? 2 : -1;
    }, { prop: 'value' }, 'value'));
    const rejectedPromise = v8.createPromise();
    v8.rejectPromise(rejectedPromise, apply(function (arg1, arg2) {
      return (arg1 === arg2 && arg2 === 'x') ? 3 : -1;
    }, null, new v8.InternalPackedArray('x', 'x')));
    return {
      privateSymbol: v8.createPrivateSymbol('sym'),
      fulfilledPromise,
      fulfilledPromise2,
      rejectedPromise
    };
  };
})
 \test-experimental-extraÍ
(function(a,b){
'use strict';
b.testExperimentalExtraShouldReturnTen=function(){
return 10;
};
b.testExperimentalExtraShouldCallToRuntime=function(){
return b.runtime(3);
};
})

